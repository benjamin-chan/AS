1                                         The SAS System                17:43 Monday, May 21, 2018

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           4.47 seconds
      cpu time            0.34 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=buildIndexLookup; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
128        footnote "&pgm.";
129        * footnote2 "%sysfunc(datetime(),datetime14.)";
130        title1 '--- AS project ---';
131        **********************************************************************;
132        options macrogen mlogic mprint symbolgen;
133        options nomacrogen nomlogic nomprint nosymbolgen;
134        
135        
136        ods html
2                                                                   The SAS System                                          17:43 Monday, May 21, 2018

137          body = "output\&cmt..html"
138          style = Statistical;
NOTE: Writing HTML Body file: output\buildIndexLookup.html
139        
140        
141        %let var = patid, indexGNN, indexDate, age, sex, asDate, enr_start_date, enr_end_date, asCohortDate, death_date;
142        proc sql;
143          create table DT.indexLookup AS
144            select "Marketscan" as database, "TNF"   as exposure, &var from DT.ASTNFCohortStdUCB_ex1     union corr
145            select "Marketscan" as database, "DMARD" as exposure, &var from DT.ASDMARDCohortStdUCB_ex2   union corr
146            select "Marketscan" as database, "NSAID" as exposure, &var from DT.ASNSAIDCohortStdUCB_ex2   union corr
147            select "Marketscan" as database, "No exposure" as exposure, &var from DT.ASNoExpCohortStdUCB_ex2   union corr
148            select "MPCD"       as database, "TNF"   as exposure, &var from DT.ASTNFCohortStdMPCD_ex1    union corr
149            select "MPCD"       as database, "DMARD" as exposure, &var from DT.ASDMARDCohortStdMPCD_ex2  union corr
150            select "MPCD"       as database, "NSAID" as exposure, &var from DT.ASNSAIDCohortStdMPCD_ex2  union corr
151            select "MPCD"       as database, "No exposure" as exposure, &var from DT.ASNoExpCohortStdMPCD_ex2  union corr
152            select "Medicare"   as database, "TNF"   as exposure, &var from DT.ASTNFCohortStd_SABR_ex1   union corr
153            select "Medicare"   as database, "DMARD" as exposure, &var from DT.ASDMARDCohortStd_SABR_ex2 union corr
154            select "Medicare"   as database, "NSAID" as exposure, &var from DT.ASNSAIDCohortStd_SABR_ex2 union corr
155            select "Medicare"   as database, "No exposure" as exposure, &var from DT.ASNoExpCohortStd_SABR_ex2 ;
NOTE: Table DT.INDEXLOOKUP created, with 20956 rows and 12 columns.

156          alter table DT.indexLookup add indexID numeric;
NOTE: Table DT.INDEXLOOKUP has been modified, with 13 columns.
157          update DT.indexLookup
158            set indexID = monotonic();
NOTE: 20956 rows were updated in DT.INDEXLOOKUP.

159        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.45 seconds
      cpu time            0.37 seconds
      

160        
161        proc sort data = DT.indexLookup nodupkey;
162          by database exposure patid indexGNN indexDate;
163        run;

NOTE: There were 20956 observations read from the data set DT.INDEXLOOKUP.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set DT.INDEXLOOKUP has 20956 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

164        
165        proc sql;
166          select database,
167                 exposure,
168                 count(distinct patid) as countDistinctPatid,
169                 count(distinct indexID) as countDistinctIndexes,
170                 count(*) as countRows
171            from DT.indexLookup
172            group by database, exposure;
                                                                  --- AS project ---                                    17:43 Monday, May 21, 2018   1

                                                                            count         count
                                                                         Distinct      Distinct
                                            database    exposure            Patid       Indexes  countRows
                                            --------------------------------------------------------------
                                            MPCD        DMARD                 145           165        165
                                            MPCD        NSAID                 265           355        355
                                            MPCD        No exposure           512           512        512
                                            MPCD        TNF                   575           670        670
                                            Marketscan  DMARD                 710           777        777
                                            Marketscan  NSAID                1293          1733       1733
                                            Marketscan  No exposure          1699          1699       1699
                                            Marketscan  TNF                  2864          3453       3453
                                            Medicare    DMARD                1432          1688       1688
                                            Medicare    NSAID                2755          4147       4147
                                            Medicare    No exposure          2489          2489       2489
                                            Medicare    TNF                  2660          3268       3268
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
173        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
      cpu time            0.09 seconds
      

174        /*
175        Check sequence of dates
176        
177        * In a small number of instances, AS cohort date is BEFORE enrollment start date
178        * Index date is always at least 183 days BEFORE enrollment start
179        * Index date is always at least 0 days BEFORE AS cohort date
180         */
181        proc sql;
182          select database,
3                                                                   The SAS System                                          17:43 Monday, May 21, 2018

183                 exposure,
184                 . < ENR_START_DATE <= asCohortDate as indASOnOrAfterEnr,
185                 . < ENR_START_DATE < indexDate as indIndexAfterEnr,
186                 . < asCohortDate <= indexDate as indIndexOnOrAfterAS,
187                 count(distinct patid) format = comma12.0 as countDistinctPatid,
188                 count(distinct indexID) format = comma12.0 as countDistinctID,
189                 count(*) format = comma12.0 as countRows,
190                 min(asCohortDate - ENR_START_DATE) as minDaysFromEnrToAS,
191                 max(asCohortDate - ENR_START_DATE) as maxDaysFromEnrToAS,
192                 min(indexDate - ENR_START_DATE) as minDaysFromEnrToIndex,
193                 max(indexDate - ENR_START_DATE) as maxDaysFromEnrToIndex,
194                 min(indexDate - asCohortDate) as minDaysFromASToIndex,
195                 max(indexDate - asCohortDate) as maxDaysFromASToIndex
196            from DT.indexLookup
197            group by database, exposure, calculated indASOnOrAfterEnr, calculated indIndexAfterEnr, calculated indIndexOnOrAfterAS;
                                                                  --- AS project ---                                    17:43 Monday, May 21, 2018   2

                                                    ind                                                                                     minDays
                            indASOn       ind   IndexOn         count                               minDays   maxDays   minDays   maxDays      From
                            OrAfter     Index   OrAfter      Distinct         count                 FromEnr   FromEnr   FromEnr   FromEnr      ASTo
  database    exposure          Enr  AfterEnr        AS         Patid    DistinctID     countRows      ToAS      ToAS   ToIndex   ToIndex     Index
   maxDays
      From
      ASTo
     Index
  -------------------------------------------------------------------------------------------------------------------------------------------------
  MPCD        DMARD               1         1         1           145           165           165       183      1340       184      1433         0
      1222

  MPCD        NSAID               0         1         1             2             2             2      -385      -303       437       582       822
       885

  MPCD        NSAID               1         1         1           263           353           353       183      1284       185      1442         0
      1189

  MPCD        No exposure         1         1         1           512           512           512       183      1442       183      1442         0
         0

  MPCD        TNF                 0         1         1             3             4             4      -845      -273       218       917       627
      1190

  MPCD        TNF                 1         1         1           573           666           666       183      1436       185      1460         0
      1190

  Marketscan  DMARD               0         1         1             8             8             8     -1274      -157       185       898       342
      1587

  Marketscan  DMARD               1         1         1           702           769           769       183      1778       186      1824         0
      1588

  Marketscan  NSAID               0         1         1            28            30            30     -1278      -188       185       841       657
      1616

  Marketscan  NSAID               1         1         1         1,272         1,703         1,703       183      1789       183      1825         0
      1640

  Marketscan  No exposure         1         1         1         1,699         1,699         1,699       183      1823       183      1823         0
         0

  Marketscan  TNF                 0         1         1            12            12            12     -1278      -401       197       443       652
      1521

  Marketscan  TNF                 1         1         1         2,856         3,441         3,441       183      1813       183      1825         0
      1634

  Medicare    DMARD               0         1         1            25            28            28     -2099       -59       185      2204       245
      2745

  Medicare    DMARD               1         1         1         1,410         1,660         1,660       183      3256       183      3281         0
      3088

  Medicare    NSAID               0         1         1            93           130           130     -2739      -115       188      2332       586
      3035

  Medicare    NSAID               1         1         1         2,688         4,017         4,017       183      3004       183      3284         0
      3071

  Medicare    No exposure         1         1         1         2,489         2,489         2,489       183      3256       183      3256         0
         0

  Medicare    TNF                 0         1         1            65            69            69     -2422      -214       187      2463       473
      2994

  Medicare    TNF                 1         1         1         2,611         3,199         3,199       183      3230       183      3278         0
      3080
 
 
 
                                                                 buildIndexLookup.sas
198        quit;
NOTE: The PROCEDURE SQL printed page 2.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.18 seconds
      cpu time            0.20 seconds
      

199        proc sql;
200          select * from DT.indexLookup where database = "MPCD" & (. < ENR_START_DATE <= asCohortDate) = 0;
                                                                  --- AS project ---                                    17:43 Monday, May 21, 2018   3

                                                                                                                                         Date of
                                                                                                                                             the
                                                                                                                                       Beginning
                                                                                                                                              of
                                                                                                                                      Continuous
                                                                                                          Administrative              Enrollment
     database    exposure     patid                 indexGNN                         indexDate       age  Sex                 asDate      Period
        Date of
     the End of
            the
     Continuous                   Patient
     Enrollment                   Date of
         Period  asCohortDate       Death   indexID
     -------------------------------------------------------------------------------------------------------------------------------------------
     MPCD        NSAID        104059133             INDOMETHACIN                    11/12/2009        35  F               08/13/2007  09/01/2008
     12/31/2010    08/13/2007                   337

     MPCD        NSAID        104073686             DICLOFENAC                      12/04/2009        50  F               06/07/2007  05/01/2008
     12/31/2009    07/03/2007  09/01/2010       341

     MPCD        TNF          103717376             ETANERCEPT                      10/05/2010        50  M               11/07/2007  03/01/2010
     12/31/2010    11/07/2007                  1141

     MPCD        TNF          104148799             CERTOLIZUMAB                    10/05/2010        35  F               02/12/2007  04/01/2008
     12/31/2010    07/03/2007                  1382

     MPCD        TNF          104148799             ETANERCEPT                      01/04/2010        35  F               02/12/2007  04/01/2008
     12/31/2010    07/03/2007                  1383

     MPCD        TNF          104409087             ADALIMUMAB                      08/06/2010        35  M               11/17/2008  12/01/2009
     12/31/2010    11/17/2008                  1520
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
201        quit;
NOTE: The PROCEDURE SQL printed page 3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

202        
203        
204        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           17.25 seconds
      cpu time            1.59 seconds
      
