1                                          The SAS System              18:37 Thursday, June 21, 2018

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           0.48 seconds
      cpu time            0.39 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=buildIndexLookup; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref UCB64 was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB64\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
143        footnote "&pgm.";
144        * footnote2 "%sysfunc(datetime(),datetime14.)";
145        title1 '--- AS project ---';
146        **********************************************************************;
147        options macrogen mlogic mprint symbolgen;
148        options nomacrogen nomlogic nomprint nosymbolgen;
2                                                                   The SAS System                                       18:37 Thursday, June 21, 2018

149        
150        
151        ods html
152          body = "output\&cmt..html"
153          style = Statistical;
NOTE: Writing HTML Body file: output\buildIndexLookup.html
154        
155        
156        %let var = patid, indexGNN, indexDate, age, sex, asDate, enr_start_date, enr_end_date, asCohortDate, death_date;
157        proc sql;
158          create table DT.indexLookup AS
159            select "Marketscan" as database, "TNF"   as exposure, &var from DT.ASTNFCohortStdUCB_ex1     union corr
160            select "Marketscan" as database, "DMARD" as exposure, &var from DT.ASDMARDCohortStdUCB_ex2   union corr
161            select "Marketscan" as database, "NSAID" as exposure, &var from DT.ASNSAIDCohortStdUCB_ex2   union corr
162            select "Marketscan" as database, "No exposure" as exposure, &var from DT.ASNoExpCohortStdUCB_ex2   union corr
163            select "MPCD"       as database, "TNF"   as exposure, &var from DT.ASTNFCohortStdMPCD_ex1    union corr
164            select "MPCD"       as database, "DMARD" as exposure, &var from DT.ASDMARDCohortStdMPCD_ex2  union corr
165            select "MPCD"       as database, "NSAID" as exposure, &var from DT.ASNSAIDCohortStdMPCD_ex2  union corr
166            select "MPCD"       as database, "No exposure" as exposure, &var from DT.ASNoExpCohortStdMPCD_ex2  union corr
167            select "Medicare"   as database, "TNF"   as exposure, &var from DT.ASTNFCohortStd_SABR_ex1   union corr
168            select "Medicare"   as database, "DMARD" as exposure, &var from DT.ASDMARDCohortStd_SABR_ex2 union corr
169            select "Medicare"   as database, "NSAID" as exposure, &var from DT.ASNSAIDCohortStd_SABR_ex2 union corr
170            select "Medicare"   as database, "No exposure" as exposure, &var from DT.ASNoExpCohortStd_SABR_ex2 ;
NOTE: Table DT.INDEXLOOKUP created, with 32487 rows and 12 columns.

171          alter table DT.indexLookup add indexID numeric;
NOTE: Table DT.INDEXLOOKUP has been modified, with 13 columns.
172          update DT.indexLookup
173            set indexID = monotonic();
NOTE: 32487 rows were updated in DT.INDEXLOOKUP.

174        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.68 seconds
      cpu time            0.45 seconds
      

175        
176        proc sort data = DT.indexLookup nodupkey;
177          by database exposure patid indexGNN indexDate;
178        run;

NOTE: There were 32487 observations read from the data set DT.INDEXLOOKUP.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set DT.INDEXLOOKUP has 32487 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

179        
180        proc sql;
181          select database,
182                 exposure,
183                 count(distinct patid) as countDistinctPatid,
184                 count(distinct indexID) as countDistinctIndexes,
185                 count(*) as countRows
186            from DT.indexLookup
187            group by database, exposure;
                                                                  --- AS project ---                                 18:37 Thursday, June 21, 2018   1

                                                                            count         count
                                                                         Distinct      Distinct
                                            database    exposure            Patid       Indexes  countRows
                                            --------------------------------------------------------------
                                            MPCD        DMARD                 381           445        445
                                            MPCD        NSAID                 587           799        799
                                            MPCD        No exposure          1160          1160       1160
                                            MPCD        TNF                   856           994        994
                                            Marketscan  DMARD                1550          1760       1760
                                            Marketscan  NSAID                2700          3710       3710
                                            Marketscan  No exposure          3368          3368       3368
                                            Marketscan  TNF                  3936          4768       4768
                                            Medicare    DMARD                1599          1939       1939
                                            Medicare    NSAID                4448          7034       7034
                                            Medicare    No exposure          5221          5221       5221
                                            Medicare    TNF                  1112          1289       1289
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
188        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.12 seconds
      cpu time            0.07 seconds
      

189        /*
190        Check sequence of dates
191        
192        * In a small number of instances, AS cohort date is BEFORE enrollment start date
193        * Index date is always at least 183 days BEFORE enrollment start
194        * Index date is always at least 0 days BEFORE AS cohort date
3                                                                   The SAS System                                       18:37 Thursday, June 21, 2018

195         */
196        proc sql;
197          select database,
198                 exposure,
199                 . < ENR_START_DATE <= asCohortDate as indASOnOrAfterEnr,
200                 . < ENR_START_DATE < indexDate as indIndexAfterEnr,
201                 . < asCohortDate <= indexDate as indIndexOnOrAfterAS,
202                 count(distinct patid) format = comma12.0 as countDistinctPatid,
203                 count(distinct indexID) format = comma12.0 as countDistinctID,
204                 count(*) format = comma12.0 as countRows,
205                 min(asCohortDate - ENR_START_DATE) as minDaysFromEnrToAS,
206                 max(asCohortDate - ENR_START_DATE) as maxDaysFromEnrToAS,
207                 min(indexDate - ENR_START_DATE) as minDaysFromEnrToIndex,
208                 max(indexDate - ENR_START_DATE) as maxDaysFromEnrToIndex,
209                 min(indexDate - asCohortDate) as minDaysFromASToIndex,
210                 max(indexDate - asCohortDate) as maxDaysFromASToIndex
211            from DT.indexLookup
212            group by database, exposure, calculated indASOnOrAfterEnr, calculated indIndexAfterEnr, calculated indIndexOnOrAfterAS;
                                                                  --- AS project ---                                 18:37 Thursday, June 21, 2018   2

                                                    ind                                                                                     minDays
                            indASOn       ind   IndexOn         count                               minDays   maxDays   minDays   maxDays      From
                            OrAfter     Index   OrAfter      Distinct         count                 FromEnr   FromEnr   FromEnr   FromEnr      ASTo
  database    exposure          Enr  AfterEnr        AS         Patid    DistinctID     countRows      ToAS      ToAS   ToIndex   ToIndex     Index
   maxDays
      From
      ASTo
     Index
  -------------------------------------------------------------------------------------------------------------------------------------------------
  MPCD        DMARD               0         1         1             3             3             3      -760      -231       212       598       804
      1013

  MPCD        DMARD               1         1         1           379           442           442       183      1442       184      1449         0
      1222

  MPCD        NSAID               0         1         1             3             3             3      -415      -303       437       582       822
       939

  MPCD        NSAID               1         1         1           584           796           796       183      1402       183      1445         0
      1262

  MPCD        No exposure         1         1         1         1,160         1,160         1,160       183      1446       183      1446         0
         0

  MPCD        TNF                 0         1         1             4             6             6      -845      -273       218       917       627
      1190

  MPCD        TNF                 1         1         1           853           988           988       183      1436       185      1460         0
      1248

  Marketscan  DMARD               0         1         1            10            10            10     -1274      -157       185       898       342
      1587

  Marketscan  DMARD               1         1         1         1,540         1,750         1,750       183      1811       185      1825         0
      1613

  Marketscan  NSAID               0         1         1            54            60            60     -1278      -188       185      1004       621
      1616

  Marketscan  NSAID               1         1         1         2,659         3,650         3,650       183      1825       183      1825         0
      1642

  Marketscan  No exposure         1         1         1         3,368         3,368         3,368       183      1823       183      1823         0
         0

  Marketscan  TNF                 0         1         1            23            24            24     -1278      -106       194       443       445
      1591

  Marketscan  TNF                 1         1         1         3,920         4,744         4,744       183      1813       183      1825         0
      1634

  Medicare    DMARD               0         1         1            35            42            42     -2008       -73       185      2209       445
      2783

  Medicare    DMARD               1         1         1         1,568         1,897         1,897       183      3142       183      3281         0
      2977

  Medicare    NSAID               0         1         1           134           177           177     -2829       -73       185      2226       275
      3043

  Medicare    NSAID               1         1         1         4,352         6,857         6,857       183      3142       183      3284         0
      3074

  Medicare    No exposure         1         1         1         5,221         5,221         5,221       183      3284       183      3284         0
         0

  Medicare    TNF                 0         1         1            25            26            26     -2711      -143       190      2463       580
      2994
 
 
 
                                                                 buildIndexLookup.sas
                                                                  --- AS project ---                                 18:37 Thursday, June 21, 2018   3

                                                    ind                                                                                     minDays
                            indASOn       ind   IndexOn         count                               minDays   maxDays   minDays   maxDays      From
                            OrAfter     Index   OrAfter      Distinct         count                 FromEnr   FromEnr   FromEnr   FromEnr      ASTo
  database    exposure          Enr  AfterEnr        AS         Patid    DistinctID     countRows      ToAS      ToAS   ToIndex   ToIndex     Index
   maxDays
      From
      ASTo
     Index
  -------------------------------------------------------------------------------------------------------------------------------------------------
  Medicare    TNF                 1         1         1         1,088         1,263         1,263       183      2951       184      3263         0
      2992
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
213        quit;
NOTE: The PROCEDURE SQL printed pages 2-3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.25 seconds
      cpu time            0.20 seconds
      

214        proc sql;
215          select * from DT.indexLookup where database = "MPCD" & (. < ENR_START_DATE <= asCohortDate) = 0;
                                                                  --- AS project ---                                 18:37 Thursday, June 21, 2018   4

                                                                                                                                         Date of
                                                                                                                                             the
                                                                                                                                       Beginning
                                                                                                                                              of
                                                                                                                                      Continuous
                                                                                                          Administrative              Enrollment
     database    exposure     patid                 indexGNN                         indexDate       age  Sex                 asDate      Period
        Date of
     the End of
            the
     Continuous                   Patient
     Enrollment                   Date of
         Period  asCohortDate       Death   indexID
     -------------------------------------------------------------------------------------------------------------------------------------------
     MPCD        DMARD        103881780             SULFASALAZINE                   07/28/2010        25  F               05/15/2008  01/01/2009
     07/31/2010    05/15/2008                   129

     MPCD        DMARD        104001393             LEFLUNOMIDE                     03/01/2010        45  F               05/29/2007  08/01/2009
     12/31/2010    07/03/2007                   183

     MPCD        DMARD        104100394             SULFASALAZINE                   11/20/2010        20  F               02/11/2008  04/01/2009
     12/31/2010    02/11/2008                   222

     MPCD        NSAID        104059133             INDOMETHACIN                    11/12/2009        35  F               08/13/2007  09/01/2008
     12/31/2010    08/13/2007                   821

     MPCD        NSAID        104073686             DICLOFENAC                      12/04/2009        50  F               06/07/2007  05/01/2008
     12/31/2009    07/03/2007  09/01/2010       826

     MPCD        NSAID        104100394             NABUMETONE                      09/07/2010        20  F               02/11/2008  04/01/2009
     12/31/2010    02/11/2008                   846

     MPCD        TNF          103717376             ETANERCEPT                      10/05/2010        50  M               11/07/2007  03/01/2010
     12/31/2010    11/07/2007                  2563

     MPCD        TNF          104001393             ADALIMUMAB                      07/06/2010        45  F               05/29/2007  08/01/2009
     12/31/2010    07/03/2007                  2812

     MPCD        TNF          104001393             ETANERCEPT                      04/13/2010        45  F               05/29/2007  08/01/2009
     12/31/2010    07/03/2007                  2813

     MPCD        TNF          104148799             CERTOLIZUMAB                    10/05/2010        35  F               02/12/2007  04/01/2008
     12/31/2010    07/03/2007                  2938

     MPCD        TNF          104148799             ETANERCEPT                      01/04/2010        35  F               02/12/2007  04/01/2008
     12/31/2010    07/03/2007                  2939

     MPCD        TNF          104409087             ADALIMUMAB                      08/06/2010        35  M               11/17/2008  12/01/2009
     12/31/2010    11/17/2008                  3143
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
216        quit;
NOTE: The PROCEDURE SQL printed page 4.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

217        
218        
219        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           2.52 seconds
      cpu time            1.71 seconds
      
