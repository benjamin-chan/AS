1                                                          The SAS System                         11:32 Thursday, September 28, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70058223.
NOTE: This session is executing on the W32_ES08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_ES08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           0.21 seconds
      cpu time            0.10 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=buildIndexLookup; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: h:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
92         footnote "&pgm.";
93         * footnote2 "%sysfunc(datetime(),datetime14.)";
94         title1 '--- AS project ---';
95         **********************************************************************;
96         options macrogen mlogic mprint symbolgen;
97         options nomacrogen nomlogic nomprint nosymbolgen;
98         
99         
100        ods html
101          body = "output\&cmt..html"
102          style = Statistical;
NOTE: Writing HTML Body file: output\buildIndexLookup.html
2                                                                   The SAS System                                  11:32 Thursday, September 28, 2017

103        
104        
105        %let var = patid, indexGNN, indexDate, age, sex, asDate, enr_start_date, enr_end_date, asCohortDate, death_date;
106        proc sql;
107          create table DT.indexLookup AS
108            select "Marketscan" as database, "TNF"   as exposure, &var from UCB.ASTNFCohortStdUCB_ex1     union corr
109            select "Marketscan" as database, "DMARD" as exposure, &var from UCB.ASDMARDCohortStdUCB_ex2   union corr
110            select "Marketscan" as database, "NSAID" as exposure, &var from UCB.ASNSAIDCohortStdUCB_ex2   union corr
111            select "Marketscan" as database, "No exposure" as exposure, &var from UCB.ASNoExpCohortStdUCB_ex2   union corr
112            select "MPCD"       as database, "TNF"   as exposure, &var from UCB.ASTNFCohortStdMPCD_ex1    union corr
113            select "MPCD"       as database, "DMARD" as exposure, &var from UCB.ASDMARDCohortStdMPCD_ex2  union corr
114            select "MPCD"       as database, "NSAID" as exposure, &var from UCB.ASNSAIDCohortStdMPCD_ex2  union corr
115            select "MPCD"       as database, "No exposure" as exposure, &var from UCB.ASNoExpCohortStdMPCD_ex2  union corr
116            select "Medicare"   as database, "TNF"   as exposure, &var from UCB.ASTNFCohortStd_SABR_ex1   union corr
117            select "Medicare"   as database, "DMARD" as exposure, &var from UCB.ASDMARDCohortStd_SABR_ex2 union corr
118            select "Medicare"   as database, "NSAID" as exposure, &var from UCB.ASNSAIDCohortStd_SABR_ex2 union corr
119            select "Medicare"   as database, "No exposure" as exposure, &var from UCB.ASNoExpCohortStd_SABR_ex2 ;
NOTE: Table DT.INDEXLOOKUP created, with 63511 rows and 12 columns.

120          alter table DT.indexLookup add indexID numeric;
NOTE: Table DT.INDEXLOOKUP has been modified, with 13 columns.
121          update DT.indexLookup
122            set indexID = monotonic();
NOTE: 63511 rows were updated in DT.INDEXLOOKUP.

123        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.43 seconds
      cpu time            0.79 seconds
      

124        
125        proc sort data = DT.indexLookup nodupkey;
126          by database exposure patid indexGNN indexDate;
127        run;

NOTE: There were 63511 observations read from the data set DT.INDEXLOOKUP.
NOTE: 3501 observations with duplicate key values were deleted.
NOTE: The data set DT.INDEXLOOKUP has 60010 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.12 seconds
      cpu time            0.10 seconds
      

128        
129        proc sql;
130          select database,
131                 exposure,
132                 count(distinct patid) as countDistinctPatid,
133                 count(distinct indexID) as countDistinctIndexes,
134                 count(*) as countRows
135            from DT.indexLookup
136            group by database, exposure;
                                                                  --- AS project ---                            11:32 Thursday, September 28, 2017   1

                                                                            count         count
                                                                         Distinct      Distinct
                                            database    exposure            Patid       Indexes  countRows
                                            --------------------------------------------------------------
                                            MPCD        DMARD                 421           481        481
                                            MPCD        NSAID                 763          1000       1000
                                            MPCD        No exposure          1593          1593       1593
                                            MPCD        TNF                  1107          1279       1279
                                            Marketscan  DMARD                1799          2045       2045
                                            Marketscan  NSAID                3644          4893       4893
                                            Marketscan  No exposure          5696          5696       5696
                                            Marketscan  TNF                  4797          5779       5779
                                            Medicare    DMARD                4231          5193       5193
                                            Medicare    NSAID                8602         12847      12847
                                            Medicare    No exposure         13275         13275      13275
                                            Medicare    TNF                  4866          5929       5929
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
137        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.18 seconds
      cpu time            0.15 seconds
      

138        /*
139        Check sequence of dates
140        
141        * In a small number of instances, AS cohort date is BEFORE enrollment start date
142        * Index date is always at least 183 days BEFORE enrollment start
143        * Index date is always at least 0 days BEFORE AS cohort date
144         */
145        proc sql;
146          select database,
147                 exposure,
148                 . < ENR_START_DATE <= asCohortDate as indASOnOrAfterEnr,
149                 . < ENR_START_DATE < indexDate as indIndexAfterEnr,
3                                                                   The SAS System                                  11:32 Thursday, September 28, 2017

150                 . < asCohortDate <= indexDate as indIndexOnOrAfterAS,
151                 count(distinct patid) format = comma12.0 as countDistinctPatid,
152                 count(distinct indexID) format = comma12.0 as countDistinctID,
153                 count(*) format = comma12.0 as countRows,
154                 min(asCohortDate - ENR_START_DATE) as minDaysFromEnrToAS,
155                 max(asCohortDate - ENR_START_DATE) as maxDaysFromEnrToAS,
156                 min(indexDate - ENR_START_DATE) as minDaysFromEnrToIndex,
157                 max(indexDate - ENR_START_DATE) as maxDaysFromEnrToIndex,
158                 min(indexDate - asCohortDate) as minDaysFromASToIndex,
159                 max(indexDate - asCohortDate) as maxDaysFromASToIndex
160            from DT.indexLookup
161            group by database, exposure, calculated indASOnOrAfterEnr, calculated indIndexAfterEnr, calculated indIndexOnOrAfterAS;
                                                                  --- AS project ---                            11:32 Thursday, September 28, 2017   2

                                                    ind                                                                                     minDays
                            indASOn       ind   IndexOn         count                               minDays   maxDays   minDays   maxDays      From
                            OrAfter     Index   OrAfter      Distinct         count                 FromEnr   FromEnr   FromEnr   FromEnr      ASTo
  database    exposure          Enr  AfterEnr        AS         Patid    DistinctID     countRows      ToAS      ToAS   ToIndex   ToIndex     Index
   maxDays
      From
      ASTo
     Index
  -------------------------------------------------------------------------------------------------------------------------------------------------
  MPCD        DMARD               1         1         1           421           481           481       183      1449       184      1450         0
      1230

  MPCD        NSAID               1         1         1           763         1,000         1,000       183      1456       183      1456         0
      1268

  MPCD        No exposure         1         1         1         1,593         1,593         1,593       183      1457       183      1457         0
         0

  MPCD        TNF                 0         1         1             7             8             8      -972      -177       218       917       568
      1235

  MPCD        TNF                 1         1         1         1,101         1,271         1,271       183      1417       183      1460         0
      1201

  Marketscan  DMARD               1         1         1         1,799         2,045         2,045       183      1811       183      1825         0
      1627

  Marketscan  NSAID               1         1         1         3,644         4,893         4,893       183      1823       183      1825         0
      1642

  Marketscan  No exposure         1         1         1         5,696         5,696         5,696       183      1825       183      1825         0
         0

  Marketscan  TNF                 0         1         1            30            31            31     -1278       -90       197       920       359
      1616

  Marketscan  TNF                 1         1         1         4,776         5,748         5,748       183      1810       183      1825         0
      1634

  Medicare    DMARD               1         1         1         4,231         5,193         5,193       183      3215       183      3281         0
      3088

  Medicare    NSAID               1         1         1         8,602        12,847        12,847       183      3257       183      3284         0
      3088

  Medicare    No exposure         1         1         1        13,275        13,275        13,275       183      3278       183      3278         0
         0

  Medicare    TNF                 0         1         1           140           162           162     -2638       -32       184      2463       287
      3101

  Medicare    TNF                 1         1         1         4,754         5,767         5,767       183      3158       183      3278         0
      3080
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
162        quit;
NOTE: The PROCEDURE SQL printed page 2.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.28 seconds
      cpu time            0.29 seconds
      

163        /*
164        database exposure indASOnOrAfterEnr indIndexAfterEnr indIndexOnOrAfterAS countDistinctPatid countDistinctID countRows minDaysFromEnrToAS
164      ! maxDaysFromEnrToAS minDaysFromEnrToIndex maxDaysFromEnrToIndex minDaysFromASToIndex maxDaysFromASToIndex
165        MPCD DMARD 1 1 1 421 481 481 183 1449 184 1450 0 1230
166        MPCD NSAID or no exposure 1 1 1 2,083 2,593 2,593 183 1457 183 1457 0 1268
167        MPCD TNF 0 1 1 7 8 8 -972 -177 218 917 568 1235
168        MPCD TNF 1 1 1 1,101 1,271 1,271 183 1417 183 1460 0 1201
169        Marketscan DMARD 1 1 1 1,799 2,045 2,045 183 1811 183 1825 0 1627
170        Marketscan NSAID or no exposure 1 1 1 8,025 10,589 10,589 183 1825 183 1825 0 1642
171        Marketscan TNF 0 1 1 30 31 31 -1278 -90 197 920 359 1616
172        Marketscan TNF 1 1 1 4,776 5,748 5,748 183 1810 183 1825 0 1634
173        Medicare DMARD 1 1 1 4,231 5,193 5,193 183 3215 183 3281 0 3088
174        Medicare NSAID or no exposure 1 1 1 17,983 26,122 26,122 183 3278 183 3284 0 3088
175        Medicare TNF 0 1 1 140 162 162 -2638 -32 184 2463 287 3101
176        Medicare TNF 1 1 1 4,754 5,767 5,767 183 3158 183 3278 0 3080
177         */
178        proc sql;
179          select * from DT.indexLookup where database = "MPCD" & (. < ENR_START_DATE <= asCohortDate) = 0;
                                                                  --- AS project ---                            11:32 Thursday, September 28, 2017   3

                                                                                                                                         Date of
                                                                                                                                             the
                                                                                                                                       Beginning
                                                                                                                                              of
                              Unique Patient                                                                                          Continuous
                              Identification                                                              Administrative              Enrollment
     database    exposure     Number                indexGNN                         indexDate       age  Sex                 ASdate      Period
        Date of
     the End of
            the
     Continuous                   Patient
     Enrollment                   Date of
         Period  AScohortDate       Death   indexID
     -------------------------------------------------------------------------------------------------------------------------------------------
     MPCD        TNF          103662591             GOLIMUMAB                       01/27/2010        50  F               07/08/2008  01/01/2009
     12/31/2010    07/08/2008                  4832

     MPCD        TNF          103699149             ETANERCEPT                      11/17/2010        45  F               05/02/2008  05/01/2009
     12/31/2010    05/02/2008                  4930

     MPCD        TNF          103717376             ETANERCEPT                      10/05/2010        50  M               04/25/2007  03/01/2010
     12/31/2010    07/03/2007                  4966

     MPCD        TNF          103937492             ETANERCEPT                      12/28/2010        50  M               08/19/2008  01/01/2010
     12/31/2010    08/19/2008                  5484

     MPCD        TNF          104017292             INFLIXIMAB                      11/19/2010        45  F               02/20/2007  03/01/2009
     12/31/2010    07/03/2007                  5660

     MPCD        TNF          104148799             CERTOLIZUMAB                    10/05/2010        35  F               01/26/2007  04/01/2008
     12/31/2010    07/03/2007                  5950

     MPCD        TNF          104148799             ETANERCEPT                      01/04/2010        35  F               01/26/2007  04/01/2008
     12/31/2010    07/03/2007                  5954

     MPCD        TNF          104409087             ADALIMUMAB                      08/06/2010        35  M               12/05/2007  12/01/2009
     12/31/2010    12/05/2007                  6510
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                 buildIndexLookup.sas
180        quit;
NOTE: The PROCEDURE SQL printed page 3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

181        
182        
183        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           2.58 seconds
      cpu time            1.76 seconds
      
