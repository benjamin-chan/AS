1                                                          The SAS System                           03:49 Friday, September 29, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70058223.
NOTE: This session is executing on the W32_ES08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_ES08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           4.82 seconds
      cpu time            0.10 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=buildServiceCodeDatasetsControl; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: h:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
92         footnote "&pgm.";
93         * footnote2 "%sysfunc(datetime(),datetime14.)";
94         title1 '--- AS project ---';
95         **********************************************************************;
96         options macrogen mlogic mprint symbolgen;
97         options nomacrogen nomlogic nomprint nosymbolgen;
98         
99         
100        ods html
101          body = "output\&cmt..html"
102          style = Statistical;
NOTE: Writing HTML Body file: output\buildServiceCodeDatasetsControl.html
2                                                                   The SAS System                                    03:49 Friday, September 29, 2017

103        
104        
105        /*
106        From: Chen, Lang [mailto:langchen@uabmc.edu]
107        Sent: Monday, September 11, 2017 1:59 PM
108        To: Benjamin Chan <chanb@ohsu.edu>; Curtis, Jeffrey R <jrcurtis@uabmc.edu>; Kevin Winthrop <winthrop@ohsu.edu>
109        Cc: Atul Deodhar <deodhara@ohsu.edu>; Sarah Siegel <siegels@ohsu.edu>; Yang, Shuo <shuoyang@uabmc.edu>; Xie, Fenglong
109      ! <fenglongxie@uabmc.edu>
110        Subject: RE: quick summary of AS call
111        
112        physician-diagnosed codes is usually define by IP AV ED NH and HH. We usually
113        do not use provider type field. Provider type is provider specialty and MPCD
114        and CMS use different coding system.
115         */
116        
117        
118        /*
119        Service code data sets for prevalence (non-fracture outcomes)
120         */
121        %let type = Prev;
122        %let select1 = select A.*, B.enc_type, B.admit_date, B.begin_date, B.discharge_date, B.end_date, B.dx_type, B.dx, B.pdx, "ICD9-DX" as
122      ! codeType, B.dx as code;
123        %let on1 = on (A.patid = B.patid);
124        %let select2 = select A.patid, A.enc_type, A.admit_date, A.begin_date, A.discharge_date, A.end_date, A.dx_type, A.dx, A.pdx;
125        %let where2 = where A.dx_type = "09" & A.enc_type in ("IP", "AV", "ED", "NH", "HH");
126        %let selectfrom3 = select * from DT.controlLookup;
127        
128        %include "lib\buildDxControl.sas";  /* Call script to query ICD-9 diagnosis codes */
NOTE: Table UCB.TEMPLOOKUPMPCDCONTROL created, with 1139225 rows and 9 columns.

NOTE: Table UCB.TEMP0710 created, with 176326981 rows and 9 columns.

NOTE: Table UCB.TEMPPREVDXMPCDCONTROL created, with 94506830 rows and 19 columns.

NOTE: Table UCB.TEMP0710 has been dropped.
NOTE: Table UCB.TEMPLOOKUPMEDICARECONTROL created, with 1844703 rows and 9 columns.

NOTE: Table UCB.TEMP06 created, with 70079498 rows and 9 columns.

NOTE: Table UCB.TEMP07 created, with 71395751 rows and 9 columns.

NOTE: Table UCB.TEMP08 created, with 72901254 rows and 9 columns.

NOTE: Table UCB.TEMP09 created, with 75322391 rows and 9 columns.

NOTE: Table UCB.TEMP10 created, with 82724178 rows and 9 columns.

NOTE: Table UCB.TEMP11 created, with 105073869 rows and 9 columns.

NOTE: Table UCB.TEMP12 created, with 106954237 rows and 9 columns.

NOTE: Table UCB.TEMP13 created, with 111463089 rows and 9 columns.

NOTE: Table UCB.TEMP14 created, with 107440003 rows and 9 columns.

NOTE: Table UCB.TEMPPREVDXSABRCONTROL created, with 450706588 rows and 19 columns.

NOTE: Table UCB.TEMP06 has been dropped.
NOTE: Table UCB.TEMP07 has been dropped.
NOTE: Table UCB.TEMP08 has been dropped.
NOTE: Table UCB.TEMP09 has been dropped.
NOTE: Table UCB.TEMP10 has been dropped.
NOTE: Table UCB.TEMP11 has been dropped.
NOTE: Table UCB.TEMP12 has been dropped.
NOTE: Table UCB.TEMP13 has been dropped.
NOTE: Table UCB.TEMP14 has been dropped.
NOTE: Table UCB.TEMPPREVDXALLCONTROL created, with 528984975 rows and 19 columns.

ERROR: File UCB.TEMPPREVRXALLCONTROL.DATA does not exist.
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
NOTE: Statement not executed due to NOEXEC option.
NOTE: Statement not executed due to NOEXEC option.
3                                                                   The SAS System                                    03:49 Friday, September 29, 2017

NOTE: The SAS System stopped processing this step because of errors.
NOTE: SAS set option OBS=0 and will continue to check statements. This might cause NOTE: No observations in data set.
NOTE: PROCEDURE SQL used (Total process time):
      real time           3:02:23.47
      cpu time            2:43:44.02
      
175        
176        %let select1 = select A.*,
177                              B.admit_date, B.begin_date, B.discharge_date, B.end_date, B.px_date, B.px_type, B.px,
178                              case
179                                when B.px_type = "09" then "ICD9-PX"
180                                when B.px_type = "C1" | ^anyalpha(strip(B.px)) then "CPT"
181                                when B.px_type = "H1" & anyalpha(substr(strip(B.px), 1, 1)) & ^anyalpha(strip(B.px), 2) then "HCPCS"
182                                else ""
183                                end as codeType,
184                              B.px as code;
185        %let select2 = select patid, admit_date, begin_date, discharge_date, end_date, px_date, px_type, px;
186        
187        %include "lib\buildPxControl.sas";  /* Call script to query procedure codes */


NOTE: Table UCB.TEMP0710 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMPPREVPXMPCDCONTROL created, with 0 rows and 18 columns.

NOTE: Table UCB.TEMP0710 has been dropped.
NOTE: Table UCB.TEMP06 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP07 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP08 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP09 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP10 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP11 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP12 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP13 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMP14 created, with 0 rows and 8 columns.

NOTE: Table UCB.TEMPPREVPXSABRCONTROL created, with 0 rows and 18 columns.

NOTE: Table UCB.TEMP06 has been dropped.
NOTE: Table UCB.TEMP07 has been dropped.
NOTE: Table UCB.TEMP08 has been dropped.
NOTE: Table UCB.TEMP09 has been dropped.
NOTE: Table UCB.TEMP10 has been dropped.
NOTE: Table UCB.TEMP11 has been dropped.
NOTE: Table UCB.TEMP12 has been dropped.
NOTE: Table UCB.TEMP13 has been dropped.
NOTE: Table UCB.TEMP14 has been dropped.
WARNING: Data set UCB.TEMPPREVPXALLCONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPPREVPXALLCONTROL was not replaced because of NOREPLACE option.

NOTE: No rows were selected.
NOTE: Table UCB.TEMPPREVPXMPCDCONTROL has been dropped.
NOTE: Table UCB.TEMPPREVPXSABRCONTROL has been dropped.
NOTE: PROCEDURE SQL used (Total process time):
      real time           39.02 seconds
      cpu time            0.60 seconds
      

232        
233        
234        /*
235        Service code data sets for fracture outcomes
236        Fracture service code data sets are used for both prevalence and incidence;
237        unlike non-fracture service code data sets
4                                                                   The SAS System                                    03:49 Friday, September 29, 2017

238         */
239        %let type = Frac;
240        %let select1 = select A.*,
241                              B.encounterID, B.enc_type, B.admit_date, B.begin_date, B.discharge_date, B.end_date, B.dx_type, B.dx, B.pdx,
241      ! "ICD9-DX" as codeType, B.dx as code,
242                              B.diagCodeType;
243        %let on1 = on (A.patid = B.patid);
244        %let select2 = select A.patid, A.encounterID, A.enc_type, A.admit_date, A.begin_date, A.discharge_date, A.end_date, A.dx_type, A.dx, A.pdx,
245                              case
246                                when '800' <= substr(A.dx, 1, 3) <= '829' or substr(A.dx, 1, 4) = '7331' then "Fracture code"
247                                when substr(A.dx, 1, 4) in ('V541' 'V542') then "Extended care code"
248                                when 'E800' <= substr(A.dx, 1, 4) <= 'E848' or
249                                     'E881' <= substr(A.dx, 1, 4) <= 'E884' or
250                                     'E908' <= substr(A.dx, 1, 4) <= 'E909' or
251                                     'E916' <= substr(A.dx, 1, 4) <= 'E928'
252                                  then "Trauma code"
253                                else ""
254                                end as diagCodeType;
255        %let where2 = where A.dx_type = "09" & A.enc_type in ("IP", "AV", "ED", "NH", "HH") & ^missing(calculated diagCodeType);
256        %let selectfrom3 = select * from DT.controlLookup;
257        
258        %include "lib\buildDxControl.sas";  /* Call script to query ICD-9 diagnosis codes */
WARNING: Data set UCB.TEMPLOOKUPMPCDCONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPLOOKUPMPCDCONTROL was not replaced because of NOREPLACE option.

NOTE: Table UCB.TEMP0710 created, with 0 rows and 11 columns.

WARNING: Data set UCB.TEMPFRACDXMPCDCONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPFRACDXMPCDCONTROL was not replaced because of NOREPLACE option.

NOTE: Table UCB.TEMP0710 has been dropped.
WARNING: Data set UCB.TEMPLOOKUPMEDICARECONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPLOOKUPMEDICARECONTROL was not replaced because of NOREPLACE option.

NOTE: Table UCB.TEMP06 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP07 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP08 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP09 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP10 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP11 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP12 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP13 created, with 0 rows and 11 columns.

NOTE: Table UCB.TEMP14 created, with 0 rows and 11 columns.

WARNING: Data set UCB.TEMPFRACDXSABRCONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPFRACDXSABRCONTROL was not replaced because of NOREPLACE option.

NOTE: Table UCB.TEMP06 has been dropped.
NOTE: Table UCB.TEMP07 has been dropped.
NOTE: Table UCB.TEMP08 has been dropped.
NOTE: Table UCB.TEMP09 has been dropped.
NOTE: Table UCB.TEMP10 has been dropped.
NOTE: Table UCB.TEMP11 has been dropped.
NOTE: Table UCB.TEMP12 has been dropped.
NOTE: Table UCB.TEMP13 has been dropped.
NOTE: Table UCB.TEMP14 has been dropped.
WARNING: Data set UCB.TEMPFRACDXALLCONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPFRACDXALLCONTROL was not replaced because of NOREPLACE option.

ERROR: File UCB.TEMPFRACRXALLCONTROL.DATA does not exist.
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
NOTE: Statement not executed due to NOEXEC option.
NOTE: Statement not executed due to NOEXEC option.
NOTE: The SAS System stopped processing this step because of errors.
5                                                                   The SAS System                                    03:49 Friday, September 29, 2017

NOTE: PROCEDURE SQL used (Total process time):
      real time           54.35 seconds
      cpu time            1.40 seconds
      
305        
306        %let select1 = select A.*,
307                              B.encounterID, B.admit_date, B.begin_date, B.discharge_date, B.end_date, B.px_date, B.px_type, B.px,
308                              case
309                                when B.px_type = "09" then "ICD9-PX"
310                                when B.px_type = "C1" | ^anyalpha(strip(B.px)) then "CPT"
311                                when B.px_type = "H1" & anyalpha(substr(strip(B.px), 1, 1)) & ^anyalpha(strip(B.px), 2) then "HCPCS"
312                                else ""
313                                end as codeType,
314                              B.px as code;
315        %let select2 = select patid, encounterID, admit_date, begin_date, discharge_date, end_date, px_date, px_type, px;
316        
317        %include "lib\buildPxControl.sas";  /* Call script to query procedure codes */


NOTE: Table UCB.TEMP0710 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMPFRACPXMPCDCONTROL created, with 0 rows and 19 columns.

NOTE: Table UCB.TEMP0710 has been dropped.
NOTE: Table UCB.TEMP06 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP07 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP08 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP09 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP10 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP11 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP12 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP13 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMP14 created, with 0 rows and 9 columns.

NOTE: Table UCB.TEMPFRACPXSABRCONTROL created, with 0 rows and 19 columns.

NOTE: Table UCB.TEMP06 has been dropped.
NOTE: Table UCB.TEMP07 has been dropped.
NOTE: Table UCB.TEMP08 has been dropped.
NOTE: Table UCB.TEMP09 has been dropped.
NOTE: Table UCB.TEMP10 has been dropped.
NOTE: Table UCB.TEMP11 has been dropped.
NOTE: Table UCB.TEMP12 has been dropped.
NOTE: Table UCB.TEMP13 has been dropped.
NOTE: Table UCB.TEMP14 has been dropped.
WARNING: Data set UCB.TEMPFRACPXALLCONTROL was not replaced because of NOREPLACE option.
WARNING: Data set UCB.TEMPFRACPXALLCONTROL was not replaced because of NOREPLACE option.

NOTE: No rows were selected.
NOTE: Table UCB.TEMPFRACPXMPCDCONTROL has been dropped.
NOTE: Table UCB.TEMPFRACPXSABRCONTROL has been dropped.
NOTE: PROCEDURE SQL used (Total process time):
      real time           10.50 seconds
      cpu time            0.85 seconds
      

362        
363        
364        
365        
366        ods html close;
ERROR: Errors printed on pages 2,4.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
6                                                                   The SAS System                                    03:49 Friday, September 29, 2017

NOTE: The SAS System used:
      real time           3:04:17.77
      cpu time            2:43:47.26
      
