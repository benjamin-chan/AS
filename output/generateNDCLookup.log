1                                         The SAS System               12:34 Friday, June 22, 2018

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           3.99 seconds
      cpu time            0.31 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  BRONCHIECTASIS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=generateNDCLookup; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref UCB64 was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB64\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
143        footnote "&pgm.";
144        * footnote2 "%sysfunc(datetime(),datetime14.)";
145        title1 '--- BRONCHIECTASIS project ---';
146        **********************************************************************;
147        options macrogen mlogic mprint symbolgen;
148        options nomacrogen nomlogic nomprint nosymbolgen;
2                                                                   The SAS System                                         12:34 Friday, June 22, 2018

149        
150        
151        
152        ods html
153          body = "output\&cmt..html"
154          style = Statistical;
NOTE: Writing HTML Body file: output\generateNDCLookup.html
155        
156        
157        /*
158        From: Yang, Shuo [mailto:shuoyang@uabmc.edu]
159        Sent: Wednesday, August 24, 2016 12:06 PM
160        To: Benjamin Chan <chanb@ohsu.edu>; Chen, Lang <langchen@uabmc.edu>
161        Cc: Emily Henkle <henkle@ohsu.edu>; Matthews, Robert S <rsm@uab.edu>; Curtis, Jeffrey R <jrcurtis@uabmc.edu>
162        Subject: RE: oral steroids for bronchiectasis
163        
164        Hi Ben,
165        
166        I copied 1 SAS datasets to "Q:\pgms\bchan\FDB" folder:
167        
168        * FDB_ETC_NDC_15:
169        
170          * It's the First Data Bank data with 'Enhanced Therapeutic Class'
171            identifiers. And this is the most often used data for searching target
172            generic names and NDCs.
173        
174          * If you have the accurate generic name list, then you can search generic
175            names in 'GNN', 'GNN60' variables, which are generic name and generic name
176            in 60 characters; or search generic/brand names in 'BN', 'LN', 'LN60'
177            variables, which are brand name, label name and label name in 60
178            characters. Then you can get the NDC lists. Or
179        
180          * If you don't have a complete/accurate generic names, you can search one or
181            several generic names which you are sure they should be correct, then get
182            the 'ETC_NAME' and 'ETC_ID' of them, which they stands for 'Enhanced
183            Therapeutic Class Names' and 'Enhanced Therapeutic Class IDs', and then go
184            back to search those 'ETC_ID' in the FDB_ETC_NDC_15 data. This step will
185            give you medicines assigned in the same therapeutic class. Then you can
186            review the generic name list to drop anything you don't need.
187        
188          * Notes:
189        
190            * Key variables you would be interested are: ETC_NAME, ETC_ID, GNN, GNN60,
191              BN, LN, LN60, RT, STR, STR60. And in which,
192        
193              * RT stands for Route
194        
195              * STR stands for Strength; and STR60 stands for Strength info in 60
196                characters (longer format)
197        
198            * In the results of any search, the RT variable should not be 'MISCELL',
199              which stands for 'MISCELLANEOUS' and the medicine in this type are 'Bulk
200              Chemicals' and we don't think they are real medicines prescribed to
201              patients.
202        
203          * An example of SAS codes to search for biologic drugs that I used are
204            pasted below.
205        
206        Feel free to let me know if you have any question.
207        
208        Best,
209        
210        Shawn
211         */
212        libname FDB "Q:\pgms\bchan\FDB" access = readonly;
NOTE: Libref FDB was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\pgms\bchan\FDB
213        proc contents data = FDB.FDB_ETC_NDC_15 order = varnum;
214        run;

                                                            --- BRONCHIECTASIS project ---                             12:34 Friday, June 22, 2018   1

                                                                The CONTENTS Procedure

                                   Data Set Name        FDB.FDB_ETC_NDC_15            Observations           457780
                                   Member Type          DATA                          Variables              26    
                                   Engine               V9                            Indexes                0     
                                   Created              08/24/2016 13:32:53           Observation Length     648   
                                   Last Modified        08/24/2016 13:32:53           Deleted Observations   0     
                                   Protection                                         Compressed             CHAR  
                                   Data Set Type                                      Reuse Space            NO    
                                   Label                                              Point to Observations  YES   
                                   Data Representation  WINDOWS_32                    Sorted                 NO    
                                   Encoding             wlatin1  Western (Windows)                                 


                                                          Engine/Host Dependent Information

                                        Data Set Page Size          1048576                                  
                                        Number of Data Set Pages    120                                      
                                        Number of Data Set Repairs  0                                        
                                        ExtendObsCounter            YES                                      
                                        Filename                    Q:\pgms\bchan\FDB\fdb_etc_ndc_15.sas7bdat
                                        Release Created             9.0401M1                                 
                                        Host Created                W32_ES08R2                               
                                        Owner Name                  BUILTIN\Administrators                   
                                        File Size                   121MB                                    
                                        File Size (bytes)           126877696                                


                                                             Variables in Creation Order
 
                          #    Variable                      Type    Len    Format    Informat    Label

                          1    GCN_SEQNO                     Num       8    7.        7.          GCN_SEQNO                 
                          2    ETC_NAME                      Char     70    $70.      $70.        ETC_NAME                  
                          3    NDC                           Char     11    $11.      $11.        NDC                       
                          4    BN                            Char     30    $30.      $30.        BN                        
                          5    LN                            Char     30    $30.      $30.        LN                        
                          6    LN25                          Char     25    $25.      $25.        LN25                      
                          7    LN60                          Char     60    $60.      $60.        LN60                      
                          8    GNN                           Char     30    $30.      $30.        GNN                       
                          9    GNN60                         Char     60    $60.      $60.        GNN60                     
                         10    Package_Description           Char     10    $10.      $10.        PD                        
                         11    TRADENAME                     Char    125    $125.     $125.       TRADENAME                 
                         12    STR                           Char     10    $10.      $10.        STR                       
                         13    STR60                         Char     60    $60.      $60.        STR60                     
                         14    RT                            Char     10    $10.      $10.        RT                        
                         15    GCRT_DESC                     Char     40    $40.      $40.        GCRT_DESC                 
                         16    ETC_ID                        Num       8    9.        9.          ETC_ID                    
                         17    ETC_HIERARCHY_LEVEL           Num       8    3.        3.          ETC_HIERARCHY_LEVEL       
                         18    ETC_ULTIMATE_PARENT_ETC_ID    Num       8    9.        9.          ETC_ULTIMATE_PARENT_ETC_ID
                         19    ETC_PARENT_ETC_ID             Num       8    9.        9.          ETC_PARENT_ETC_ID         
                         20    ETC_ULTIMATE_CHILD_IND        Char      1    $1.       $1.         ETC_ULTIMATE_CHILD_IND    
                         21    GCN                           Num       8    6.        6.          GCN                       
                         22    GCRT                          Char      1    $1.       $1.         GCRT                      
                         23    HICL_SEQNO                    Num       8    7.        7.          HICL_SEQNO                
                         24    HIC3                          Char      3    $3.       $3.         HIC3                      
                         25    HIC3_SEQN                     Num       8    7.        7.          HIC3_SEQN                 
                         26    TC                            Num       8    3.        3.          TC                        
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
3                                                                   The SAS System                                         12:34 Friday, June 22, 2018

      real time           0.15 seconds
      cpu time            0.07 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 1.

215        
216        
217        /*
218        For oral steroids, integrate UAB's Ndc_oralsteroids data set
219        
220        
221        From: Yang, Shuo [mailto:shuoyang@uabmc.edu]
222        Sent: Monday, September 19, 2016 11:28 AM
223        To: Biostatistics & Design Program <bdp@ohsu.edu>; Benjamin Chan <chanb@ohsu.edu>
224        Cc: Chen, Lang <langchen@uabmc.edu>; Kevin Winthrop <winthrop@ohsu.edu>; Curtis, Jeffrey R <jrcurtis@uabmc.edu>
225        Subject: Oral Steroids NDC List with Converted Prednisone Equivalent Dose
226        
227        Hi Ben and All,
228        
229        The cleaned oral steroids NDC list (with Prednisone equivalent dose) are at
230        our shared server SAS library :
231        
232        libname ndc "W:\onenote\references\Drug NDCs\SAS Data";
233        
234        And named: Ndc_oralsteroids
235        
236        There are 8 unique GNNs found,
237        
238        BETAMETHASONE
239        BUDESONIDE
240        CORTISONE
241        DEXAMETHASONE
242        HYDROCORTISONE
243        PREDNISOLONE
244        PREDNISONE
245        TRIAMCINOLONE
246        
247        with 3360 unique NDCs;
248        
249        And the variable "Prednisone_EQ_Dose" in the SAS data gives the converted
250        doses; The 'coeff' variable gives the converting coefficient based on below
251        algorithm.
252        
253        Target Steroids    | xx mg = | xx mg Prednisone
254        -------------------|---------|-----------------
255        BETAMETHASONE      | 1 =     | 25/3
256        CORTISONE          | 1 =     | 1/5
257        DEXAMETHASONE      | 1 =     | 20/3
258        FLUDROCORTISONE    | 1 =     | 1/5
259        HYDROCORTISONE     | 1 =     | 1/4
260        METHYLPREDNISOLONE | 1 =     | 5/4
261        PREDNISOLONE       | 1 =     | 1
262        TRIAMCINOLONE      | 1 =     | 5/4
263        BUDESONIDE         | 1 =     | N/A (confirmed there is no coefficient by Lang on 9/13/2016)
264        
265        Let me know if you have any difficulty to find or view the SAS data.
266         */
267        libname NDC "W:\onenote\references\Drug NDCs\SAS Data" access = readonly;
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\Drug NDCs\SAS Data
268        proc contents data = NDC.Ndc_oralsteroids order = varnum;
ERROR: File NDC.NDC_ORALSTEROIDS.DATA does not exist.
269        run;

NOTE: Statements not processed because of errors noted above.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.

4                                                                   The SAS System                                         12:34 Friday, June 22, 2018


270        proc contents data = NDC.NDC_DMARD_Bio_All order = varnum;
ERROR: File NDC.NDC_DMARD_BIO_ALL.DATA does not exist.
271        run;

NOTE: Statements not processed because of errors noted above.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
272        
273        


274        proc sql;
275        /*
276        Create table of search strings used in LIKE operators
277         */
278          create table Work.LikeStr (class char(32), rt char(10), drug char(32), likeStr1 char(32), likeStr2 char(28));
NOTE: Table WORK.LIKESTR created, with 0 rows and 5 columns.
279          insert into Work.LikeStr
280            values ("macrolide", "oral", "azithromycin", '%azithromycin%', 'macrolides')
281            values ("macrolide", "oral", "clarithromycin", '%clarithromycin%', 'macrolides')
282            values ("macrolide", "oral", "erythromycin", '%erythromycin%', 'macrolides');
NOTE: 3 rows were inserted into WORK.LIKESTR.

283          insert into Work.LikeStr
284            values ("antitubercular", "oral", "ethambutol", '%ethambutol%', '%antitubercular%')
285            values ("antitubercular", "oral", "rifamycin", '%rifa%', '%antitubercular%')
286            values ("antitubercular", "oral", "rifabutin", '%rifabutin%', '%antitubercular%')
287            values ("antitubercular", "oral", "pyrazinamide", '%pyrazinamide%', '%antitubercular%');
NOTE: 4 rows were inserted into WORK.LIKESTR.

288          insert into Work.LikeStr
289            values ("inhaled steroid", "inhalation", "beclomethasone", '%beclomethasone%', '%asthma%')
290            values ("inhaled steroid", "inhalation", "budesonide", '%budesonide%', '%asthma%')
291            values ("inhaled steroid", "inhalation", "flunisolide", '%flunisolide%', '%asthma%')
292            values ("inhaled steroid", "inhalation", "fluticasone", '%fluticasone%', '%asthma%')
293            values ("inhaled steroid", "inhalation", "mometasone", '%mometasone%', '%asthma%')
294            values ("inhaled steroid", "inhalation", "triamcinolone", '%triamcinolone%', '%asthma%');
NOTE: 6 rows were inserted into WORK.LIKESTR.

295          insert into Work.LikeStr
296            values ("combined steroid/bronchodilator", "inhalation", "ipratropium/albuterol", '%ipratropium%albuterol%', '%asthma%')
297            values ("combined steroid/bronchodilator", "inhalation", "budesonide/formoterol", '%budesonide%formoterol%', '%asthma%')
298            values ("combined steroid/bronchodilator", "inhalation", "fluticasone/salmeterol", '%fluticasone%salmeterol%', '%asthma%');
NOTE: 3 rows were inserted into WORK.LIKESTR.

299          insert into Work.LikeStr
300            values ("antibiotic", "oral", "levofloxacin", '%levofloxacin%', '%fluoroquinolone%antibiotic%')
301            values ("antibiotic", "oral", "moxifloxacin", '%moxifloxacin%', '%fluoroquinolone%antibiotic%')
302            values ("antibiotic", "oral", "ciprofloxacin", '%ciprofloxacin%', '%fluoroquinolone%antibiotic%')
303            values ("antibiotic", "oral", "amoxicillin", '%amoxicillin%', '%aminopenicillin%antibiotic%')
304            values ("antibiotic", "oral", "amoxicillin", '%amoxicillin%clavulanate', '%aminopenicillin%antibiotic%')
305            values ("antibiotic", "oral", "doxycycline", '%doxycycline', '%tetracycline%antibiotic%')
306            values ("antibiotic", "oral", "minocycline", '%minocycline%', '%tetracycline%antibiotic%')
307            values ("antibiotic", "oral", "sulfamethoxazole/trimethoprim", '%sulfa%trim', '%antibac%')
308            values ("antibiotic", "oral", "linezolid", '%linezolid%', '%oxazolidinone%antibiotic%');
NOTE: 9 rows were inserted into WORK.LIKESTR.

309          insert into Work.LikeStr
310            values ("antibiotic", "inhalation", "aztreonam", '%aztreonam%', '%antibiotic%')
311            values ("antibiotic", "inhalation", "tobramycin", '%tobram%', '%antibiotic%')
312            values ("antibiotic", "inhalation", "amikacin", '%amikac%', '%antibiotic%')
313            values ("antibiotic", "inhalation", "colistin", '%colistin%', '%polymyxin%')
314            values ("antibiotic", "inhalation", "gentamicin", '%gentam%', '%antibiotic%')
315            values ("antibiotic", "intraven", "aztreonam", '%aztreonam%', '%antibiotic%')
316            values ("antibiotic", "intraven", "tobramycin", '%tobram%', '%antibiotic%')
317            values ("antibiotic", "intraven", "amikacin", '%amikac%', '%antibiotic%')
318            values ("antibiotic", "intraven", "colistin", '%colistin%', '%polymyxin%')
319            values ("antibiotic", "intraven", "gentamicin", '%gentam%', '%antibiotic%')
5                                                                   The SAS System                                         12:34 Friday, June 22, 2018

320            values ("antibiotic", "injection", "aztreonam", '%aztreonam%', '%antibiotic%')
321            values ("antibiotic", "injection", "tobramycin", '%tobram%', '%antibiotic%')
322            values ("antibiotic", "injection", "amikacin", '%amikac%', '%antibiotic%')
323            values ("antibiotic", "injection", "colistin", '%colistin%', '%polymyxin%')
324            values ("antibiotic", "injection", "gentamicin", '%gentam%', '%antibiotic%');
NOTE: 15 rows were inserted into WORK.LIKESTR.

325          select "Work.LikeStr" as table, * from Work.LikeStr;
                                                            --- BRONCHIECTASIS project ---                             12:34 Friday, June 22, 2018   2

            table         class                             rt          drug                              likeStr1
            likeStr2
            ------------------------------------------------------------------------------------------------------------------------------
            Work.LikeStr  macrolide                         oral        azithromycin                      %azithromycin%                  
            macrolides                  

            Work.LikeStr  macrolide                         oral        clarithromycin                    %clarithromycin%                
            macrolides                  

            Work.LikeStr  macrolide                         oral        erythromycin                      %erythromycin%                  
            macrolides                  

            Work.LikeStr  antitubercular                    oral        ethambutol                        %ethambutol%                    
            %antitubercular%            

            Work.LikeStr  antitubercular                    oral        rifamycin                         %rifa%                          
            %antitubercular%            

            Work.LikeStr  antitubercular                    oral        rifabutin                         %rifabutin%                     
            %antitubercular%            

            Work.LikeStr  antitubercular                    oral        pyrazinamide                      %pyrazinamide%                  
            %antitubercular%            

            Work.LikeStr  inhaled steroid                   inhalation  beclomethasone                    %beclomethasone%                
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  budesonide                        %budesonide%                    
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  flunisolide                       %flunisolide%                   
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  fluticasone                       %fluticasone%                   
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  mometasone                        %mometasone%                    
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  triamcinolone                     %triamcinolone%                 
            %asthma%                    

            Work.LikeStr  combined steroid/bronchodilator   inhalation  ipratropium/albuterol             %ipratropium%albuterol%         
            %asthma%                    

            Work.LikeStr  combined steroid/bronchodilator   inhalation  budesonide/formoterol             %budesonide%formoterol%         
            %asthma%                    

            Work.LikeStr  combined steroid/bronchodilator   inhalation  fluticasone/salmeterol            %fluticasone%salmeterol%        
            %asthma%                    

            Work.LikeStr  antibiotic                        oral        levofloxacin                      %levofloxacin%                  
            %fluoroquinolone%antibiotic%

            Work.LikeStr  antibiotic                        oral        moxifloxacin                      %moxifloxacin%                  
            %fluoroquinolone%antibiotic%

            Work.LikeStr  antibiotic                        oral        ciprofloxacin                     %ciprofloxacin%                 
            %fluoroquinolone%antibiotic%

            Work.LikeStr  antibiotic                        oral        amoxicillin                       %amoxicillin%                   
            %aminopenicillin%antibiotic%

            Work.LikeStr  antibiotic                        oral        amoxicillin                       %amoxicillin%clavulanate        
            %aminopenicillin%antibiotic%

            Work.LikeStr  antibiotic                        oral        doxycycline                       %doxycycline                    
            %tetracycline%antibiotic%   
 
 
 
                                                                generateNDCLookup.sas
                                                            --- BRONCHIECTASIS project ---                             12:34 Friday, June 22, 2018   3

            table         class                             rt          drug                              likeStr1
            likeStr2
            ------------------------------------------------------------------------------------------------------------------------------
            Work.LikeStr  antibiotic                        oral        minocycline                       %minocycline%                   
            %tetracycline%antibiotic%   

            Work.LikeStr  antibiotic                        oral        sulfamethoxazole/trimethoprim     %sulfa%trim                     
            %antibac%                   

            Work.LikeStr  antibiotic                        oral        linezolid                         %linezolid%                     
            %oxazolidinone%antibiotic%  

            Work.LikeStr  antibiotic                        inhalation  aztreonam                         %aztreonam%                     
            %antibiotic%                

            Work.LikeStr  antibiotic                        inhalation  tobramycin                        %tobram%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        inhalation  amikacin                          %amikac%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        inhalation  colistin                          %colistin%                      
            %polymyxin%                 

            Work.LikeStr  antibiotic                        inhalation  gentamicin                        %gentam%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    aztreonam                         %aztreonam%                     
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    tobramycin                        %tobram%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    amikacin                          %amikac%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    colistin                          %colistin%                      
            %polymyxin%                 

            Work.LikeStr  antibiotic                        intraven    gentamicin                        %gentam%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   aztreonam                         %aztreonam%                     
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   tobramycin                        %tobram%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   amikacin                          %amikac%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   colistin                          %colistin%                      
            %polymyxin%                 

            Work.LikeStr  antibiotic                        injection   gentamicin                        %gentam%                        
            %antibiotic%                
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
326        /*
327        Create NDC lookup table
328        Use LIKE string 1 on brand name, generic name permutations, label name permutations, and tradename
329        Use LIKE string 2 on etc_name
330         */
331          create table DT.lookupNDC as
332            select distinct
333              A.*,
334              . as prednisoneMultiplier,
335              . as prednisodeEquivalentDose,
336            "" as category,
337            "" as subcategory,
338            "" as source
339            from
340              FDB.FDB_ETC_NDC_15 A inner join
341              Work.LikeStr B on (lowcase(A.rt) = B.rt &
342                                 (lowcase(A.bn) like compress(B.likeStr1) |
343                                  lowcase(A.gnn) like compress(B.likeStr1) |
344                                  lowcase(A.gnn60) like compress(B.likeStr1) |
345                                  lowcase(A.ln) like compress(B.likeStr1) |
346                                  lowcase(A.ln25) like compress(B.likeStr1) |
347                                  lowcase(A.ln60) like compress(B.likeStr1) |
348                                  lowcase(A.tradename) like compress(B.likeStr1)) &
349                                 lowcase(etc_name) like compress(B.likeStr2))
350            union all
351            select
352              A.*,
353              C.coeff as prednisoneMultiplier,
354              C.Prednisone_EQ_Dose as prednisodeEquivalentDose,
355              "" as category,
356              "" as subcategory,
357              "NDC_ORALSTEROIDS" as source
358            from
359              FDB.FDB_ETC_NDC_15 A inner join
360              NDC.Ndc_oralsteroids C on (A.NDC = C.Code)
361            union all
362            select
363              A.*,
364              . as prednisoneMultiplier,
365              . as prednisodeEquivalentDose,
366              D.category,
367              D.subcate as subcategory,
368              D.source
369            from
370              FDB.FDB_ETC_NDC_15 A inner join
371              (select codeType, code, category, subcate, "NDC_ALOPU" as source from NDC.NDC_ALOPU union corr
372               select codeType, code, category, subcate, "NDC_DMARD_BIO_ALL" as source from NDC.NDC_DMARD_BIO_ALL) D on (A.NDC = D.Code)
373            where D.codeType = "NDC"
374            union all
375            select
376              A.*, . as prednisoneMultiplier, . as prednisodeEquivalentDose, "" as category, "" as subcategory, E.source
377            from
378              FDB.FDB_ETC_NDC_15 A inner join
379              (/* select codeType, code, "NDC_ALOPU" as source from NDC.NDC_ALOPU union corr */
380               select codeType, code, "NDC_ANTI_FUNGAL" as source from NDC.NDC_ANTI_FUNGAL union corr
381               select codeType, code, "NDC_ANTI_HYPERTENSIVE" as source from NDC.NDC_ANTI_HYPERTENSIVE union corr
382               select codeType, code, "NDC_ANTIBIOTICS" as source from NDC.NDC_ANTIBIOTICS union corr
383               select codeType, code, "NDC_ANTICOAGULANTS" as source from NDC.NDC_ANTICOAGULANTS union corr
384               select codeType, code, "NDC_ANTIHYPERLIPID" as source from NDC.NDC_ANTIHYPERLIPID union corr
385               select codeType, code, "NDC_ANTIVIRAL" as source from NDC.NDC_ANTIVIRAL union corr
386               select codeType, code, "NDC_BETABLOCKERS" as source from NDC.NDC_BETABLOCKERS union corr
387               select codeType, code, "NDC_BISPHOSPHONATES" as source from NDC.NDC_BISPHOSPHONATES union corr
388               /* select codeType, code, "NDC_DMARD_BIO_ALL" as source from NDC.NDC_DMARD_BIO_ALL union corr */
389               select codeType, code, "NDC_FOLIC_ACID" as source from NDC.NDC_FOLIC_ACID union corr
6                                                                   The SAS System                                         12:34 Friday, June 22, 2018

390               select codeType, code, "NDC_GANCICLOVIR" as source from NDC.NDC_GANCICLOVIR union corr
391               select codeType, code, "NDC_INSULIN" as source from NDC.NDC_INSULIN union corr
392               select codeType, code, "NDC_JIA_DMARDS" as source from NDC.NDC_JIA_DMARDS union corr
393               select codeType, code, "NDC_NARCOTICS" as source from NDC.NDC_NARCOTICS union corr
394               select codeType, code, "NDC_NSAIDCOX" as source from NDC.NDC_NSAIDCOX union corr
395               select codeType, code, "NDC_NSAIDNONCOX" as source from NDC.NDC_NSAIDNONCOX union corr
396               /* select codeType, code, "NDC_ORALSTEROIDS" as source from NDC.NDC_ORALSTEROIDS union corr */
397               select codeType, code, "NDC_PPIS" as source from NDC.NDC_PPIS union corr
398               select codeType, code, "NDC_PULMONARY_EMBOLISM" as source from NDC.NDC_PULMONARY_EMBOLISM union corr
399               select codeType, code, "NDC_STATIN" as source from NDC.NDC_STATIN union corr
400               /* select codeType, code, "NDC_STATIN_OLD15" as source from NDC.NDC_STATIN_OLD15 union corr
401               select codeType, code, "NDC_STATINS" as source from NDC.NDC_STATINS union corr
402               select codeType, code, "NDC_STATINS_OBSOLETE" as source from NDC.NDC_STATINS_OBSOLETE union corr */
403               select codeType, code, "NDC_STEROIDS" as source from NDC.NDC_STEROIDS union corr
404               select codeType, code, "NDC_TB" as source from NDC.NDC_TB union corr
405               select codeType, code, "NDC_TOPICALSTEROIDS" as source from NDC.NDC_TOPICALSTEROIDS union corr
406               select codeType, code, "NDC_VASCULITIS" as source from NDC.NDC_VASCULITIS union corr
407               select codeType, code, "NDC_ZOSVAC" as source from NDC.NDC_ZOSVAC) E on (A.NDC = E.Code)
408            where E.codeType = "NDC";
ERROR: File NDC.NDC_ORALSTEROIDS.DATA does not exist.
ERROR: File NDC.NDC_ALOPU.DATA does not exist.
ERROR: File NDC.NDC_DMARD_BIO_ALL.DATA does not exist.
ERROR: File NDC.NDC_ANTI_FUNGAL.DATA does not exist.
ERROR: File NDC.NDC_ANTI_HYPERTENSIVE.DATA does not exist.
ERROR: File NDC.NDC_NSAIDCOX.DATA does not exist.
ERROR: File NDC.NDC_NSAIDNONCOX.DATA does not exist.
ERROR: File NDC.NDC_STATIN.DATA does not exist.
ERROR: File NDC.NDC_TOPICALSTEROIDS.DATA does not exist.
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
409        
410          create table DT.lookupJcodes as
411            select A.* from NDC.NDC_DMARD_Bio_All A where A.codeType = "HCPCS" union corr
412            select "" as gnn,
413                   "HCPCS" as codeType,
414                   description as descript,
415                   hcpcs_cd as code,
416                   "" as str,
417                   "" as rt,
418                   "Inhaled antibiotic" as category,
419                   "" as subCate
420              from NDC.Antibiotics_parenteral_hcpcs
421              where description like '%amikac%' |
422                    description like '%aztreo%' |
423                    description like '%colist%' |
424                    description like '%gentam%' |
425                    description like '%tobram%'
426            order by category, subCate, code;
NOTE: Statement not executed due to NOEXEC option.
427        
428          create table Work.summaryLookupNDC as
429            select "Summary of DT.lookupNDC" as table,
430                   etc_name,
431                   rt,
432                   gnn60,
433                   count(*) as n
434            from DT.lookupNDC
435            group by gnn60, rt, etc_name;
NOTE: Statement not executed due to NOEXEC option.
436          select * from Work.summaryLookupNDC;
ERROR: File WORK.SUMMARYLOOKUPNDC.DATA does not exist.
437          create table Work.summaryOralSteroids as
438            select "Summary of oral steroids" as table,
439                   etc_name,
440                   rt,
441                   gnn60,
442                   count(*) as n,
443                   round(min(prednisodeEquivalentDose), 0.01) as minPrednisodeEqDose,
444                   round(max(prednisodeEquivalentDose), 0.01) as maxPrednisodeEqDose
445            from DT.lookupNDC
446            where ^missing(prednisodeEquivalentDose)
447            group by gnn60, rt, etc_name;
NOTE: Statement not executed due to NOEXEC option.
7                                                                   The SAS System                                         12:34 Friday, June 22, 2018

448          select * from Work.summaryOralSteroids;
ERROR: File WORK.SUMMARYORALSTEROIDS.DATA does not exist.
449        quit;
NOTE: The SAS System stopped processing this step because of errors.
NOTE: SAS set option OBS=0 and will continue to check statements. This might cause NOTE: No observations in data set.
NOTE: The PROCEDURE SQL printed pages 2-3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.93 seconds
      cpu time            0.15 seconds
      
450        
451        


452        proc contents data = DT.lookupNDC order = varnum;
453        run;

                                                            --- BRONCHIECTASIS project ---                             12:34 Friday, June 22, 2018   4

                                                                The CONTENTS Procedure

                                   Data Set Name        DT.LOOKUPNDC                  Observations          141556
                                   Member Type          DATA                          Variables             31    
                                   Engine               V9                            Indexes               0     
                                   Created              04/05/2018 14:00:30           Observation Length    712   
                                   Last Modified        04/05/2018 14:00:30           Deleted Observations  0     
                                   Protection                                         Compressed            NO    
                                   Data Set Type                                      Sorted                NO    
                                   Label                                                                          
                                   Data Representation  WINDOWS_64                                                
                                   Encoding             wlatin1  Western (Windows)                                


                                                          Engine/Host Dependent Information

                                          Data Set Page Size          65536                                
                                          Number of Data Set Pages    1556                                 
                                          First Data Page             1                                    
                                          Max Obs per Page            91                                   
                                          Obs in First Data Page      85                                   
                                          Number of Data Set Repairs  0                                    
                                          ExtendObsCounter            YES                                  
                                          Filename                    V:\studies\AS\data\lookupndc.sas7bdat
                                          Release Created             9.0401M5                             
                                          Host Created                X64_DS08R2                           
                                          Owner Name                  AD\benjaminchan                      
                                          File Size                   97MB                                 
                                          File Size (bytes)           102039552                            


                                                             Variables in Creation Order
 
                          #    Variable                      Type    Len    Format    Informat    Label

                          1    GCN_SEQNO                     Num       8    7.        7.          GCN_SEQNO                 
                          2    ETC_NAME                      Char     70    $70.      $70.        ETC_NAME                  
                          3    NDC                           Char     11    $11.      $11.        NDC                       
                          4    BN                            Char     30    $30.      $30.        BN                        
                          5    LN                            Char     30    $30.      $30.        LN                        
                          6    LN25                          Char     25    $25.      $25.        LN25                      
                          7    LN60                          Char     60    $60.      $60.        LN60                      
                          8    GNN                           Char     30    $30.      $30.        GNN                       
                          9    GNN60                         Char     60    $60.      $60.        GNN60                     
                         10    Package_Description           Char     10    $10.      $10.        PD                        
                         11    TRADENAME                     Char    125    $125.     $125.       TRADENAME                 
                         12    STR                           Char     10    $10.      $10.        STR                       
                         13    STR60                         Char     60    $60.      $60.        STR60                     
                         14    RT                            Char     10    $10.      $10.        RT                        
                         15    GCRT_DESC                     Char     40    $40.      $40.        GCRT_DESC                 
                         16    ETC_ID                        Num       8    9.        9.          ETC_ID                    
                         17    ETC_HIERARCHY_LEVEL           Num       8    3.        3.          ETC_HIERARCHY_LEVEL       
                         18    ETC_ULTIMATE_PARENT_ETC_ID    Num       8    9.        9.          ETC_ULTIMATE_PARENT_ETC_ID
                         19    ETC_PARENT_ETC_ID             Num       8    9.        9.          ETC_PARENT_ETC_ID         
                         20    ETC_ULTIMATE_CHILD_IND        Char      1    $1.       $1.         ETC_ULTIMATE_CHILD_IND    
                         21    GCN                           Num       8    6.        6.          GCN                       
                         22    GCRT                          Char      1    $1.       $1.         GCRT                      
                         23    HICL_SEQNO                    Num       8    7.        7.          HICL_SEQNO                
                         24    HIC3                          Char      3    $3.       $3.         HIC3                      
                         25    HIC3_SEQN                     Num       8    7.        7.          HIC3_SEQN                 
                         26    TC                            Num       8    3.        3.          TC                        
                         27    prednisoneMultiplier          Num       8                                                    
                         28    prednisodeEquivalentDose      Num       8                                                    
                         29    category                      Char     10                                                    
                         30    subcategory                   Char     10                          subcategory               
                         31    source                        Char     22                                                    
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 4.

454        proc contents data = DT.lookupJcodes order = varnum;
455        run;

                                                            --- BRONCHIECTASIS project ---                             12:34 Friday, June 22, 2018   5

                                                                The CONTENTS Procedure

                                     Data Set Name        DT.LOOKUPJCODES               Observations          39 
                                     Member Type          DATA                          Variables             8  
                                     Engine               V9                            Indexes               0  
                                     Created              04/05/2018 14:01:30           Observation Length    422
                                     Last Modified        04/05/2018 14:01:30           Deleted Observations  0  
                                     Protection                                         Compressed            NO 
                                     Data Set Type                                      Sorted                YES
                                     Label                                                                       
                                     Data Representation  WINDOWS_64                                             
                                     Encoding             wlatin1  Western (Windows)                             


                                                          Engine/Host Dependent Information

                                         Data Set Page Size          65536                                   
                                         Number of Data Set Pages    1                                       
                                         First Data Page             1                                       
                                         Max Obs per Page            155                                     
                                         Obs in First Data Page      39                                      
                                         Number of Data Set Repairs  0                                       
                                         ExtendObsCounter            YES                                     
                                         Filename                    V:\studies\AS\data\lookupjcodes.sas7bdat
                                         Release Created             9.0401M5                                
                                         Host Created                X64_DS08R2                              
                                         Owner Name                  AD\benjaminchan                         
                                         File Size                   128KB                                   
                                         File Size (bytes)           131072                                  


                                                              Variables in Creation Order
 
                                  #    Variable    Type    Len    Format    Informat    Label

                                  1    GNN         Char     30                                                      
                                  2    CodeType    Char      5                                                      
                                  3    Descript    Char    328    $60.      $60.        Brand Name or Px Description
                                  4    Code        Char     11    $11.      $11.        NDC or Px Codes             
                                  5    STR         Char     10    $10.      $10.        Strength                    
                                  6    RT          Char     10    $10.      $10.        Route                       
                                  7    Category    Char     18                                                      
                                  8    SubCate     Char     10                                                      


                                                                  Sort Information

                                          Sortedby       Category SubCate Code Descript STR RT GNN CodeType
                                          Validated      YES                                               
                                          Character Set  ANSI                                              
                                          Sort Option    NODUPKEY                                          
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 5.

456        
457        
458        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
459          data = DT.lookupNDC
460          outfile = "data\processed\lookupNDC.csv"
461          dbms = csv
462          replace;
463          delimiter = ",";
464        run;


465        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
466          data = DT.lookupJcodes
467          outfile = "data\processed\lookupJcodes.csv"
468          dbms = csv
469          replace;
470          delimiter = ",";
471        run;


472        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
473          data = Work.summaryLookupNDC
474          outfile = "data\processed\summaryLookupNDC.csv"
475          dbms = csv
476          replace;
8                                                                   The SAS System                                         12:34 Friday, June 22, 2018

477          delimiter = ",";
478        run;


479        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
480          data = Work.summaryOralSteroids
481          outfile = "data\processed\summaryOralSteroids.csv"
482          dbms = csv
483          replace;
484          delimiter = ",";
485        run;
486        
487        
488        ods html close;

ERROR: Errors printed on pages 3,4,6,7.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           18.31 seconds
      cpu time            1.15 seconds
      
