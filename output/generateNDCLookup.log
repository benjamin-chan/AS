1                                                          The SAS System                               10:32 Friday, April 27, 2018

NOTE: Unable to open SASUSER.REGSTRY. WORK.REGSTRY will be opened instead.
NOTE: All registry changes will be lost at the end of the session.

WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this 
         session.
NOTE: Unable to open SASUSER.PROFILE. WORK.PROFILE will be opened instead.
NOTE: All profile changes will be lost at the end of the session.
NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           4.69 seconds
      cpu time            0.46 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  BRONCHIECTASIS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=generateNDCLookup; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
128        footnote "&pgm.";
129        * footnote2 "%sysfunc(datetime(),datetime14.)";
2                                                                   The SAS System                                        10:32 Friday, April 27, 2018

130        title1 '--- BRONCHIECTASIS project ---';
131        **********************************************************************;
132        options macrogen mlogic mprint symbolgen;
133        options nomacrogen nomlogic nomprint nosymbolgen;
134        
135        
136        
137        ods html
138          body = "output\&cmt..html"
139          style = Statistical;
NOTE: Writing HTML Body file: output\generateNDCLookup.html
140        
141        
142        /*
143        From: Yang, Shuo [mailto:shuoyang@uabmc.edu]
144        Sent: Wednesday, August 24, 2016 12:06 PM
145        To: Benjamin Chan <chanb@ohsu.edu>; Chen, Lang <langchen@uabmc.edu>
146        Cc: Emily Henkle <henkle@ohsu.edu>; Matthews, Robert S <rsm@uab.edu>; Curtis, Jeffrey R <jrcurtis@uabmc.edu>
147        Subject: RE: oral steroids for bronchiectasis
148        
149        Hi Ben,
150        
151        I copied 1 SAS datasets to "Q:\pgms\bchan\FDB" folder:
152        
153        * FDB_ETC_NDC_15:
154        
155          * It's the First Data Bank data with 'Enhanced Therapeutic Class'
156            identifiers. And this is the most often used data for searching target
157            generic names and NDCs.
158        
159          * If you have the accurate generic name list, then you can search generic
160            names in 'GNN', 'GNN60' variables, which are generic name and generic name
161            in 60 characters; or search generic/brand names in 'BN', 'LN', 'LN60'
162            variables, which are brand name, label name and label name in 60
163            characters. Then you can get the NDC lists. Or
164        
165          * If you don't have a complete/accurate generic names, you can search one or
166            several generic names which you are sure they should be correct, then get
167            the 'ETC_NAME' and 'ETC_ID' of them, which they stands for 'Enhanced
168            Therapeutic Class Names' and 'Enhanced Therapeutic Class IDs', and then go
169            back to search those 'ETC_ID' in the FDB_ETC_NDC_15 data. This step will
170            give you medicines assigned in the same therapeutic class. Then you can
171            review the generic name list to drop anything you don't need.
172        
173          * Notes:
174        
175            * Key variables you would be interested are: ETC_NAME, ETC_ID, GNN, GNN60,
176              BN, LN, LN60, RT, STR, STR60. And in which,
177        
178              * RT stands for Route
179        
180              * STR stands for Strength; and STR60 stands for Strength info in 60
181                characters (longer format)
182        
183            * In the results of any search, the RT variable should not be 'MISCELL',
184              which stands for 'MISCELLANEOUS' and the medicine in this type are 'Bulk
185              Chemicals' and we don't think they are real medicines prescribed to
186              patients.
187        
188          * An example of SAS codes to search for biologic drugs that I used are
189            pasted below.
190        
191        Feel free to let me know if you have any question.
192        
193        Best,
194        
195        Shawn
196         */
197        libname FDB "Q:\pgms\bchan\FDB" access = readonly;
NOTE: Libref FDB was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: Q:\pgms\bchan\FDB
3                                                                   The SAS System                                        10:32 Friday, April 27, 2018

198        proc contents data = FDB.FDB_ETC_NDC_15 order = varnum;
199        run;

                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   1

                                                                The CONTENTS Procedure

                                   Data Set Name        FDB.FDB_ETC_NDC_15            Observations           457780
                                   Member Type          DATA                          Variables              26    
                                   Engine               V9                            Indexes                0     
                                   Created              08/24/2016 13:32:53           Observation Length     648   
                                   Last Modified        08/24/2016 13:32:53           Deleted Observations   0     
                                   Protection                                         Compressed             CHAR  
                                   Data Set Type                                      Reuse Space            NO    
                                   Label                                              Point to Observations  YES   
                                   Data Representation  WINDOWS_32                    Sorted                 NO    
                                   Encoding             wlatin1  Western (Windows)                                 


                                                          Engine/Host Dependent Information

                                        Data Set Page Size          1048576                                  
                                        Number of Data Set Pages    120                                      
                                        Number of Data Set Repairs  0                                        
                                        ExtendObsCounter            YES                                      
                                        Filename                    Q:\pgms\bchan\FDB\fdb_etc_ndc_15.sas7bdat
                                        Release Created             9.0401M1                                 
                                        Host Created                W32_ES08R2                               
                                        Owner Name                  BUILTIN\Administrators                   
                                        File Size                   121MB                                    
                                        File Size (bytes)           126877696                                


                                                             Variables in Creation Order
 
                          #    Variable                      Type    Len    Format    Informat    Label

                          1    GCN_SEQNO                     Num       8    7.        7.          GCN_SEQNO                 
                          2    ETC_NAME                      Char     70    $70.      $70.        ETC_NAME                  
                          3    NDC                           Char     11    $11.      $11.        NDC                       
                          4    BN                            Char     30    $30.      $30.        BN                        
                          5    LN                            Char     30    $30.      $30.        LN                        
                          6    LN25                          Char     25    $25.      $25.        LN25                      
                          7    LN60                          Char     60    $60.      $60.        LN60                      
                          8    GNN                           Char     30    $30.      $30.        GNN                       
                          9    GNN60                         Char     60    $60.      $60.        GNN60                     
                         10    Package_Description           Char     10    $10.      $10.        PD                        
                         11    TRADENAME                     Char    125    $125.     $125.       TRADENAME                 
                         12    STR                           Char     10    $10.      $10.        STR                       
                         13    STR60                         Char     60    $60.      $60.        STR60                     
                         14    RT                            Char     10    $10.      $10.        RT                        
                         15    GCRT_DESC                     Char     40    $40.      $40.        GCRT_DESC                 
                         16    ETC_ID                        Num       8    9.        9.          ETC_ID                    
                         17    ETC_HIERARCHY_LEVEL           Num       8    3.        3.          ETC_HIERARCHY_LEVEL       
                         18    ETC_ULTIMATE_PARENT_ETC_ID    Num       8    9.        9.          ETC_ULTIMATE_PARENT_ETC_ID
                         19    ETC_PARENT_ETC_ID             Num       8    9.        9.          ETC_PARENT_ETC_ID         
                         20    ETC_ULTIMATE_CHILD_IND        Char      1    $1.       $1.         ETC_ULTIMATE_CHILD_IND    
                         21    GCN                           Num       8    6.        6.          GCN                       
                         22    GCRT                          Char      1    $1.       $1.         GCRT                      
                         23    HICL_SEQNO                    Num       8    7.        7.          HICL_SEQNO                
                         24    HIC3                          Char      3    $3.       $3.         HIC3                      
                         25    HIC3_SEQN                     Num       8    7.        7.          HIC3_SEQN                 
                         26    TC                            Num       8    3.        3.          TC                        
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 1.

200        
201        
202        /*
203        For oral steroids, integrate UAB's Ndc_oralsteroids data set
204        
205        
206        From: Yang, Shuo [mailto:shuoyang@uabmc.edu]
207        Sent: Monday, September 19, 2016 11:28 AM
208        To: Biostatistics & Design Program <bdp@ohsu.edu>; Benjamin Chan <chanb@ohsu.edu>
209        Cc: Chen, Lang <langchen@uabmc.edu>; Kevin Winthrop <winthrop@ohsu.edu>; Curtis, Jeffrey R <jrcurtis@uabmc.edu>
210        Subject: Oral Steroids NDC List with Converted Prednisone Equivalent Dose
211        
212        Hi Ben and All,
213        
214        The cleaned oral steroids NDC list (with Prednisone equivalent dose) are at
215        our shared server SAS library :
216        
217        libname ndc "W:\onenote\references\Drug NDCs\SAS Data";
218        
219        And named: Ndc_oralsteroids
220        
221        There are 8 unique GNNs found,
222        
223        BETAMETHASONE
224        BUDESONIDE
225        CORTISONE
226        DEXAMETHASONE
227        HYDROCORTISONE
228        PREDNISOLONE
229        PREDNISONE
230        TRIAMCINOLONE
231        
232        with 3360 unique NDCs;
233        
234        And the variable "Prednisone_EQ_Dose" in the SAS data gives the converted
235        doses; The 'coeff' variable gives the converting coefficient based on below
236        algorithm.
237        
238        Target Steroids    | xx mg = | xx mg Prednisone
239        -------------------|---------|-----------------
240        BETAMETHASONE      | 1 =     | 25/3
241        CORTISONE          | 1 =     | 1/5
242        DEXAMETHASONE      | 1 =     | 20/3
243        FLUDROCORTISONE    | 1 =     | 1/5
244        HYDROCORTISONE     | 1 =     | 1/4
245        METHYLPREDNISOLONE | 1 =     | 5/4
246        PREDNISOLONE       | 1 =     | 1
247        TRIAMCINOLONE      | 1 =     | 5/4
248        BUDESONIDE         | 1 =     | N/A (confirmed there is no coefficient by Lang on 9/13/2016)
249        
250        Let me know if you have any difficulty to find or view the SAS data.
251         */
252        libname NDC "W:\onenote\references\Drug NDCs\SAS Data" access = readonly;
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\Drug NDCs\SAS Data
253        proc contents data = NDC.Ndc_oralsteroids order = varnum;
254        run;

                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   2

                                                                The CONTENTS Procedure

              Data Set Name        NDC.NDC_ORALSTEROIDS                                                      Observations          3409
              Member Type          DATA                                                                      Variables             10  
              Engine               V9                                                                        Indexes               0   
              Created              02/27/2017 21:36:39                                                       Observation Length    136 
              Last Modified        02/27/2017 21:36:39                                                       Deleted Observations  0   
              Protection           ALTER                                                                     Compressed            NO  
              Data Set Type                                                                                  Sorted                YES 
              Label                FDB NDC Updated to 2016; Px Updated to 2014 Last updated on 01/10/2017                              
              Data Representation  WINDOWS_32                                                                                          
              Encoding             wlatin1  Western (Windows)                                                                          


                                                          Engine/Host Dependent Information

                            Data Set Page Size          1048576                                                           
                            Number of Data Set Pages    1                                                                 
                            First Data Page             1                                                                 
                            Max Obs per Page            7702                                                              
                            Obs in First Data Page      3409                                                              
                            Number of Data Set Repairs  0                                                                 
                            Filename                    W:\onenote\references\Drug NDCs\SAS Data\ndc_oralsteroids.sas7bdat
                            Release Created             9.0301M0                                                          
                            Host Created                X64_7PRO                                                          
                            Owner Name                  BUILTIN\Administrators                                            
                            File Size                   1MB                                                               
                            File Size (bytes)           1049600                                                           


                                                             Variables in Creation Order
 
                             #    Variable              Type    Len    Format    Informat    Label

                             1    GNN                   Char     30                                                      
                             2    DESC                  Char     30    $30.      $30.        Brand Name or Px Description
                             3    Code                  Char     11    $11.      $11.        NDC or Px Codes             
                             4    STR                   Char     10    $10.      $10.        Strength                    
                             5    RT                    Char     10    $10.      $10.        Route                       
                             6    CodeType              Char      5                                                      
                             7    UNIT                  Char     10                                                      
                             8    Str_Num               Num       8                                                      
                             9    coeff                 Num       8                                                      
                            10    Prednisone_EQ_Dose    Num       8                                                      


                                                                  Sort Information

                                                         Sortedby       CodeType RT GNN Code
                                                         Validated      YES                 
                                                         Character Set  ANSI                
                                                         Sort Option    NODUPREC            
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      
4                                                                   The SAS System                                        10:32 Friday, April 27, 2018

NOTE: The PROCEDURE CONTENTS printed page 2.

255        proc contents data = NDC.NDC_DMARD_Bio_All order = varnum;
256        run;

                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   3

                                                                The CONTENTS Procedure

                   Data Set Name        NDC.NDC_DMARD_BIO_ALL                                            Observations          1261
                   Member Type          DATA                                                             Variables             8   
                   Engine               V9                                                               Indexes               0   
                   Created              10/05/2017 09:40:43                                              Observation Length    146 
                   Last Modified        10/05/2017 09:40:43                                              Deleted Observations  0   
                   Protection           ALTER                                                            Compressed            NO  
                   Data Set Type                                                                         Sorted                YES 
                   Label                Created on 2/27/2017; Based on FDB 2016 & Px Collection 2016:                              
                   Data Representation  WINDOWS_64                                                                                 
                   Encoding             wlatin1  Western (Windows)                                                                 


                                                          Engine/Host Dependent Information

                           Data Set Page Size          65536                                                              
                           Number of Data Set Pages    3                                                                  
                           First Data Page             1                                                                  
                           Max Obs per Page            448                                                                
                           Obs in First Data Page      435                                                                
                           Number of Data Set Repairs  0                                                                  
                           ExtendObsCounter            YES                                                                
                           Filename                    W:\onenote\references\Drug NDCs\SAS Data\ndc_dmard_bio_all.sas7bdat
                           Release Created             9.0401M1                                                           
                           Host Created                X64_7PRO                                                           
                           Owner Name                  BUILTIN\Administrators                                             
                           File Size                   256KB                                                              
                           File Size (bytes)           262144                                                             


                                                              Variables in Creation Order
 
                                  #    Variable    Type    Len    Format    Informat    Label

                                  1    GNN         Char     30                                                      
                                  2    CodeType    Char      5                                                      
                                  3    Descript    Char     60    $60.      $60.        Brand Name or Px Description
                                  4    Code        Char     11    $11.      $11.        NDC or Px Codes             
                                  5    STR         Char     10    $10.      $10.        Strength                    
                                  6    RT          Char     10    $10.      $10.        Route                       
                                  7    Category    Char     10                                                      
                                  8    SubCate     Char     10                                                      


                                                                  Sort Information

                                          Sortedby       GNN CodeType Descript Code STR RT Category SubCate
                                          Validated      YES                                               
                                          Character Set  ANSI                                              
                                          Sort Option    NODUPKEY                                          
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 3.

257        
258        
259        proc sql;
260        /*
261        Create table of search strings used in LIKE operators
262         */
263          create table Work.LikeStr (class char(32), rt char(10), drug char(32), likeStr1 char(32), likeStr2 char(28));
NOTE: Table WORK.LIKESTR created, with 0 rows and 5 columns.
264          insert into Work.LikeStr
265            values ("macrolide", "oral", "azithromycin", '%azithromycin%', 'macrolides')
266            values ("macrolide", "oral", "clarithromycin", '%clarithromycin%', 'macrolides')
267            values ("macrolide", "oral", "erythromycin", '%erythromycin%', 'macrolides');
NOTE: 3 rows were inserted into WORK.LIKESTR.

268          insert into Work.LikeStr
269            values ("antitubercular", "oral", "ethambutol", '%ethambutol%', '%antitubercular%')
270            values ("antitubercular", "oral", "rifamycin", '%rifa%', '%antitubercular%')
271            values ("antitubercular", "oral", "rifabutin", '%rifabutin%', '%antitubercular%')
272            values ("antitubercular", "oral", "pyrazinamide", '%pyrazinamide%', '%antitubercular%');
NOTE: 4 rows were inserted into WORK.LIKESTR.

273          insert into Work.LikeStr
274            values ("inhaled steroid", "inhalation", "beclomethasone", '%beclomethasone%', '%asthma%')
275            values ("inhaled steroid", "inhalation", "budesonide", '%budesonide%', '%asthma%')
276            values ("inhaled steroid", "inhalation", "flunisolide", '%flunisolide%', '%asthma%')
277            values ("inhaled steroid", "inhalation", "fluticasone", '%fluticasone%', '%asthma%')
278            values ("inhaled steroid", "inhalation", "mometasone", '%mometasone%', '%asthma%')
279            values ("inhaled steroid", "inhalation", "triamcinolone", '%triamcinolone%', '%asthma%');
NOTE: 6 rows were inserted into WORK.LIKESTR.

280          insert into Work.LikeStr
281            values ("combined steroid/bronchodilator", "inhalation", "ipratropium/albuterol", '%ipratropium%albuterol%', '%asthma%')
282            values ("combined steroid/bronchodilator", "inhalation", "budesonide/formoterol", '%budesonide%formoterol%', '%asthma%')
283            values ("combined steroid/bronchodilator", "inhalation", "fluticasone/salmeterol", '%fluticasone%salmeterol%', '%asthma%');
NOTE: 3 rows were inserted into WORK.LIKESTR.

284          insert into Work.LikeStr
285            values ("antibiotic", "oral", "levofloxacin", '%levofloxacin%', '%fluoroquinolone%antibiotic%')
286            values ("antibiotic", "oral", "moxifloxacin", '%moxifloxacin%', '%fluoroquinolone%antibiotic%')
287            values ("antibiotic", "oral", "ciprofloxacin", '%ciprofloxacin%', '%fluoroquinolone%antibiotic%')
288            values ("antibiotic", "oral", "amoxicillin", '%amoxicillin%', '%aminopenicillin%antibiotic%')
289            values ("antibiotic", "oral", "amoxicillin", '%amoxicillin%clavulanate', '%aminopenicillin%antibiotic%')
290            values ("antibiotic", "oral", "doxycycline", '%doxycycline', '%tetracycline%antibiotic%')
291            values ("antibiotic", "oral", "minocycline", '%minocycline%', '%tetracycline%antibiotic%')
292            values ("antibiotic", "oral", "sulfamethoxazole/trimethoprim", '%sulfa%trim', '%antibac%')
293            values ("antibiotic", "oral", "linezolid", '%linezolid%', '%oxazolidinone%antibiotic%');
NOTE: 9 rows were inserted into WORK.LIKESTR.

294          insert into Work.LikeStr
295            values ("antibiotic", "inhalation", "aztreonam", '%aztreonam%', '%antibiotic%')
296            values ("antibiotic", "inhalation", "tobramycin", '%tobram%', '%antibiotic%')
297            values ("antibiotic", "inhalation", "amikacin", '%amikac%', '%antibiotic%')
298            values ("antibiotic", "inhalation", "colistin", '%colistin%', '%polymyxin%')
299            values ("antibiotic", "inhalation", "gentamicin", '%gentam%', '%antibiotic%')
300            values ("antibiotic", "intraven", "aztreonam", '%aztreonam%', '%antibiotic%')
301            values ("antibiotic", "intraven", "tobramycin", '%tobram%', '%antibiotic%')
302            values ("antibiotic", "intraven", "amikacin", '%amikac%', '%antibiotic%')
303            values ("antibiotic", "intraven", "colistin", '%colistin%', '%polymyxin%')
304            values ("antibiotic", "intraven", "gentamicin", '%gentam%', '%antibiotic%')
305            values ("antibiotic", "injection", "aztreonam", '%aztreonam%', '%antibiotic%')
306            values ("antibiotic", "injection", "tobramycin", '%tobram%', '%antibiotic%')
5                                                                   The SAS System                                        10:32 Friday, April 27, 2018

307            values ("antibiotic", "injection", "amikacin", '%amikac%', '%antibiotic%')
308            values ("antibiotic", "injection", "colistin", '%colistin%', '%polymyxin%')
309            values ("antibiotic", "injection", "gentamicin", '%gentam%', '%antibiotic%');
NOTE: 15 rows were inserted into WORK.LIKESTR.

310          select "Work.LikeStr" as table, * from Work.LikeStr;
                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   4

            table         class                             rt          drug                              likeStr1
            likeStr2
            ------------------------------------------------------------------------------------------------------------------------------
            Work.LikeStr  macrolide                         oral        azithromycin                      %azithromycin%                  
            macrolides                  

            Work.LikeStr  macrolide                         oral        clarithromycin                    %clarithromycin%                
            macrolides                  

            Work.LikeStr  macrolide                         oral        erythromycin                      %erythromycin%                  
            macrolides                  

            Work.LikeStr  antitubercular                    oral        ethambutol                        %ethambutol%                    
            %antitubercular%            

            Work.LikeStr  antitubercular                    oral        rifamycin                         %rifa%                          
            %antitubercular%            

            Work.LikeStr  antitubercular                    oral        rifabutin                         %rifabutin%                     
            %antitubercular%            

            Work.LikeStr  antitubercular                    oral        pyrazinamide                      %pyrazinamide%                  
            %antitubercular%            

            Work.LikeStr  inhaled steroid                   inhalation  beclomethasone                    %beclomethasone%                
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  budesonide                        %budesonide%                    
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  flunisolide                       %flunisolide%                   
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  fluticasone                       %fluticasone%                   
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  mometasone                        %mometasone%                    
            %asthma%                    

            Work.LikeStr  inhaled steroid                   inhalation  triamcinolone                     %triamcinolone%                 
            %asthma%                    

            Work.LikeStr  combined steroid/bronchodilator   inhalation  ipratropium/albuterol             %ipratropium%albuterol%         
            %asthma%                    

            Work.LikeStr  combined steroid/bronchodilator   inhalation  budesonide/formoterol             %budesonide%formoterol%         
            %asthma%                    

            Work.LikeStr  combined steroid/bronchodilator   inhalation  fluticasone/salmeterol            %fluticasone%salmeterol%        
            %asthma%                    

            Work.LikeStr  antibiotic                        oral        levofloxacin                      %levofloxacin%                  
            %fluoroquinolone%antibiotic%

            Work.LikeStr  antibiotic                        oral        moxifloxacin                      %moxifloxacin%                  
            %fluoroquinolone%antibiotic%

            Work.LikeStr  antibiotic                        oral        ciprofloxacin                     %ciprofloxacin%                 
            %fluoroquinolone%antibiotic%

            Work.LikeStr  antibiotic                        oral        amoxicillin                       %amoxicillin%                   
            %aminopenicillin%antibiotic%

            Work.LikeStr  antibiotic                        oral        amoxicillin                       %amoxicillin%clavulanate        
            %aminopenicillin%antibiotic%

            Work.LikeStr  antibiotic                        oral        doxycycline                       %doxycycline                    
            %tetracycline%antibiotic%   
 
 
 
                                                                generateNDCLookup.sas
                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   5

            table         class                             rt          drug                              likeStr1
            likeStr2
            ------------------------------------------------------------------------------------------------------------------------------
            Work.LikeStr  antibiotic                        oral        minocycline                       %minocycline%                   
            %tetracycline%antibiotic%   

            Work.LikeStr  antibiotic                        oral        sulfamethoxazole/trimethoprim     %sulfa%trim                     
            %antibac%                   

            Work.LikeStr  antibiotic                        oral        linezolid                         %linezolid%                     
            %oxazolidinone%antibiotic%  

            Work.LikeStr  antibiotic                        inhalation  aztreonam                         %aztreonam%                     
            %antibiotic%                

            Work.LikeStr  antibiotic                        inhalation  tobramycin                        %tobram%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        inhalation  amikacin                          %amikac%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        inhalation  colistin                          %colistin%                      
            %polymyxin%                 

            Work.LikeStr  antibiotic                        inhalation  gentamicin                        %gentam%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    aztreonam                         %aztreonam%                     
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    tobramycin                        %tobram%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    amikacin                          %amikac%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        intraven    colistin                          %colistin%                      
            %polymyxin%                 

            Work.LikeStr  antibiotic                        intraven    gentamicin                        %gentam%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   aztreonam                         %aztreonam%                     
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   tobramycin                        %tobram%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   amikacin                          %amikac%                        
            %antibiotic%                

            Work.LikeStr  antibiotic                        injection   colistin                          %colistin%                      
            %polymyxin%                 

            Work.LikeStr  antibiotic                        injection   gentamicin                        %gentam%                        
            %antibiotic%                
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
311        /*
312        Create NDC lookup table
313        Use LIKE string 1 on brand name, generic name permutations, label name permutations, and tradename
314        Use LIKE string 2 on etc_name
315         */
316          create table DT.lookupNDC as
317            select distinct
318              A.*,
319              . as prednisoneMultiplier,
320              . as prednisodeEquivalentDose,
321            "" as category,
322            "" as subcategory,
323            "" as source
324            from
325              FDB.FDB_ETC_NDC_15 A inner join
326              Work.LikeStr B on (lowcase(A.rt) = B.rt &
327                                 (lowcase(A.bn) like compress(B.likeStr1) |
328                                  lowcase(A.gnn) like compress(B.likeStr1) |
329                                  lowcase(A.gnn60) like compress(B.likeStr1) |
330                                  lowcase(A.ln) like compress(B.likeStr1) |
331                                  lowcase(A.ln25) like compress(B.likeStr1) |
332                                  lowcase(A.ln60) like compress(B.likeStr1) |
333                                  lowcase(A.tradename) like compress(B.likeStr1)) &
334                                 lowcase(etc_name) like compress(B.likeStr2))
335            union all
336            select
337              A.*,
338              C.coeff as prednisoneMultiplier,
339              C.Prednisone_EQ_Dose as prednisodeEquivalentDose,
340              "" as category,
341              "" as subcategory,
342              "NDC_ORALSTEROIDS" as source
343            from
344              FDB.FDB_ETC_NDC_15 A inner join
345              NDC.Ndc_oralsteroids C on (A.NDC = C.Code)
346            union all
347            select
348              A.*,
349              . as prednisoneMultiplier,
350              . as prednisodeEquivalentDose,
351              D.category,
352              D.subcate as subcategory,
353              D.source
354            from
355              FDB.FDB_ETC_NDC_15 A inner join
356              (select codeType, code, category, subcate, "NDC_ALOPU" as source from NDC.NDC_ALOPU union corr
357               select codeType, code, category, subcate, "NDC_DMARD_BIO_ALL" as source from NDC.NDC_DMARD_BIO_ALL) D on (A.NDC = D.Code)
358            where D.codeType = "NDC"
359            union all
360            select
361              A.*, . as prednisoneMultiplier, . as prednisodeEquivalentDose, "" as category, "" as subcategory, E.source
362            from
363              FDB.FDB_ETC_NDC_15 A inner join
364              (/* select codeType, code, "NDC_ALOPU" as source from NDC.NDC_ALOPU union corr */
365               select codeType, code, "NDC_ANTI_FUNGAL" as source from NDC.NDC_ANTI_FUNGAL union corr
366               select codeType, code, "NDC_ANTI_HYPERTENSIVE" as source from NDC.NDC_ANTI_HYPERTENSIVE union corr
367               select codeType, code, "NDC_ANTIBIOTICS" as source from NDC.NDC_ANTIBIOTICS union corr
368               select codeType, code, "NDC_ANTICOAGULANTS" as source from NDC.NDC_ANTICOAGULANTS union corr
369               select codeType, code, "NDC_ANTIHYPERLIPID" as source from NDC.NDC_ANTIHYPERLIPID union corr
370               select codeType, code, "NDC_ANTIVIRAL" as source from NDC.NDC_ANTIVIRAL union corr
371               select codeType, code, "NDC_BETABLOCKERS" as source from NDC.NDC_BETABLOCKERS union corr
372               select codeType, code, "NDC_BISPHOSPHONATES" as source from NDC.NDC_BISPHOSPHONATES union corr
373               /* select codeType, code, "NDC_DMARD_BIO_ALL" as source from NDC.NDC_DMARD_BIO_ALL union corr */
374               select codeType, code, "NDC_FOLIC_ACID" as source from NDC.NDC_FOLIC_ACID union corr
375               select codeType, code, "NDC_GANCICLOVIR" as source from NDC.NDC_GANCICLOVIR union corr
376               select codeType, code, "NDC_INSULIN" as source from NDC.NDC_INSULIN union corr
6                                                                   The SAS System                                        10:32 Friday, April 27, 2018

377               select codeType, code, "NDC_JIA_DMARDS" as source from NDC.NDC_JIA_DMARDS union corr
378               select codeType, code, "NDC_NARCOTICS" as source from NDC.NDC_NARCOTICS union corr
379               select codeType, code, "NDC_NSAIDCOX" as source from NDC.NDC_NSAIDCOX union corr
380               select codeType, code, "NDC_NSAIDNONCOX" as source from NDC.NDC_NSAIDNONCOX union corr
381               /* select codeType, code, "NDC_ORALSTEROIDS" as source from NDC.NDC_ORALSTEROIDS union corr */
382               select codeType, code, "NDC_PPIS" as source from NDC.NDC_PPIS union corr
383               select codeType, code, "NDC_PULMONARY_EMBOLISM" as source from NDC.NDC_PULMONARY_EMBOLISM union corr
384               select codeType, code, "NDC_STATIN" as source from NDC.NDC_STATIN union corr
385               /* select codeType, code, "NDC_STATIN_OLD15" as source from NDC.NDC_STATIN_OLD15 union corr
386               select codeType, code, "NDC_STATINS" as source from NDC.NDC_STATINS union corr
387               select codeType, code, "NDC_STATINS_OBSOLETE" as source from NDC.NDC_STATINS_OBSOLETE union corr */
388               select codeType, code, "NDC_STEROIDS" as source from NDC.NDC_STEROIDS union corr
389               select codeType, code, "NDC_TB" as source from NDC.NDC_TB union corr
390               select codeType, code, "NDC_TOPICALSTEROIDS" as source from NDC.NDC_TOPICALSTEROIDS union corr
391               select codeType, code, "NDC_VASCULITIS" as source from NDC.NDC_VASCULITIS union corr
392               select codeType, code, "NDC_ZOSVAC" as source from NDC.NDC_ZOSVAC) E on (A.NDC = E.Code)
393            where E.codeType = "NDC";
ERROR: File NDC.NDC_STATIN.DATA does not exist.
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
394        
395          create table DT.lookupJcodes as
396            select A.* from NDC.NDC_DMARD_Bio_All A where A.codeType = "HCPCS" union corr
397            select "" as gnn,
398                   "HCPCS" as codeType,
399                   description as descript,
400                   hcpcs_cd as code,
401                   "" as str,
402                   "" as rt,
403                   "Inhaled antibiotic" as category,
404                   "" as subCate
405              from NDC.Antibiotics_parenteral_hcpcs
406              where description like '%amikac%' |
407                    description like '%aztreo%' |
408                    description like '%colist%' |
409                    description like '%gentam%' |
410                    description like '%tobram%'
411            order by category, subCate, code;
NOTE: Statement not executed due to NOEXEC option.
412        
413          create table Work.summaryLookupNDC as
414            select "Summary of DT.lookupNDC" as table,
415                   etc_name,
416                   rt,
417                   gnn60,
418                   count(*) as n
419            from DT.lookupNDC
420            group by gnn60, rt, etc_name;
NOTE: Statement not executed due to NOEXEC option.
421          select * from Work.summaryLookupNDC;
ERROR: File WORK.SUMMARYLOOKUPNDC.DATA does not exist.
422          create table Work.summaryOralSteroids as
423            select "Summary of oral steroids" as table,
424                   etc_name,
425                   rt,
426                   gnn60,
427                   count(*) as n,
428                   round(min(prednisodeEquivalentDose), 0.01) as minPrednisodeEqDose,
429                   round(max(prednisodeEquivalentDose), 0.01) as maxPrednisodeEqDose
430            from DT.lookupNDC
431            where ^missing(prednisodeEquivalentDose)
432            group by gnn60, rt, etc_name;
NOTE: Statement not executed due to NOEXEC option.
433          select * from Work.summaryOralSteroids;
ERROR: File WORK.SUMMARYORALSTEROIDS.DATA does not exist.
434        quit;
NOTE: The SAS System stopped processing this step because of errors.
NOTE: SAS set option OBS=0 and will continue to check statements. This might cause NOTE: No observations in data set.
NOTE: The PROCEDURE SQL printed pages 4-5.
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.45 seconds
      cpu time            0.29 seconds
      
7                                                                   The SAS System                                        10:32 Friday, April 27, 2018

435        
436        


437        proc contents data = DT.lookupNDC order = varnum;
438        run;

                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   6

                                                                The CONTENTS Procedure

                                   Data Set Name        DT.LOOKUPNDC                  Observations          141556
                                   Member Type          DATA                          Variables             31    
                                   Engine               V9                            Indexes               0     
                                   Created              04/05/2018 14:00:30           Observation Length    712   
                                   Last Modified        04/05/2018 14:00:30           Deleted Observations  0     
                                   Protection                                         Compressed            NO    
                                   Data Set Type                                      Sorted                NO    
                                   Label                                                                          
                                   Data Representation  WINDOWS_64                                                
                                   Encoding             wlatin1  Western (Windows)                                


                                                          Engine/Host Dependent Information

                                          Data Set Page Size          65536                                
                                          Number of Data Set Pages    1556                                 
                                          First Data Page             1                                    
                                          Max Obs per Page            91                                   
                                          Obs in First Data Page      85                                   
                                          Number of Data Set Repairs  0                                    
                                          ExtendObsCounter            YES                                  
                                          Filename                    V:\studies\AS\data\lookupndc.sas7bdat
                                          Release Created             9.0401M5                             
                                          Host Created                X64_DS08R2                           
                                          Owner Name                  AD\benjaminchan                      
                                          File Size                   97MB                                 
                                          File Size (bytes)           102039552                            


                                                             Variables in Creation Order
 
                          #    Variable                      Type    Len    Format    Informat    Label

                          1    GCN_SEQNO                     Num       8    7.        7.          GCN_SEQNO                 
                          2    ETC_NAME                      Char     70    $70.      $70.        ETC_NAME                  
                          3    NDC                           Char     11    $11.      $11.        NDC                       
                          4    BN                            Char     30    $30.      $30.        BN                        
                          5    LN                            Char     30    $30.      $30.        LN                        
                          6    LN25                          Char     25    $25.      $25.        LN25                      
                          7    LN60                          Char     60    $60.      $60.        LN60                      
                          8    GNN                           Char     30    $30.      $30.        GNN                       
                          9    GNN60                         Char     60    $60.      $60.        GNN60                     
                         10    Package_Description           Char     10    $10.      $10.        PD                        
                         11    TRADENAME                     Char    125    $125.     $125.       TRADENAME                 
                         12    STR                           Char     10    $10.      $10.        STR                       
                         13    STR60                         Char     60    $60.      $60.        STR60                     
                         14    RT                            Char     10    $10.      $10.        RT                        
                         15    GCRT_DESC                     Char     40    $40.      $40.        GCRT_DESC                 
                         16    ETC_ID                        Num       8    9.        9.          ETC_ID                    
                         17    ETC_HIERARCHY_LEVEL           Num       8    3.        3.          ETC_HIERARCHY_LEVEL       
                         18    ETC_ULTIMATE_PARENT_ETC_ID    Num       8    9.        9.          ETC_ULTIMATE_PARENT_ETC_ID
                         19    ETC_PARENT_ETC_ID             Num       8    9.        9.          ETC_PARENT_ETC_ID         
                         20    ETC_ULTIMATE_CHILD_IND        Char      1    $1.       $1.         ETC_ULTIMATE_CHILD_IND    
                         21    GCN                           Num       8    6.        6.          GCN                       
                         22    GCRT                          Char      1    $1.       $1.         GCRT                      
                         23    HICL_SEQNO                    Num       8    7.        7.          HICL_SEQNO                
                         24    HIC3                          Char      3    $3.       $3.         HIC3                      
                         25    HIC3_SEQN                     Num       8    7.        7.          HIC3_SEQN                 
                         26    TC                            Num       8    3.        3.          TC                        
                         27    prednisoneMultiplier          Num       8                                                    
                         28    prednisodeEquivalentDose      Num       8                                                    
                         29    category                      Char     10                                                    
                         30    subcategory                   Char     10                          subcategory               
                         31    source                        Char     22                                                    
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 6.

439        proc contents data = DT.lookupJcodes order = varnum;
440        run;

                                                            --- BRONCHIECTASIS project ---                            10:32 Friday, April 27, 2018   7

                                                                The CONTENTS Procedure

                                     Data Set Name        DT.LOOKUPJCODES               Observations          39 
                                     Member Type          DATA                          Variables             8  
                                     Engine               V9                            Indexes               0  
                                     Created              04/05/2018 14:01:30           Observation Length    422
                                     Last Modified        04/05/2018 14:01:30           Deleted Observations  0  
                                     Protection                                         Compressed            NO 
                                     Data Set Type                                      Sorted                YES
                                     Label                                                                       
                                     Data Representation  WINDOWS_64                                             
                                     Encoding             wlatin1  Western (Windows)                             


                                                          Engine/Host Dependent Information

                                         Data Set Page Size          65536                                   
                                         Number of Data Set Pages    1                                       
                                         First Data Page             1                                       
                                         Max Obs per Page            155                                     
                                         Obs in First Data Page      39                                      
                                         Number of Data Set Repairs  0                                       
                                         ExtendObsCounter            YES                                     
                                         Filename                    V:\studies\AS\data\lookupjcodes.sas7bdat
                                         Release Created             9.0401M5                                
                                         Host Created                X64_DS08R2                              
                                         Owner Name                  AD\benjaminchan                         
                                         File Size                   128KB                                   
                                         File Size (bytes)           131072                                  


                                                              Variables in Creation Order
 
                                  #    Variable    Type    Len    Format    Informat    Label

                                  1    GNN         Char     30                                                      
                                  2    CodeType    Char      5                                                      
                                  3    Descript    Char    328    $60.      $60.        Brand Name or Px Description
                                  4    Code        Char     11    $11.      $11.        NDC or Px Codes             
                                  5    STR         Char     10    $10.      $10.        Strength                    
                                  6    RT          Char     10    $10.      $10.        Route                       
                                  7    Category    Char     18                                                      
                                  8    SubCate     Char     10                                                      


                                                                  Sort Information

                                          Sortedby       Category SubCate Code Descript STR RT GNN CodeType
                                          Validated      YES                                               
                                          Character Set  ANSI                                              
                                          Sort Option    NODUPKEY                                          
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                                generateNDCLookup.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 7.

441        
442        
443        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
444          data = DT.lookupNDC
445          outfile = "data\processed\lookupNDC.csv"
446          dbms = csv
447          replace;
448          delimiter = ",";
449        run;


450        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
451          data = DT.lookupJcodes
452          outfile = "data\processed\lookupJcodes.csv"
453          dbms = csv
454          replace;
455          delimiter = ",";
456        run;


457        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
458          data = Work.summaryLookupNDC
459          outfile = "data\processed\summaryLookupNDC.csv"
460          dbms = csv
461          replace;
462          delimiter = ",";
463        run;


464        proc export
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The SAS System stopped processing this step because of errors.
8                                                                   The SAS System                                        10:32 Friday, April 27, 2018

465          data = Work.summaryOralSteroids
466          outfile = "data\processed\summaryOralSteroids.csv"
467          dbms = csv
468          replace;
469          delimiter = ",";
470        run;
471        
472        
473        ods html close;

ERROR: Errors printed on page 6.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           18.65 seconds
      cpu time            1.57 seconds
      
