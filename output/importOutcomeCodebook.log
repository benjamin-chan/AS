1                                         The SAS System         13:18 Wednesday, October 10, 2018

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           3.77 seconds
      cpu time            0.29 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=importOutcomeCodebook; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref UCB64 was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB64\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
143        footnote "&pgm.";
144        * footnote2 "%sysfunc(datetime(),datetime14.)";
145        title1 '--- AS project ---';
146        **********************************************************************;
147        options macrogen mlogic mprint symbolgen;
148        options nomacrogen nomlogic nomprint nosymbolgen;
2                                                                   The SAS System                                   13:18 Wednesday, October 10, 2018

149        
150        
151        /*
152        NEED TO OPERATIONALIZE
153        
154        The outcome definition for osteoporotic fracture is complex.
155        See *ALGORITHMS TO ENHANCE SPECIFICITY OF FRACTURE IDENTIFICATION_ 100316.docx*
156        
157        Osteoporotic fracture Clinical vertebral fracture
158        Non-vertebral osteoporotic fracture (hip, pelvis, femur, humerus, distal radius/ulna)
159         */
160        
161        
162        ods html
163          body = "output\&cmt..html"
164          style = Statistical;
NOTE: Writing HTML Body file: output\importOutcomeCodebook.html
165        
166        
167        filename f "data\raw\AS Project Codebooks - 20170410\AS Project Cohort Outcome Codebook-20170410.xlsx";
168        
169        proc sql;
170          create table Work.worksheets (worksheet varchar(40), outfile varchar(20));
NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: Table WORK.WORKSHEETS created, with 0 rows and 2 columns.
171          insert into Work.worksheets
172            values ("Detail Outcome-Cardiac", "defCardiac")
173            values ("Detail Outcome-Cancer", "defCancer")
174            values ("Detail Outcome-Hospit Infection", "defHospInf")
175            values ("Detail Outcome-OI", "defOI")
176            values ("Detail Outcome-Spondyloarthri", "defSpondy")
177            values ("Detail Outcome-Lung-Neur-Kidn", "defLNK");
NOTE: 6 rows were inserted into WORK.WORKSHEETS.

178        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.12 seconds
      cpu time            0.01 seconds
      

179        
180        %macro import;
181          %do i = 1 %to 6;
182            data _null_;
183              set Work.worksheets;
184              if _n_ = &i then do;
185                call symput ("worksheet", strip(worksheet));
186                call symput ("outfile", strip(outfile));
187              end;
188            run;
189            proc import datafile = f dbms = xlsx out = Work.&outfile;
190              sheet = "&worksheet";
191            run;
192          %end;
193        %mend;
194        
195        %import;

NOTE: There were 6 observations read from the data set WORK.WORKSHEETS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: The import data set has 30 observations and 3 variables.
NOTE: WORK.DEFCARDIAC data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.14 seconds
      cpu time            0.04 seconds
      
3                                                                   The SAS System                                   13:18 Wednesday, October 10, 2018



NOTE: There were 6 observations read from the data set WORK.WORKSHEETS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: The import data set has 698 observations and 3 variables.
NOTE: WORK.DEFCANCER data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.14 seconds
      cpu time            0.10 seconds
      


NOTE: There were 6 observations read from the data set WORK.WORKSHEETS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: The import data set has 1400 observations and 5 variables.
NOTE: WORK.DEFHOSPINF data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.20 seconds
      cpu time            0.15 seconds
      


NOTE: There were 6 observations read from the data set WORK.WORKSHEETS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: The import data set has 504 observations and 3 variables.
NOTE: WORK.DEFOI data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.14 seconds
      cpu time            0.10 seconds
      


NOTE: There were 6 observations read from the data set WORK.WORKSHEETS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: The import data set has 25 observations and 3 variables.
NOTE: WORK.DEFSPONDY data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.17 seconds
      cpu time            0.04 seconds
      


NOTE: There were 6 observations read from the data set WORK.WORKSHEETS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

4                                                                   The SAS System                                   13:18 Wednesday, October 10, 2018


NOTE:    Variable Name Change.  Disease Category -> Disease_Category                
NOTE:    Variable Name Change.  Code Type -> Code_Type                       
NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: The import data set has 47 observations and 5 variables.
NOTE: WORK.DEFLNK data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
      

196        
197        
198        proc sql;
199          create table Work.defOutcomesICD9 as
200            select "Cardiac disease" as outcomeCategory, disease, icd9_list, description from Work.defCardiac union corr
201            select "Cancer" as outcomeCategory, disease, icd9_list, description from Work.defCancer union corr
202            select "Infection" as outcomeCategory, "Hospitalized infection" as disease, icd9_list, Descriptions as description from Work.defHospInf
202      !  union corr
203            select "Infection" as outcomeCategory, "Opportunistic infection" as disease, icd9_list, Descriptions as description from Work.defOI
203      ! union corr
204            select case
205                     when disease in ("Psoriasis", "Psoriatic arthritis") then "PsO/PsA"
206                     when disease in ("Crohnâ€™s Disease", "Ulcerative Colitis") then "Inflammatory bowel disease"
207                     when prxmatch("/Crohn.s Disease/", disease) then "Inflammatory bowel disease"
208                     when disease in ("Uveitis") then "Uveitis"
209                     else ""
210                     end as outcomeCategory,
211                   A.disease,
212                   A.icd9_list,
213                   A.description
214              from Work.defSpondy A;
NOTE: Table WORK.DEFOUTCOMESICD9 created, with 2657 rows and 4 columns.

215          alter table Work.defOutcomesICD9 add codeType varchar(7), code varchar(5), enc_type varchar(2);
NOTE: One or more variables were converted because the data type is not supported by the V9 engine. For more details, run with options MSGLEVEL=I.
NOTE: Table WORK.DEFOUTCOMESICD9 has been modified, with 7 columns.
216          update Work.defOutcomesICD9
217            set codeType = "ICD9-DX";
NOTE: 2657 rows were updated in WORK.DEFOUTCOMESICD9.

218          update Work.defOutcomesICD9
219            set code = dequote(icd9_list);
WARNING: Character expression will be truncated when assigned to character column code.
NOTE: 2657 rows were updated in WORK.DEFOUTCOMESICD9.

220          update Work.defOutcomesICD9
221            set enc_type = case when disease = "Myocardial infarction" then "IP" else "" end;
NOTE: 2657 rows were updated in WORK.DEFOUTCOMESICD9.

222          alter table Work.defOutcomesICD9 drop icd9_list;
NOTE: Table WORK.DEFOUTCOMESICD9 has been modified, with 6 columns.
223          create table DT.defOutcomes as
224            select * from Work.defOutcomesICD9 union corr
225            select disease_category as outcomeCategory, disease, code_type as codeType, dequote(codes) as code, "" as enc_type, description
226              from Work.defLNK;
NOTE: Table DT.DEFOUTCOMES created, with 2704 rows and 6 columns.

227          select outcomeCategory, disease, count(distinct codeType) as countCodeTypes, count(distinct code) as countCodes
228            from DT.defOutcomes
229            where outcomeCategory ^in ("Hospitalized infection", "Opportunistic infection")
230            group by outcomeCategory, disease;
                                                                  --- AS project ---                             13:18 Wednesday, October 10, 2018   1

                                                                                                     countCode
                           Disease Category            Disease                                           Types  countCodes
                           -----------------------------------------------------------------------------------------------
                           Cancer                      Hematologic Cancer                                    1         327
                           Cancer                      Non Melanoma Skin Cancer                              1          40
                           Cancer                      Solid Cancer                                          1         331
                           Cardiac disease             Aortic Insufficiency/Aortic Regurgitation             1           1
                           Cardiac disease             Conduction Block                                      1          19
                           Cardiac disease             Myocardial infarction                                 1          10
                           Infection                   Hospitalized infection                                1        1400
                           Infection                   Opportunistic infection                               1         504
                           Inflammatory bowel disease  Crohn’s Disease                                       1           4
                           Inflammatory bowel disease  Ulcerative Colitis                                    1           9
                           Kidney disease              Amyloidosis                                           1           1
                           Kidney disease              IgA nephropathy                                       1           1
                           Kidney disease              Nephrotic syndrome                                    1           1
                           Lung disease                Apical Pulmonary fibrosis                             1           1
                           Lung disease                Interstitial lung disease                             3          40
                           Lung disease                Restrictive lung disease                              1           1
                           Neurological Disease        Cauda Equina syndrome                                 1           1
                           Neurological Disease        Spinal Cord compression                               1           1
                           PsO/PsA                     Psoriasis                                             1           1
                           PsO/PsA                     Psoriatic arthritis                                   1           1
                           Uveitis                     Uveitis                                               1          10
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              importOutcomeCodebook.sas
231        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.81 seconds
      cpu time            0.26 seconds
      

232        
233        
234        ods html close;
5                                                                   The SAS System                                   13:18 Wednesday, October 10, 2018

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           16.69 seconds
      cpu time            1.70 seconds
      
