1                                                          The SAS System                            16:44 Monday, November 27, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70058223.
NOTE: This session is executing on the W32_ES08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_ES08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           0.21 seconds
      cpu time            0.14 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                                        *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=modelPropensityScore; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: h:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
127        footnote "&pgm.";
128        * footnote2 "%sysfunc(datetime(),datetime14.)";
129        title1 '--- AS project ---';
130        **********************************************************************;
131        options macrogen mlogic mprint symbolgen;
132        options nomacrogen nomlogic nomprint nosymbolgen;
133        
134        
135        ods html
2                                                                   The SAS System                                     16:44 Monday, November 27, 2017

136          body = "output\&cmt..html"
137          style = Statistical;
NOTE: Writing HTML Body file: output\modelPropensityScore.html
138        
139        
140        proc sql;
141          create table Work.allCovariates as
142            select A.database,
143                   case
144                     when A.exposure in ("No exposure", "NSAID") then "NSAID or no exposure"
145                     else A.exposure
146                     end as exposure3,
147                   A.PATID,
148                   A.age,
149                   case
150                     when age = 0 then "0"
151                     when  1 <= age <= 18 then "1-18"
152                     when 19 <= age <= 29 then "19-29"
153                     when 30 <= age <= 39 then "30-39"
154                     when 40 <= age <= 49 then "40-49"
155                     when 50 <= age <= 59 then "50-59"
156                     when 60 <= age <= 69 then "60-69"
157                     when 70 <= age       then "70+"
158                     else ""
159                     end as catAge,
160                   A.SEX,
161                   A.indexID,
162                   max(0, B.indAmyloidosis     ) as indAmyloidosis,
163                   max(0, C.indAortInsuffRegurg) as indAortInsuffRegurg,
164                   max(0, D.indApicalPulmFib   ) as indApicalPulmFib,
165                   max(0, E.indCaudaEquina     ) as indCaudaEquina,
166                   max(0, F.indVertFrac        ) as indVertFrac,
167                   max(0, G.indConductBlock    ) as indConductBlock,
168                   max(0, H.indCrohnsDis       ) as indCrohnsDis,
169                   max(0, I.indHematCa         ) as indHematCa,
170                   max(0, J.indHospInf         ) as indHospInf,
171                   max(0, K.indIgANeph         ) as indIgANeph,
172                   max(0, L.indInterstLungDis  ) as indInterstLungDis,
173                   max(0, M.indMI              ) as indMI,
174                   max(0, N.indNephSyn         ) as indNephSyn,
175                   max(0, O.indNMSC            ) as indNMSC,
176                   max(0, P.indNonVertOsFrac   ) as indNonVertOsFrac,
177                   max(0, Q.indOppInf          ) as indOppInf,
178                   max(0, R.indPsoriasis       ) as indPsoriasis,
179                   max(0, S.indPSA             ) as indPSA,
180                   max(0, T.indRestrictLungDis ) as indRestrictLungDis,
181                   max(0, U.indSolidCa         ) as indSolidCa,
182                   max(0, V.indSpinalCordComp  ) as indSpinalCordComp,
183                   max(0, W.indUlcerColitis    ) as indUlcerColitis,
184                   max(0, X.indUveitis         ) as indUveitis,
185                   max(0, AA.indDiabetes       ) as indDiabetes,
186                   max(0, BB.indHT             ) as indHT,
187                   max(0, CC.indMetabSyn       ) as indMetabSyn,
188                   max(0, DD.indNAFattyLiverDis) as indNAFattyLiverDis
189            from
190              DT.indexLookup A left join
191              (select indexID, 1 as indAmyloidosis      from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Amyloidosis/"
191      !                        , disease    )) B  on (A.indexID = B.indexID ) left join
192              (select indexID, 1 as indAortInsuffRegurg from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Aortic
192      ! Insufficiency\/Aortic Regurgitation/", disease    )) C  on (A.indexID = C.indexID ) left join
193              (select indexID, 1 as indApicalPulmFib    from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Apical Pulmonary
193      ! fibrosis/"                 , disease    )) D  on (A.indexID = D.indexID ) left join
194              (select indexID, 1 as indCaudaEquina      from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Cauda Equina
194      ! syndrome/"                     , disease    )) E  on (A.indexID = E.indexID ) left join
195              (select indexID, 1 as indVertFrac         from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Clinical vertebral
195      ! fracture/"               , disease    )) F  on (A.indexID = F.indexID ) left join
196              (select indexID, 1 as indConductBlock     from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Conduction Block/"
196      !                        , disease    )) G  on (A.indexID = G.indexID ) left join
197              (select indexID, 1 as indCrohnsDis        from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Crohnâ€™s Disease/"
197      !                          , disease    )) H  on (A.indexID = H.indexID ) left join
198              (select indexID, 1 as indHematCa          from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Hematologic Cancer/"
198      !                        , disease    )) I  on (A.indexID = I.indexID ) left join
3                                                                   The SAS System                                     16:44 Monday, November 27, 2017

199              (select indexID, 1 as indHospInf          from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Hospitalized
199      ! infection/"                    , disease    )) J  on (A.indexID = J.indexID ) left join
200              (select indexID, 1 as indIgANeph          from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/IgA nephropathy/"
200      !                        , disease    )) K  on (A.indexID = K.indexID ) left join
201              (select indexID, 1 as indInterstLungDis   from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Interstitial lung
201      ! disease/"                 , disease    )) L  on (A.indexID = L.indexID ) left join
202              (select indexID, 1 as indMI               from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Myocardial
202      ! infarction/"                     , disease    )) M  on (A.indexID = M.indexID ) left join
203              (select indexID, 1 as indNephSyn          from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Nephrotic syndrome/"
203      !                        , disease    )) N  on (A.indexID = N.indexID ) left join
204              (select indexID, 1 as indNMSC             from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Non Melanoma Skin
204      ! Cancer/"                  , disease    )) O  on (A.indexID = O.indexID ) left join
205              (select indexID, 1 as indNonVertOsFrac    from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Non-vertebral
205      ! osteoporotic fracture/"       , disease    )) P  on (A.indexID = P.indexID ) left join
206              (select indexID, 1 as indOppInf           from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Opportunistic
206      ! infection/"                   , disease    )) Q  on (A.indexID = Q.indexID ) left join
207              (select indexID, 1 as indPsoriasis        from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Psoriasis/"
207      !                        , disease    )) R  on (A.indexID = R.indexID ) left join
208              (select indexID, 1 as indPSA              from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Psoriatic arthritis/"
208      !                        , disease    )) S  on (A.indexID = S.indexID ) left join
209              (select indexID, 1 as indRestrictLungDis  from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Restrictive lung
209      ! disease/"                  , disease    )) T  on (A.indexID = T.indexID ) left join
210              (select indexID, 1 as indSolidCa          from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Solid Cancer/"
210      !                        , disease    )) U  on (A.indexID = U.indexID ) left join
211              (select indexID, 1 as indSpinalCordComp   from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Spinal Cord
211      ! compression/"                   , disease    )) V  on (A.indexID = V.indexID ) left join
212              (select indexID, 1 as indUlcerColitis     from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Ulcerative Colitis/"
212      !                        , disease    )) W  on (A.indexID = W.indexID ) left join
213              (select indexID, 1 as indUveitis          from DT.comorbidities      where indPrevPriorToIndex = 1 & prxmatch("/Uveitis/"
213      !                        , disease    )) X  on (A.indexID = X.indexID ) left join
214              (select indexID, 1 as indDiabetes         from DT.comorbiditiesOther where                           prxmatch("/Diabetes/"
214      !                        , comorbidity)) AA on (A.indexID = AA.indexID) left join
215              (select indexID, 1 as indHT               from DT.comorbiditiesOther where                           prxmatch("/Hypertention/"
215      !                        , comorbidity)) BB on (A.indexID = BB.indexID) left join
216              (select indexID, 1 as indMetabSyn         from DT.comorbiditiesOther where                           prxmatch("/Metabolic syndrome/"
216      !                        , comorbidity)) CC on (A.indexID = CC.indexID) left join
217              (select indexID, 1 as indNAFattyLiverDis  from DT.comorbiditiesOther where                           prxmatch("/Non-alcoholic fatty
217      ! liver disease/"         , comorbidity)) DD on (A.indexID = DD.indexID) ;
NOTE: Table WORK.ALLCOVARIATES created, with 60010 rows and 34 columns.

218        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           2.57 seconds
      cpu time            1.96 seconds
      

219        
220        
221        proc means data = Work.allCovariates;
222          class database exposure3;
223          var indAmyloidosis
224              indAortInsuffRegurg
225              indApicalPulmFib
226              indCaudaEquina
227              indVertFrac
228              indConductBlock
229              indCrohnsDis
230              indHematCa
231              indHospInf
232              indIgANeph
233              indInterstLungDis
234              indMI
235              indNephSyn
236              indNMSC
237              indNonVertOsFrac
238              indOppInf
239              indPsoriasis
240              indPSA
241              indRestrictLungDis
242              indSolidCa
243              indSpinalCordComp
244              indUlcerColitis
4                                                                   The SAS System                                     16:44 Monday, November 27, 2017

245              indUveitis
246              indDiabetes
247              indHT
248              indMetabSyn
249              indNAFattyLiverDis;
250        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   1

                                                                 The MEANS Procedure

     database      exposure3               N Obs    Variable                   N            Mean         Std Dev         Minimum         Maximum
     -------------------------------------------------------------------------------------------------------------------------------------------
     MPCD          DMARD                     481    indAmyloidosis           481               0               0               0               0
                                                    indAortInsuffRegurg      481       0.0041580       0.0644154               0       1.0000000
                                                    indApicalPulmFib         481               0               0               0               0
                                                    indCaudaEquina           481               0               0               0               0
                                                    indVertFrac              481       0.0020790       0.0455961               0       1.0000000
                                                    indConductBlock          481               0               0               0               0
                                                    indCrohnsDis             481               0               0               0               0
                                                    indHematCa               481       0.0020790       0.0455961               0       1.0000000
                                                    indHospInf               481       0.0145530       0.1198795               0       1.0000000
                                                    indIgANeph               481       0.0020790       0.0455961               0       1.0000000
                                                    indInterstLungDis        481               0               0               0               0
                                                    indMI                    481               0               0               0               0
                                                    indNephSyn               481               0               0               0               0
                                                    indNMSC                  481               0               0               0               0
                                                    indNonVertOsFrac         481       0.0103950       0.1015302               0       1.0000000
                                                    indOppInf                481       0.0062370       0.0788100               0       1.0000000
                                                    indPsoriasis             481       0.0124740       0.1111039               0       1.0000000
                                                    indPSA                   481       0.0436590       0.2045481               0       1.0000000
                                                    indRestrictLungDis       481       0.0041580       0.0644154               0       1.0000000
                                                    indSolidCa               481       0.0124740       0.1111039               0       1.0000000
                                                    indSpinalCordComp        481               0               0               0               0
                                                    indUlcerColitis          481       0.0145530       0.1198795               0       1.0000000
                                                    indUveitis               481       0.0582121       0.2343878               0       1.0000000
                                                    indDiabetes              481       0.1434511       0.3508973               0       1.0000000
                                                    indHT                    481       0.3991684       0.4902373               0       1.0000000
                                                    indMetabSyn              481       0.0103950       0.1015302               0       1.0000000
                                                    indNAFattyLiverDis       481       0.0124740       0.1111039               0       1.0000000

                   NSAID or no exposure     2593    indAmyloidosis          2593               0               0               0               0
                                                    indAortInsuffRegurg     2593       0.0026996       0.0518973               0       1.0000000
                                                    indApicalPulmFib        2593               0               0               0               0
                                                    indCaudaEquina          2593       0.0011570       0.0340010               0       1.0000000
                                                    indVertFrac             2593       0.0077131       0.0875016               0       1.0000000
                                                    indConductBlock         2593       0.0023139       0.0480568               0       1.0000000
                                                    indCrohnsDis            2593               0               0               0               0
                                                    indHematCa              2593     0.000771307       0.0277671               0       1.0000000
                                                    indHospInf              2593       0.0289240       0.1676254               0       1.0000000
                                                    indIgANeph              2593     0.000385654       0.0196381               0       1.0000000
                                                    indInterstLungDis       2593     0.000385654       0.0196381               0       1.0000000
                                                    indMI                   2593     0.000385654       0.0196381               0       1.0000000
                                                    indNephSyn              2593               0               0               0               0
                                                    indNMSC                 2593               0               0               0               0
                                                    indNonVertOsFrac        2593       0.0127266       0.1121136               0       1.0000000
                                                    indOppInf               2593       0.0030852       0.0554698               0       1.0000000
                                                    indPsoriasis            2593       0.0100270       0.0996508               0       1.0000000
                                                    indPSA                  2593       0.0111840       0.1051815               0       1.0000000
                                                    indRestrictLungDis      2593       0.0077131       0.0875016               0       1.0000000
                                                    indSolidCa              2593       0.0161975       0.1262586               0       1.0000000
                                                    indSpinalCordComp       2593       0.0015426       0.0392534               0       1.0000000
                                                    indUlcerColitis         2593       0.0092557       0.0957787               0       1.0000000
                                                    indUveitis              2593       0.0316236       0.1750296               0       1.0000000
                                                    indDiabetes             2593       0.2013112       0.4010574               0       1.0000000
                                                    indHT                   2593       0.4712688       0.4992701               0       1.0000000
                                                    indMetabSyn             2593       0.0134979       0.1154159               0       1.0000000
                                                    indNAFattyLiverDis      2593       0.0096413       0.0977347               0       1.0000000

                   TNF                      1279    indAmyloidosis          1279               0               0               0               0
                                                    indAortInsuffRegurg     1279       0.0140735       0.1178401               0       1.0000000
                                                    indApicalPulmFib        1279               0               0               0               0
                                                    indCaudaEquina          1279               0               0               0               0
                                                    indVertFrac             1279       0.0086005       0.0923752               0       1.0000000
                                                    indConductBlock         1279     0.000781861       0.0279618               0       1.0000000
                                                    indCrohnsDis            1279               0               0               0               0
                                                    indHematCa              1279       0.0031274       0.0558579               0       1.0000000
                                                    indHospInf              1279       0.0109461       0.1040899               0       1.0000000
     -------------------------------------------------------------------------------------------------------------------------------------------
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   2

                                                                 The MEANS Procedure

     database      exposure3               N Obs    Variable                   N            Mean         Std Dev         Minimum         Maximum
     -------------------------------------------------------------------------------------------------------------------------------------------
     MPCD          TNF                      1279    indIgANeph              1279     0.000781861       0.0279618               0       1.0000000
                                                    indInterstLungDis       1279               0               0               0               0
                                                    indMI                   1279       0.0023456       0.0483933               0       1.0000000
                                                    indNephSyn              1279               0               0               0               0
                                                    indNMSC                 1279               0               0               0               0
                                                    indNonVertOsFrac        1279       0.0140735       0.1178401               0       1.0000000
                                                    indOppInf               1279       0.0078186       0.0881110               0       1.0000000
                                                    indPsoriasis            1279       0.0289289       0.1676722               0       1.0000000
                                                    indPSA                  1279       0.0547303       0.2275419               0       1.0000000
                                                    indRestrictLungDis      1279       0.0078186       0.0881110               0       1.0000000
                                                    indSolidCa              1279       0.0148554       0.1210212               0       1.0000000
                                                    indSpinalCordComp       1279               0               0               0               0
                                                    indUlcerColitis         1279       0.0211102       0.1438081               0       1.0000000
                                                    indUveitis              1279       0.0703675       0.2558654               0       1.0000000
                                                    indDiabetes             1279       0.1055512       0.3073825               0       1.0000000
                                                    indHT                   1279       0.3416732       0.4744561               0       1.0000000
                                                    indMetabSyn             1279       0.0101642       0.1003432               0       1.0000000
                                                    indNAFattyLiverDis      1279       0.0179828       0.1329407               0       1.0000000

     Marketscan    DMARD                    2045    indAmyloidosis          2045               0               0               0               0
                                                    indAortInsuffRegurg     2045       0.0063570       0.0794962               0       1.0000000
                                                    indApicalPulmFib        2045               0               0               0               0
                                                    indCaudaEquina          2045               0               0               0               0
                                                    indVertFrac             2045       0.0034230       0.0584203               0       1.0000000
                                                    indConductBlock         2045       0.0063570       0.0794962               0       1.0000000
                                                    indCrohnsDis            2045               0               0               0               0
                                                    indHematCa              2045       0.0058680       0.0763963               0       1.0000000
                                                    indHospInf              2045       0.0430318       0.2029783               0       1.0000000
                                                    indIgANeph              2045     0.000488998       0.0221133               0       1.0000000
                                                    indInterstLungDis       2045     0.000977995       0.0312653               0       1.0000000
                                                    indMI                   2045       0.0024450       0.0493984               0       1.0000000
                                                    indNephSyn              2045               0               0               0               0
                                                    indNMSC                 2045       0.0029340       0.0541000               0       1.0000000
                                                    indNonVertOsFrac        2045       0.0092910       0.0959642               0       1.0000000
                                                    indOppInf               2045       0.0107579       0.1031863               0       1.0000000
                                                    indPsoriasis            2045       0.0239609       0.1529647               0       1.0000000
                                                    indPSA                  2045       0.0425428       0.2018733               0       1.0000000
                                                    indRestrictLungDis      2045       0.0088020       0.0934278               0       1.0000000
                                                    indSolidCa              2045       0.0288509       0.1674282               0       1.0000000
                                                    indSpinalCordComp       2045     0.000977995       0.0312653               0       1.0000000
                                                    indUlcerColitis         2045       0.0136919       0.1162371               0       1.0000000
                                                    indUveitis              2045       0.0503667       0.2187541               0       1.0000000
                                                    indDiabetes             2045       0.1310513       0.3375390               0       1.0000000
                                                    indHT                   2045       0.4224939       0.4940771               0       1.0000000
                                                    indMetabSyn             2045       0.0210269       0.1435090               0       1.0000000
                                                    indNAFattyLiverDis      2045       0.0166259       0.1278964               0       1.0000000

                   NSAID or no exposure    10589    indAmyloidosis         10589               0               0               0               0
                                                    indAortInsuffRegurg    10589       0.0057607       0.0756839               0       1.0000000
                                                    indApicalPulmFib       10589               0               0               0               0
                                                    indCaudaEquina         10589     0.000094438       0.0097179               0       1.0000000
                                                    indVertFrac            10589       0.0159600       0.1253265               0       1.0000000
                                                    indConductBlock        10589       0.0074606       0.0860559               0       1.0000000
                                                    indCrohnsDis           10589               0               0               0               0
                                                    indHematCa             10589       0.0034942       0.0590111               0       1.0000000
                                                    indHospInf             10589       0.0454245       0.2082431               0       1.0000000
                                                    indIgANeph             10589     0.000283313       0.0168303               0       1.0000000
                                                    indInterstLungDis      10589     0.000566626       0.0237983               0       1.0000000
                                                    indMI                  10589       0.0036831       0.0605793               0       1.0000000
                                                    indNephSyn             10589               0               0               0               0
                                                    indNMSC                10589       0.0043441       0.0657698               0       1.0000000
                                                    indNonVertOsFrac       10589       0.0124658       0.1109574               0       1.0000000
                                                    indOppInf              10589       0.0035886       0.0598004               0       1.0000000
                                                    indPsoriasis           10589       0.0102937       0.1009391               0       1.0000000
                                                    indPSA                 10589       0.0138823       0.1170081               0       1.0000000
     -------------------------------------------------------------------------------------------------------------------------------------------
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   3

                                                                 The MEANS Procedure

     database      exposure3               N Obs    Variable                   N            Mean         Std Dev         Minimum         Maximum
     -------------------------------------------------------------------------------------------------------------------------------------------
     Marketscan    NSAID or no exposure    10589    indRestrictLungDis     10589       0.0063273       0.0792962               0       1.0000000
                                                    indSolidCa             10589       0.0188875       0.1361343               0       1.0000000
                                                    indSpinalCordComp      10589       0.0020776       0.0455358               0       1.0000000
                                                    indUlcerColitis        10589       0.0081216       0.0897576               0       1.0000000
                                                    indUveitis             10589       0.0343753       0.1821998               0       1.0000000
                                                    indDiabetes            10589       0.1443007       0.3514110               0       1.0000000
                                                    indHT                  10589       0.4197752       0.4935453               0       1.0000000
                                                    indMetabSyn            10589       0.0116158       0.1071540               0       1.0000000
                                                    indNAFattyLiverDis     10589       0.0229483       0.1497459               0       1.0000000

                   TNF                      5779    indAmyloidosis          5779               0               0               0               0
                                                    indAortInsuffRegurg     5779       0.0064025       0.0797659               0       1.0000000
                                                    indApicalPulmFib        5779               0               0               0               0
                                                    indCaudaEquina          5779               0               0               0               0
                                                    indVertFrac             5779       0.0041530       0.0643151               0       1.0000000
                                                    indConductBlock         5779       0.0051912       0.0718690               0       1.0000000
                                                    indCrohnsDis            5779               0               0               0               0
                                                    indHematCa              5779     0.000865202       0.0294041               0       1.0000000
                                                    indHospInf              5779       0.0335698       0.1801347               0       1.0000000
                                                    indIgANeph              5779     0.000865202       0.0294041               0       1.0000000
                                                    indInterstLungDis       5779     0.000692161       0.0263021               0       1.0000000
                                                    indMI                   5779       0.0027686       0.0525496               0       1.0000000
                                                    indNephSyn              5779     0.000519121       0.0227803               0       1.0000000
                                                    indNMSC                 5779       0.0044990       0.0669297               0       1.0000000
                                                    indNonVertOsFrac        5779       0.0086520       0.0926210               0       1.0000000
                                                    indOppInf               5779       0.0102094       0.1005331               0       1.0000000
                                                    indPsoriasis            5779       0.0309742       0.1732628               0       1.0000000
                                                    indPSA                  5779       0.0577955       0.2333765               0       1.0000000
                                                    indRestrictLungDis      5779       0.0058834       0.0764838               0       1.0000000
                                                    indSolidCa              5779       0.0138432       0.1168501               0       1.0000000
                                                    indSpinalCordComp       5779     0.000519121       0.0227803               0       1.0000000
                                                    indUlcerColitis         5779       0.0259560       0.1590179               0       1.0000000
                                                    indUveitis              5779       0.0648901       0.2463532               0       1.0000000
                                                    indDiabetes             5779       0.1100536       0.3129837               0       1.0000000
                                                    indHT                   5779       0.3723828       0.4834814               0       1.0000000
                                                    indMetabSyn             5779       0.0136702       0.1161277               0       1.0000000
                                                    indNAFattyLiverDis      5779       0.0290708       0.1680195               0       1.0000000

     Medicare      DMARD                    5193    indAmyloidosis          5193     0.000385134       0.0196229               0       1.0000000
                                                    indAortInsuffRegurg     5193       0.0310033       0.1733432               0       1.0000000
                                                    indApicalPulmFib        5193     0.000385134       0.0196229               0       1.0000000
                                                    indCaudaEquina          5193       0.0013480       0.0366935               0       1.0000000
                                                    indVertFrac             5193       0.0354323       0.1848877               0       1.0000000
                                                    indConductBlock         5193       0.0250337       0.1562425               0       1.0000000
                                                    indCrohnsDis            5193               0               0               0               0
                                                    indHematCa              5193       0.0138648       0.1169411               0       1.0000000
                                                    indHospInf              5193       0.1588677       0.3655879               0       1.0000000
                                                    indIgANeph              5193       0.0021182       0.0459800               0       1.0000000
                                                    indInterstLungDis       5193       0.0111689       0.1051012               0       1.0000000
                                                    indMI                   5193       0.0103986       0.1014518               0       1.0000000
                                                    indNephSyn              5193       0.0015405       0.0392232               0       1.0000000
                                                    indNMSC                 5193       0.0105912       0.1023769               0       1.0000000
                                                    indNonVertOsFrac        5193       0.0466012       0.2108034               0       1.0000000
                                                    indOppInf               5193       0.0308107       0.1728212               0       1.0000000
                                                    indPsoriasis            5193       0.0483343       0.2144923               0       1.0000000
                                                    indPSA                  5193       0.0758714       0.2648177               0       1.0000000
                                                    indRestrictLungDis      5193       0.0373580       0.1896557               0       1.0000000
                                                    indSolidCa              5193       0.0654728       0.2473820               0       1.0000000
                                                    indSpinalCordComp       5193       0.0057770       0.0757941               0       1.0000000
                                                    indUlcerColitis         5193       0.0383208       0.1919881               0       1.0000000
                                                    indUveitis              5193       0.0562295       0.2303866               0       1.0000000
                                                    indDiabetes             5193       0.3928365       0.4884280               0       1.0000000
                                                    indHT                   5193       0.8320816       0.3738298               0       1.0000000
                                                    indMetabSyn             5193       0.0250337       0.1562425               0       1.0000000
                                                    indNAFattyLiverDis      5193       0.0502600       0.2185019               0       1.0000000
     -------------------------------------------------------------------------------------------------------------------------------------------
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   4

                                                                 The MEANS Procedure

     database      exposure3               N Obs    Variable                   N            Mean         Std Dev         Minimum         Maximum
     -------------------------------------------------------------------------------------------------------------------------------------------
     Medicare      NSAID or no exposure    26122    indAmyloidosis         26122     0.000421101       0.0205168               0       1.0000000
                                                    indAortInsuffRegurg    26122       0.0266825       0.1611568               0       1.0000000
                                                    indApicalPulmFib       26122     0.000153128       0.0123738               0       1.0000000
                                                    indCaudaEquina         26122       0.0011102       0.0333014               0       1.0000000
                                                    indVertFrac            26122       0.0452492       0.2078542               0       1.0000000
                                                    indConductBlock        26122       0.0282138       0.1655862               0       1.0000000
                                                    indCrohnsDis           26122               0               0               0               0
                                                    indHematCa             26122       0.0101447       0.1002107               0       1.0000000
                                                    indHospInf             26122       0.1339484       0.3406034               0       1.0000000
                                                    indIgANeph             26122       0.0017610       0.0419277               0       1.0000000
                                                    indInterstLungDis      26122       0.0048235       0.0692852               0       1.0000000
                                                    indMI                  26122       0.0099916       0.0994592               0       1.0000000
                                                    indNephSyn             26122     0.000689074       0.0262417               0       1.0000000
                                                    indNMSC                26122       0.0093025       0.0960017               0       1.0000000
                                                    indNonVertOsFrac       26122       0.0384733       0.1923396               0       1.0000000
                                                    indOppInf              26122       0.0159253       0.1251889               0       1.0000000
                                                    indPsoriasis           26122       0.0222418       0.1474718               0       1.0000000
                                                    indPSA                 26122       0.0245004       0.1545997               0       1.0000000
                                                    indRestrictLungDis     26122       0.0214762       0.1449680               0       1.0000000
                                                    indSolidCa             26122       0.0543220       0.2266564               0       1.0000000
                                                    indSpinalCordComp      26122       0.0044024       0.0662058               0       1.0000000
                                                    indUlcerColitis        26122       0.0147385       0.1205067               0       1.0000000
                                                    indUveitis             26122       0.0290177       0.1678593               0       1.0000000
                                                    indDiabetes            26122       0.3982467       0.4895462               0       1.0000000
                                                    indHT                  26122       0.8376847       0.3687469               0       1.0000000
                                                    indMetabSyn            26122       0.0218590       0.1462258               0       1.0000000
                                                    indNAFattyLiverDis     26122       0.0419187       0.2004072               0       1.0000000

                   TNF                      5929    indAmyloidosis          5929       0.0011806       0.0343430               0       1.0000000
                                                    indAortInsuffRegurg     5929       0.0290100       0.1678485               0       1.0000000
                                                    indApicalPulmFib        5929               0               0               0               0
                                                    indCaudaEquina          5929     0.000505988       0.0224904               0       1.0000000
                                                    indVertFrac             5929       0.0286726       0.1668988               0       1.0000000
                                                    indConductBlock         5929       0.0220948       0.1470043               0       1.0000000
                                                    indCrohnsDis            5929               0               0               0               0
                                                    indHematCa              5929       0.0047226       0.0685641               0       1.0000000
                                                    indHospInf              5929       0.1135099       0.3172418               0       1.0000000
                                                    indIgANeph              5929       0.0028673       0.0534745               0       1.0000000
                                                    indInterstLungDis       5929       0.0062405       0.0787567               0       1.0000000
                                                    indMI                   5929       0.0097824       0.0984295               0       1.0000000
                                                    indNephSyn              5929       0.0013493       0.0367111               0       1.0000000
                                                    indNMSC                 5929       0.0116377       0.1072577               0       1.0000000
                                                    indNonVertOsFrac        5929       0.0416596       0.1998270               0       1.0000000
                                                    indOppInf               5929       0.0323832       0.1770305               0       1.0000000
                                                    indPsoriasis            5929       0.0661157       0.2485052               0       1.0000000
                                                    indPSA                  5929       0.1044021       0.3058072               0       1.0000000
                                                    indRestrictLungDis      5929       0.0310339       0.1734240               0       1.0000000
                                                    indSolidCa              5929       0.0490808       0.2160549               0       1.0000000
                                                    indSpinalCordComp       5929       0.0038792       0.0621678               0       1.0000000
                                                    indUlcerColitis         5929       0.0386237       0.1927127               0       1.0000000
                                                    indUveitis              5929       0.0753921       0.2640453               0       1.0000000
                                                    indDiabetes             5929       0.3570585       0.4791727               0       1.0000000
                                                    indHT                   5929       0.7562827       0.4293603               0       1.0000000
                                                    indMetabSyn             5929       0.0288413       0.1673744               0       1.0000000
                                                    indNAFattyLiverDis      5929       0.0573453       0.2325207               0       1.0000000
     -------------------------------------------------------------------------------------------------------------------------------------------
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: There were 60010 observations read from the data set WORK.ALLCOVARIATES.
NOTE: The PROCEDURE MEANS printed pages 1-4.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.43 seconds
      cpu time            0.46 seconds
      

251        proc sql;
252          select database,
253                 catAge,
254                 min(age) as minAge,
255                 max(age) as maxAge,
256                 count(*) as n,
257                 sum(exposure3 = "TNF") as nTNF,
258                 sum(exposure3 = "DMARD") as nDMARD,
259                 sum(exposure3 = "NSAID or no exposure") as nNSAID
260          from Work.AllCovariates
261          group by database, catAge;
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   5

                                                cat
                                    database    Age      minAge    maxAge         n      nTNF    nDMARD    nNSAID
                                    -----------------------------------------------------------------------------
                                    MPCD                                          1         1         0         0
                                    MPCD        1-18          5        15        95        44        16        35
                                    MPCD        19-29        20        26       495       178        60       257
                                    MPCD        30-39        30        36       862       338        89       435
                                    MPCD        40-49        40        46      1031       366       117       548
                                    MPCD        50-59        50        56       962       247       128       587
                                    MPCD        60-69        60        66       588        85        55       448
                                    MPCD        70+          70        81       319        20        16       283
                                    Marketscan  1-18          5        18       394       169        57       168
                                    Marketscan  19-29        19        29      2262       827       223      1212
                                    Marketscan  30-39        30        39      3688      1291       364      2033
                                    Marketscan  40-49        40        49      4410      1560       503      2347
                                    Marketscan  50-59        50        59      4640      1372       580      2688
                                    Marketscan  60-69        60        69      2068       456       248      1364
                                    Marketscan  70+          70       100       951       104        70       777
                                    Medicare    19-29        20        29       843       254       108       481
                                    Medicare    30-39        30        39      2649       834       365      1450
                                    Medicare    40-49        40        49      4957      1283       711      2963
                                    Medicare    50-59        50        59      5749      1122       921      3706
                                    Medicare    60-69        60        69     10794      1546      1605      7643
                                    Medicare    70+          70       103     12252       890      1483      9879
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
262        quit;
NOTE: The PROCEDURE SQL printed page 5.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
      cpu time            0.12 seconds
      

263        
264        
265        /*
266        Fit 3-level model
267        3 levels of treatment exposure: TNF, DMARD, NSAID or no exposure
268        
269        Fit separate models for each data source: MPCD, Marketscan, Medicare
270        
271        Some parameters blow up; exlude these from the model estimation
272         */
273        %let db = MPCD;
274        proc logistic data = Work.allCovariates outest = Work.psBetas3Level;
275          where database = "&db";
276          class exposure3 (ref = "TNF")
277                catAge (ref = "70+")
278                sex (ref = "M")
279                / param = ref;
280          model exposure3 = catAge
281                            sex
282                            /* indAmyloidosis */
283                            indAortInsuffRegurg
284                            /* indApicalPulmFib */
285                            /* indCaudaEquina */
286                            indVertFrac
287                            /* indConductBlock */
288                            /* indCrohnsDis */
289                            indHematCa
290                            indHospInf
291                            indIgANeph
292                            /* indInterstLungDis */
293                            /* indMI */
294                            /* indNephSyn */
295                            /* indNMSC */
296                            indNonVertOsFrac
297                            indOppInf
298                            indPsoriasis
299                            indPSA
300                            indRestrictLungDis
301                            indSolidCa
302                            /* indSpinalCordComp */
5                                                                   The SAS System                                     16:44 Monday, November 27, 2017

303                            indUlcerColitis
304                            indUveitis
305                            indDiabetes
306                            indHT
307                            indMetabSyn
308                            indNAFattyLiverDis
309                            / link = glogit rsquare;
310          output out = Work.ps3Level predicted = ps xbeta = xbeta;
311        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   6

                                                                The LOGISTIC Procedure

                                                                  Model Information

                                                   Data Set                      WORK.ALLCOVARIATES
                                                   Response Variable             exposure3         
                                                   Number of Response Levels     3                 
                                                   Model                         generalized logit 
                                                   Optimization Technique        Newton-Raphson    


                                                       Number of Observations Read        4353
                                                       Number of Observations Used        4352


                                                                   Response Profile
 
                                                    Ordered                                  Total
                                                      Value     exposure3                Frequency

                                                          1     DMARD                          481
                                                          2     NSAID or no exposure          2593
                                                          3     TNF                           1278

                                            Logits modeled use exposure3='TNF' as the reference category.

NOTE: 1 observation was deleted due to missing values for the response or explanatory variables.
NOTE: PROC LOGISTIC is fitting the generalized logit model. The logits modeled contrast each response category against the reference category 
      (exposure3='TNF').


                                                               Class Level Information
 
                                              Class      Value                Design Variables

                                              catAge     1-18       1      0      0      0      0      0
                                                         19-29      0      1      0      0      0      0
                                                         30-39      0      0      1      0      0      0
                                                         40-49      0      0      0      1      0      0
                                                         50-59      0      0      0      0      1      0
                                                         60-69      0      0      0      0      0      1
                                                         70+        0      0      0      0      0      0

                                              SEX        F          1                                   
                                                         M          0                                   


                                                               Model Convergence Status

                                                    Convergence criterion (GCONV=1E-8) satisfied.          
NOTE: Convergence criterion (GCONV=1E-8) satisfied.


                                                                 Model Fit Statistics
 
                                                                                     Intercept
                                                                      Intercept            and
                                                        Criterion          Only     Covariates

                                                        AIC            7940.209       7579.592
                                                        SC             7952.966       7898.511
                                                        -2 Log L       7936.209       7479.592


                                                R-Square    0.0996    Max-rescaled R-Square    0.1188


 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   7

                                                                The LOGISTIC Procedure

                                                       Testing Global Null Hypothesis: BETA=0
 
                                               Test                 Chi-Square       DF     Pr > ChiSq

                                               Likelihood Ratio       456.6171       48         <.0001
                                               Score                  420.4769       48         <.0001
                                               Wald                   349.9819       48         <.0001


                                                             Type 3 Analysis of Effects
 
                                                                                    Wald
                                               Effect                   DF    Chi-Square    Pr > ChiSq

                                               catAge                   12      186.2272        <.0001
                                               SEX                       2        6.4372        0.0400
                                               indAortInsuffRegurg       2       13.7231        0.0010
                                               indVertFrac               2        2.5083        0.2853
                                               indHematCa                2        1.5274        0.4659
                                               indHospInf                2        1.4126        0.4935
                                               indIgANeph                2        1.4102        0.4941
                                               indNonVertOsFrac          2        0.0781        0.9617
                                               indOppInf                 2        0.5538        0.7581
                                               indPsoriasis              2        4.5813        0.1012
                                               indPSA                    2       39.1315        <.0001
                                               indRestrictLungDis        2        1.5443        0.4620
                                               indSolidCa                2        0.2153        0.8979
                                               indUlcerColitis           2        7.5138        0.0234
                                               indUveitis                2       15.6931        0.0004
                                               indDiabetes               2        5.8078        0.0548
                                               indHT                     2        0.1485        0.9284
                                               indMetabSyn               2        0.7451        0.6890
                                               indNAFattyLiverDis        2        1.9291        0.3812


                                                      Analysis of Maximum Likelihood Estimates
 
                                                                                            Standard          Wald
                     Parameter                    exposure3               DF    Estimate       Error    Chi-Square    Pr > ChiSq

                     Intercept                    DMARD                    1     -0.2445      0.3691        0.4389        0.5077
                     Intercept                    NSAID or no exposure     1      2.6460      0.2574      105.6469        <.0001
                     catAge              1-18     DMARD                    1     -0.8700      0.4686        3.4478        0.0633
                     catAge              1-18     NSAID or no exposure     1     -2.8657      0.3422       70.1483        <.0001
                     catAge              19-29    DMARD                    1     -0.9407      0.3930        5.7292        0.0167
                     catAge              19-29    NSAID or no exposure     1     -2.2707      0.2725       69.4507        <.0001
                     catAge              30-39    DMARD                    1     -1.1709      0.3784        9.5751        0.0020
                     catAge              30-39    NSAID or no exposure     1     -2.3504      0.2615       80.8184        <.0001
                     catAge              40-49    DMARD                    1     -0.9850      0.3689        7.1295        0.0076
                     catAge              40-49    NSAID or no exposure     1     -2.1965      0.2568       73.1534        <.0001
                     catAge              50-59    DMARD                    1     -0.4750      0.3648        1.6958        0.1928
                     catAge              50-59    NSAID or no exposure     1     -1.7307      0.2561       45.6638        <.0001
                     catAge              60-69    DMARD                    1     -0.2537      0.3863        0.4313        0.5113
                     catAge              60-69    NSAID or no exposure     1     -0.9953      0.2701       13.5753        0.0002
                     SEX                 F        DMARD                    1      0.2719      0.1092        6.1965        0.0128
                     SEX                 F        NSAID or no exposure     1      0.1123      0.0733        2.3443        0.1257
                     indAortInsuffRegurg          DMARD                    1     -1.1684      0.7848        2.2164        0.1366
                     indAortInsuffRegurg          NSAID or no exposure     1     -1.8927      0.5206       13.2171        0.0003
                     indVertFrac                  DMARD                    1     -1.5740      1.1186        1.9799        0.1594
                     indVertFrac                  NSAID or no exposure     1     -0.5199      0.4801        1.1729        0.2788
                     indHematCa                   DMARD                    1      1.5118      1.6353        0.8547        0.3552
                     indHematCa                   NSAID or no exposure     1     -0.0200      1.5699        0.0002        0.9898
                     indHospInf                   DMARD                    1      0.1271      0.4803        0.0700        0.7913
                     indHospInf                   NSAID or no exposure     1      0.3559      0.3163        1.2661        0.2605
                     indIgANeph                   DMARD                    1      1.0341      1.4275        0.5247        0.4688
                     indIgANeph                   NSAID or no exposure     1     -0.6470      1.4254        0.2061        0.6499
                     indNonVertOsFrac             DMARD                    1     -0.0881      0.5387        0.0268        0.8700
                     indNonVertOsFrac             NSAID or no exposure     1     -0.0979      0.3555        0.0758        0.7830
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   8

                                                                The LOGISTIC Procedure

                                                      Analysis of Maximum Likelihood Estimates
 
                                                                                            Standard          Wald
                     Parameter                    exposure3               DF    Estimate       Error    Chi-Square    Pr > ChiSq

                     indOppInf                    DMARD                    1      0.3143      0.7204        0.1904        0.6626
                     indOppInf                    NSAID or no exposure     1     -0.2111      0.5623        0.1409        0.7074
                     indPsoriasis                 DMARD                    1     -0.8203      0.4792        2.9297        0.0870
                     indPsoriasis                 NSAID or no exposure     1     -0.5196      0.3054        2.8949        0.0889
                     indPSA                       DMARD                    1     -0.0917      0.2761        0.1103        0.7398
                     indPSA                       NSAID or no exposure     1     -1.4700      0.2432       36.5323        <.0001
                     indRestrictLungDis           DMARD                    1     -0.0909      0.8745        0.0108        0.9172
                     indRestrictLungDis           NSAID or no exposure     1      0.5777      0.5447        1.1246        0.2889
                     indSolidCa                   DMARD                    1     -0.1614      0.4995        0.1044        0.7466
                     indSolidCa                   NSAID or no exposure     1      0.0503      0.3276        0.0236        0.8780
                     indUlcerColitis              DMARD                    1     -0.2979      0.4348        0.4693        0.4933
                     indUlcerColitis              NSAID or no exposure     1     -0.8211      0.3005        7.4693        0.0063
                     indUveitis                   DMARD                    1     -0.1166      0.2277        0.2624        0.6085
                     indUveitis                   NSAID or no exposure     1     -0.6292      0.1633       14.8403        0.0001
                     indDiabetes                  DMARD                    1      0.1454      0.1742        0.6967        0.4039
                     indDiabetes                  NSAID or no exposure     1      0.2808      0.1183        5.6338        0.0176
                     indHT                        DMARD                    1     -0.0179      0.1325        0.0183        0.8923
                     indHT                        NSAID or no exposure     1     -0.0339      0.0882        0.1472        0.7012
                     indMetabSyn                  DMARD                    1    -0.00492      0.5386        0.0001        0.9927
                     indMetabSyn                  NSAID or no exposure     1      0.2663      0.3493        0.5814        0.4458
                     indNAFattyLiverDis           DMARD                    1     -0.2232      0.4764        0.2195        0.6394
                     indNAFattyLiverDis           NSAID or no exposure     1     -0.4355      0.3138        1.9265        0.1651


                                                                 Odds Ratio Estimates
                                                                           
                                                                                            Point          95% Wald
                             Effect                              exposure3               Estimate      Confidence Limits

                             catAge              1-18  vs 70+    DMARD                      0.419       0.167       1.050
                             catAge              1-18  vs 70+    NSAID or no exposure       0.057       0.029       0.111
                             catAge              19-29 vs 70+    DMARD                      0.390       0.181       0.843
                             catAge              19-29 vs 70+    NSAID or no exposure       0.103       0.061       0.176
                             catAge              30-39 vs 70+    DMARD                      0.310       0.148       0.651
                             catAge              30-39 vs 70+    NSAID or no exposure       0.095       0.057       0.159
                             catAge              40-49 vs 70+    DMARD                      0.373       0.181       0.770
                             catAge              40-49 vs 70+    NSAID or no exposure       0.111       0.067       0.184
                             catAge              50-59 vs 70+    DMARD                      0.622       0.304       1.271
                             catAge              50-59 vs 70+    NSAID or no exposure       0.177       0.107       0.293
                             catAge              60-69 vs 70+    DMARD                      0.776       0.364       1.654
                             catAge              60-69 vs 70+    NSAID or no exposure       0.370       0.218       0.628
                             SEX                 F vs M          DMARD                      1.312       1.060       1.626
                             SEX                 F vs M          NSAID or no exposure       1.119       0.969       1.292
                             indAortInsuffRegurg                 DMARD                      0.311       0.067       1.447
                             indAortInsuffRegurg                 NSAID or no exposure       0.151       0.054       0.418
                             indVertFrac                         DMARD                      0.207       0.023       1.856
                             indVertFrac                         NSAID or no exposure       0.595       0.232       1.523
                             indHematCa                          DMARD                      4.535       0.184     111.826
                             indHematCa                          NSAID or no exposure       0.980       0.045      21.261
                             indHospInf                          DMARD                      1.136       0.443       2.911
                             indHospInf                          NSAID or no exposure       1.427       0.768       2.653
                             indIgANeph                          DMARD                      2.813       0.171      46.154
                             indIgANeph                          NSAID or no exposure       0.524       0.032       8.557
                             indNonVertOsFrac                    DMARD                      0.916       0.319       2.632
                             indNonVertOsFrac                    NSAID or no exposure       0.907       0.452       1.820
                             indOppInf                           DMARD                      1.369       0.334       5.620
                             indOppInf                           NSAID or no exposure       0.810       0.269       2.437
                             indPsoriasis                        DMARD                      0.440       0.172       1.126
                             indPsoriasis                        NSAID or no exposure       0.595       0.327       1.082
                             indPSA                              DMARD                      0.912       0.531       1.567
                             indPSA                              NSAID or no exposure       0.230       0.143       0.370
                             indRestrictLungDis                  DMARD                      0.913       0.164       5.069
                             indRestrictLungDis                  NSAID or no exposure       1.782       0.613       5.183
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017   9

                                                                The LOGISTIC Procedure

                                                                 Odds Ratio Estimates
                                                                           
                                                                                            Point          95% Wald
                             Effect                              exposure3               Estimate      Confidence Limits

                             indSolidCa                          DMARD                      0.851       0.320       2.265
                             indSolidCa                          NSAID or no exposure       1.052       0.553       1.998
                             indUlcerColitis                     DMARD                      0.742       0.317       1.741
                             indUlcerColitis                     NSAID or no exposure       0.440       0.244       0.793
                             indUveitis                          DMARD                      0.890       0.570       1.390
                             indUveitis                          NSAID or no exposure       0.533       0.387       0.734
                             indDiabetes                         DMARD                      1.157       0.822       1.627
                             indDiabetes                         NSAID or no exposure       1.324       1.050       1.670
                             indHT                               DMARD                      0.982       0.758       1.274
                             indHT                               NSAID or no exposure       0.967       0.813       1.149
                             indMetabSyn                         DMARD                      0.995       0.346       2.860
                             indMetabSyn                         NSAID or no exposure       1.305       0.658       2.588
                             indNAFattyLiverDis                  DMARD                      0.800       0.314       2.035
                             indNAFattyLiverDis                  NSAID or no exposure       0.647       0.350       1.197
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: There were 4353 observations read from the data set WORK.ALLCOVARIATES.
      WHERE database='MPCD';
NOTE: The data set WORK.PSBETAS3LEVEL has 1 observations and 56 variables.
NOTE: The data set WORK.PS3LEVEL has 13059 observations and 37 variables.
NOTE: The PROCEDURE LOGISTIC printed pages 6-9.
NOTE: PROCEDURE LOGISTIC used (Total process time):
      real time           0.82 seconds
      cpu time            0.65 seconds
      

312        proc datasets library = work nolist;
313          change psBetas3Level = psBetas3Level&db
314                 ps3Level = ps3Level&db;
315        run;

NOTE: Changing the name WORK.PSBETAS3LEVEL to WORK.PSBETAS3LEVELMPCD (memtype=DATA).
NOTE: Changing the name WORK.PS3LEVEL to WORK.PS3LEVELMPCD (memtype=DATA).
316        
317        %let db = Marketscan;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

318        proc logistic data = Work.allCovariates outest = Work.psBetas3Level;
319          where database = "&db";
320          class exposure3 (ref = "TNF")
321                catAge (ref = "70+")
322                sex (ref = "M")
323                / param = ref;
324          model exposure3 = catAge
325                            sex
326                            /* indAmyloidosis */
327                            indAortInsuffRegurg
328                            /* indApicalPulmFib */
329                            /* indCaudaEquina */
330                            indVertFrac
331                            indConductBlock
332                            /* indCrohnsDis */
333                            indHematCa
334                            indHospInf
335                            indIgANeph
336                            indInterstLungDis
337                            indMI
338                            /* indNephSyn */
339                            indNMSC
340                            indNonVertOsFrac
341                            indOppInf
342                            indPsoriasis
343                            indPSA
344                            indRestrictLungDis
345                            indSolidCa
346                            indSpinalCordComp
347                            indUlcerColitis
348                            indUveitis
349                            indDiabetes
350                            indHT
351                            indMetabSyn
6                                                                   The SAS System                                     16:44 Monday, November 27, 2017

352                            indNAFattyLiverDis
353                            / link = glogit rsquare;
354          output out = Work.ps3Level predicted = ps xbeta = xbeta;
355        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  10

                                                                The LOGISTIC Procedure

                                                                  Model Information

                                                   Data Set                      WORK.ALLCOVARIATES
                                                   Response Variable             exposure3         
                                                   Number of Response Levels     3                 
                                                   Model                         generalized logit 
                                                   Optimization Technique        Newton-Raphson    


                                                       Number of Observations Read       18413
                                                       Number of Observations Used       18413


                                                                   Response Profile
 
                                                    Ordered                                  Total
                                                      Value     exposure3                Frequency

                                                          1     DMARD                         2045
                                                          2     NSAID or no exposure         10589
                                                          3     TNF                           5779

                                            Logits modeled use exposure3='TNF' as the reference category.
NOTE: PROC LOGISTIC is fitting the generalized logit model. The logits modeled contrast each response category against the reference category 
      (exposure3='TNF').


                                                               Class Level Information
 
                                              Class      Value                Design Variables

                                              catAge     1-18       1      0      0      0      0      0
                                                         19-29      0      1      0      0      0      0
                                                         30-39      0      0      1      0      0      0
                                                         40-49      0      0      0      1      0      0
                                                         50-59      0      0      0      0      1      0
                                                         60-69      0      0      0      0      0      1
                                                         70+        0      0      0      0      0      0

                                              SEX        F          1                                   
                                                         M          0                                   


                                                               Model Convergence Status

                                                    Convergence criterion (GCONV=1E-8) satisfied.          
NOTE: Convergence criterion (GCONV=1E-8) satisfied.


                                                                 Model Fit Statistics
 
                                                                                     Intercept
                                                                      Intercept            and
                                                        Criterion          Only     Covariates

                                                        AIC           34102.682      33101.852
                                                        SC            34118.324      33571.101
                                                        -2 Log L      34098.682      32981.852


                                                R-Square    0.0589    Max-rescaled R-Square    0.0698


                                                       Testing Global Null Hypothesis: BETA=0
 
                                               Test                 Chi-Square       DF     Pr > ChiSq

                                               Likelihood Ratio      1116.8304       58         <.0001
                                               Score                 1062.0886       58         <.0001
                                               Wald                   933.6649       58         <.0001
 
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  11

                                                                The LOGISTIC Procedure

                                                             Type 3 Analysis of Effects
 
                                                                                    Wald
                                               Effect                   DF    Chi-Square    Pr > ChiSq

                                               catAge                   12      347.5924        <.0001
                                               SEX                       2       46.6854        <.0001
                                               indAortInsuffRegurg       2        7.9772        0.0185
                                               indVertFrac               2       24.0507        <.0001
                                               indConductBlock           2        0.0417        0.9794
                                               indHematCa                2       11.0538        0.0040
                                               indHospInf                2        8.8670        0.0119
                                               indIgANeph                2        2.9820        0.2251
                                               indInterstLungDis         2        0.7088        0.7016
                                               indMI                     2        0.4208        0.8102
                                               indNMSC                   2        3.0653        0.2160
                                               indNonVertOsFrac          2        4.0355        0.1330
                                               indOppInf                 2       28.8583        <.0001
                                               indPsoriasis              2       21.6926        <.0001
                                               indPSA                    2      167.8884        <.0001
                                               indRestrictLungDis        2        1.0312        0.5971
                                               indSolidCa                2       12.3870        0.0020
                                               indSpinalCordComp         2        3.4861        0.1750
                                               indUlcerColitis           2       70.1517        <.0001
                                               indUveitis                2       64.0705        <.0001
                                               indDiabetes               2        6.6000        0.0369
                                               indHT                     2       12.2930        0.0021
                                               indMetabSyn               2        7.1092        0.0286
                                               indNAFattyLiverDis        2       13.3506        0.0013


                                                      Analysis of Maximum Likelihood Estimates
 
                                                                                            Standard          Wald
                     Parameter                    exposure3               DF    Estimate       Error    Chi-Square    Pr > ChiSq

                     Intercept                    DMARD                    1     -0.5670      0.1690       11.2548        0.0008
                     Intercept                    NSAID or no exposure     1      2.1281      0.1143      346.7723        <.0001
                     catAge              1-18     DMARD                    1     -0.6334      0.2260        7.8574        0.0051
                     catAge              1-18     NSAID or no exposure     1     -2.0595      0.1574      171.2611        <.0001
                     catAge              19-29    DMARD                    1     -0.8527      0.1816       22.0382        <.0001
                     catAge              19-29    NSAID or no exposure     1     -1.6365      0.1211      182.6798        <.0001
                     catAge              30-39    DMARD                    1     -0.8179      0.1736       22.1944        <.0001
                     catAge              30-39    NSAID or no exposure     1     -1.5254      0.1166      171.0380        <.0001
                     catAge              40-49    DMARD                    1     -0.6979      0.1687       17.1172        <.0001
                     catAge              40-49    NSAID or no exposure     1     -1.5478      0.1143      183.4434        <.0001
                     catAge              50-59    DMARD                    1     -0.4199      0.1660        6.3942        0.0114
                     catAge              50-59    NSAID or no exposure     1     -1.2855      0.1130      129.3145        <.0001
                     catAge              60-69    DMARD                    1     -0.1631      0.1757        0.8619        0.3532
                     catAge              60-69    NSAID or no exposure     1     -0.8720      0.1202       52.6678        <.0001
                     SEX                 F        DMARD                    1      0.2871      0.0525       29.8535        <.0001
                     SEX                 F        NSAID or no exposure     1     -0.0505      0.0339        2.2119        0.1369
                     indAortInsuffRegurg          DMARD                    1     -0.2594      0.3324        0.6090        0.4352
                     indAortInsuffRegurg          NSAID or no exposure     1     -0.6309      0.2256        7.8236        0.0052
                     indVertFrac                  DMARD                    1     -0.4358      0.4338        1.0092        0.3151
                     indVertFrac                  NSAID or no exposure     1      0.8770      0.2274       14.8668        0.0001
                     indConductBlock              DMARD                    1     0.00120      0.3410        0.0000        0.9972
                     indConductBlock              NSAID or no exposure     1     -0.0411      0.2288        0.0322        0.8576
                     indHematCa                   DMARD                    1      1.7951      0.5410       11.0099        0.0009
                     indHematCa                   NSAID or no exposure     1      1.2078      0.4955        5.9414        0.0148
                     indHospInf                   DMARD                    1      0.2078      0.1390        2.2345        0.1350
                     indHospInf                   NSAID or no exposure     1      0.2852      0.0958        8.8546        0.0029
                     indIgANeph                   DMARD                    1     -0.7069      1.1038        0.4101        0.5219
                     indIgANeph                   NSAID or no exposure     1     -1.2957      0.7550        2.9454        0.0861
                     indInterstLungDis            DMARD                    1      0.1134      0.8843        0.0164        0.8980
                     indInterstLungDis            NSAID or no exposure     1     -0.4649      0.6810        0.4661        0.4948
                     indMI                        DMARD                    1     -0.3212      0.5188        0.3833        0.5358
                     indMI                        NSAID or no exposure     1     -0.1354      0.3146        0.1851        0.6670
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  12

                                                                The LOGISTIC Procedure

                                                      Analysis of Maximum Likelihood Estimates
 
                                                                                            Standard          Wald
                     Parameter                    exposure3               DF    Estimate       Error    Chi-Square    Pr > ChiSq

                     indNMSC                      DMARD                    1     -0.7942      0.4696        2.8597        0.0908
                     indNMSC                      NSAID or no exposure     1     -0.2634      0.2636        0.9987        0.3176
                     indNonVertOsFrac             DMARD                    1    -0.00107      0.2753        0.0000        0.9969
                     indNonVertOsFrac             NSAID or no exposure     1      0.3174      0.1773        3.2046        0.0734
                     indOppInf                    DMARD                    1     -0.1380      0.2616        0.2783        0.5978
                     indOppInf                    NSAID or no exposure     1     -1.1520      0.2213       27.1077        <.0001
                     indPsoriasis                 DMARD                    1     -0.1332      0.1780        0.5597        0.4544
                     indPsoriasis                 NSAID or no exposure     1     -0.6283      0.1366       21.1666        <.0001
                     indPSA                       DMARD                    1     -0.3588      0.1342        7.1469        0.0075
                     indPSA                       NSAID or no exposure     1     -1.3878      0.1074      166.9507        <.0001
                     indRestrictLungDis           DMARD                    1      0.1735      0.3036        0.3267        0.5676
                     indRestrictLungDis           NSAID or no exposure     1     -0.1051      0.2264        0.2152        0.6427
                     indSolidCa                   DMARD                    1      0.5454      0.1784        9.3467        0.0022
                     indSolidCa                   NSAID or no exposure     1      0.0289      0.1418        0.0415        0.8386
                     indSpinalCordComp            DMARD                    1      0.5665      0.9159        0.3826        0.5362
                     indSpinalCordComp            NSAID or no exposure     1      1.1315      0.6328        3.1975        0.0738
                     indUlcerColitis              DMARD                    1     -0.6525      0.2093        9.7181        0.0018
                     indUlcerColitis              NSAID or no exposure     1     -1.1623      0.1400       68.9444        <.0001
                     indUveitis                   DMARD                    1     -0.2290      0.1155        3.9305        0.0474
                     indUveitis                   NSAID or no exposure     1     -0.6130      0.0769       63.5396        <.0001
                     indDiabetes                  DMARD                    1      0.0419      0.0843        0.2466        0.6195
                     indDiabetes                  NSAID or no exposure     1      0.1388      0.0561        6.1205        0.0134
                     indHT                        DMARD                    1      0.0284      0.0611        0.2161        0.6421
                     indHT                        NSAID or no exposure     1     -0.1189      0.0401        8.7770        0.0031
                     indMetabSyn                  DMARD                    1      0.3162      0.1963        2.5948        0.1072
                     indMetabSyn                  NSAID or no exposure     1     -0.1729      0.1525        1.2863        0.2567
                     indNAFattyLiverDis           DMARD                    1     -0.6640      0.1930       11.8368        0.0006
                     indNAFattyLiverDis           NSAID or no exposure     1     -0.2433      0.1067        5.1997        0.0226


                                                                 Odds Ratio Estimates
                                                                           
                                                                                            Point          95% Wald
                             Effect                              exposure3               Estimate      Confidence Limits

                             catAge              1-18  vs 70+    DMARD                      0.531       0.341       0.827
                             catAge              1-18  vs 70+    NSAID or no exposure       0.128       0.094       0.174
                             catAge              19-29 vs 70+    DMARD                      0.426       0.299       0.609
                             catAge              19-29 vs 70+    NSAID or no exposure       0.195       0.154       0.247
                             catAge              30-39 vs 70+    DMARD                      0.441       0.314       0.620
                             catAge              30-39 vs 70+    NSAID or no exposure       0.218       0.173       0.273
                             catAge              40-49 vs 70+    DMARD                      0.498       0.358       0.693
                             catAge              40-49 vs 70+    NSAID or no exposure       0.213       0.170       0.266
                             catAge              50-59 vs 70+    DMARD                      0.657       0.475       0.910
                             catAge              50-59 vs 70+    NSAID or no exposure       0.277       0.222       0.345
                             catAge              60-69 vs 70+    DMARD                      0.850       0.602       1.199
                             catAge              60-69 vs 70+    NSAID or no exposure       0.418       0.330       0.529
                             SEX                 F vs M          DMARD                      1.332       1.202       1.477
                             SEX                 F vs M          NSAID or no exposure       0.951       0.890       1.016
                             indAortInsuffRegurg                 DMARD                      0.772       0.402       1.480
                             indAortInsuffRegurg                 NSAID or no exposure       0.532       0.342       0.828
                             indVertFrac                         DMARD                      0.647       0.276       1.513
                             indVertFrac                         NSAID or no exposure       2.404       1.539       3.754
                             indConductBlock                     DMARD                      1.001       0.513       1.953
                             indConductBlock                     NSAID or no exposure       0.960       0.613       1.503
                             indHematCa                          DMARD                      6.020       2.085      17.382
                             indHematCa                          NSAID or no exposure       3.346       1.267       8.837
                             indHospInf                          DMARD                      1.231       0.937       1.616
                             indHospInf                          NSAID or no exposure       1.330       1.102       1.605
                             indIgANeph                          DMARD                      0.493       0.057       4.291
                             indIgANeph                          NSAID or no exposure       0.274       0.062       1.202
                             indInterstLungDis                   DMARD                      1.120       0.198       6.337
                             indInterstLungDis                   NSAID or no exposure       0.628       0.165       2.386
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  13

                                                                The LOGISTIC Procedure

                                                                 Odds Ratio Estimates
                                                                           
                                                                                            Point          95% Wald
                             Effect                              exposure3               Estimate      Confidence Limits

                             indMI                               DMARD                      0.725       0.262       2.005
                             indMI                               NSAID or no exposure       0.873       0.471       1.618
                             indNMSC                             DMARD                      0.452       0.180       1.135
                             indNMSC                             NSAID or no exposure       0.768       0.458       1.288
                             indNonVertOsFrac                    DMARD                      0.999       0.582       1.713
                             indNonVertOsFrac                    NSAID or no exposure       1.374       0.970       1.944
                             indOppInf                           DMARD                      0.871       0.522       1.454
                             indOppInf                           NSAID or no exposure       0.316       0.205       0.488
                             indPsoriasis                        DMARD                      0.875       0.618       1.241
                             indPsoriasis                        NSAID or no exposure       0.534       0.408       0.697
                             indPSA                              DMARD                      0.699       0.537       0.909
                             indPSA                              NSAID or no exposure       0.250       0.202       0.308
                             indRestrictLungDis                  DMARD                      1.190       0.656       2.157
                             indRestrictLungDis                  NSAID or no exposure       0.900       0.578       1.403
                             indSolidCa                          DMARD                      1.725       1.216       2.447
                             indSolidCa                          NSAID or no exposure       1.029       0.779       1.359
                             indSpinalCordComp                   DMARD                      1.762       0.293      10.608
                             indSpinalCordComp                   NSAID or no exposure       3.100       0.897      10.716
                             indUlcerColitis                     DMARD                      0.521       0.345       0.785
                             indUlcerColitis                     NSAID or no exposure       0.313       0.238       0.411
                             indUveitis                          DMARD                      0.795       0.634       0.997
                             indUveitis                          NSAID or no exposure       0.542       0.466       0.630
                             indDiabetes                         DMARD                      1.043       0.884       1.230
                             indDiabetes                         NSAID or no exposure       1.149       1.029       1.282
                             indHT                               DMARD                      1.029       0.913       1.160
                             indHT                               NSAID or no exposure       0.888       0.821       0.961
                             indMetabSyn                         DMARD                      1.372       0.934       2.016
                             indMetabSyn                         NSAID or no exposure       0.841       0.624       1.134
                             indNAFattyLiverDis                  DMARD                      0.515       0.353       0.751
                             indNAFattyLiverDis                  NSAID or no exposure       0.784       0.636       0.966
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: There were 18413 observations read from the data set WORK.ALLCOVARIATES.
      WHERE database='Marketscan';
NOTE: The data set WORK.PSBETAS3LEVEL has 1 observations and 66 variables.
NOTE: The data set WORK.PS3LEVEL has 55239 observations and 37 variables.
NOTE: The PROCEDURE LOGISTIC printed pages 10-13.
NOTE: PROCEDURE LOGISTIC used (Total process time):
      real time           2.90 seconds
      cpu time            2.57 seconds
      

356        proc datasets library = work nolist;
357          change psBetas3Level = psBetas3Level&db
358                 ps3Level = ps3Level&db;
359        run;

NOTE: Changing the name WORK.PSBETAS3LEVEL to WORK.PSBETAS3LEVELMARKETSCAN (memtype=DATA).
NOTE: Changing the name WORK.PS3LEVEL to WORK.PS3LEVELMARKETSCAN (memtype=DATA).
360        
361        %let db = Medicare;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

362        proc logistic data = Work.allCovariates outest = Work.psBetas3Level;
363          where database = "&db";
364          class exposure3 (ref = "TNF")
365                catAge (ref = "70+")
366                sex (ref = "M")
367                / param = ref;
368          model exposure3 = catAge
369                            sex
370                            indAmyloidosis
371                            indAortInsuffRegurg
372                            /* indApicalPulmFib */
373                            indCaudaEquina
374                            indVertFrac
375                            indConductBlock
376                            /* indCrohnsDis */
377                            indHematCa
378                            indHospInf
379                            indIgANeph
380                            indInterstLungDis
381                            indMI
382                            indNephSyn
383                            indNMSC
384                            indNonVertOsFrac
385                            indOppInf
386                            indPsoriasis
387                            indPSA
388                            indRestrictLungDis
389                            indSolidCa
390                            indSpinalCordComp
391                            indUlcerColitis
392                            indUveitis
393                            indDiabetes
394                            indHT
395                            indMetabSyn
396                            indNAFattyLiverDis
397                            / link = glogit rsquare;
398          output out = Work.ps3Level predicted = ps xbeta = xbeta;
399        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  14

                                                                The LOGISTIC Procedure

                                                                  Model Information

                                                   Data Set                      WORK.ALLCOVARIATES
                                                   Response Variable             exposure3         
                                                   Number of Response Levels     3                 
                                                   Model                         generalized logit 
                                                   Optimization Technique        Newton-Raphson    


                                                       Number of Observations Read       37244
                                                       Number of Observations Used       37244


                                                                   Response Profile
 
                                                    Ordered                                  Total
                                                      Value     exposure3                Frequency

                                                          1     DMARD                         5193
                                                          2     NSAID or no exposure         26122
                                                          3     TNF                           5929

                                            Logits modeled use exposure3='TNF' as the reference category.
7                                                                   The SAS System                                     16:44 Monday, November 27, 2017

NOTE: PROC LOGISTIC is fitting the generalized logit model. The logits modeled contrast each response category against the reference category 
      (exposure3='TNF').


                                                               Class Level Information
 
                                                 Class      Value            Design Variables

                                                 catAge     19-29      1      0      0      0      0
                                                            30-39      0      1      0      0      0
                                                            40-49      0      0      1      0      0
                                                            50-59      0      0      0      1      0
                                                            60-69      0      0      0      0      1
                                                            70+        0      0      0      0      0

                                                 SEX        F          1                            
                                                            M          0                            


                                                               Model Convergence Status

                                                    Convergence criterion (GCONV=1E-8) satisfied.          
NOTE: Convergence criterion (GCONV=1E-8) satisfied.


                                                                 Model Fit Statistics
 
                                                                                     Intercept
                                                                      Intercept            and
                                                        Criterion          Only     Covariates

                                                        AIC           60788.587      57399.348
                                                        SC            60805.637      57944.964
                                                        -2 Log L      60784.587      57271.348


                                                R-Square    0.0900    Max-rescaled R-Square    0.1119


                                                       Testing Global Null Hypothesis: BETA=0
 
                                               Test                 Chi-Square       DF     Pr > ChiSq

                                               Likelihood Ratio      3513.2388       62         <.0001
                                               Score                 3602.0440       62         <.0001
                                               Wald                  3133.0241       62         <.0001
 
 
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  15

                                                                The LOGISTIC Procedure

                                                             Type 3 Analysis of Effects
 
                                                                                    Wald
                                               Effect                   DF    Chi-Square    Pr > ChiSq

                                               catAge                   10     1356.6714        <.0001
                                               SEX                       2      335.7729        <.0001
                                               indAmyloidosis            2        1.5369        0.4637
                                               indAortInsuffRegurg       2       11.7463        0.0028
                                               indCaudaEquina            2        1.7852        0.4096
                                               indVertFrac               2       23.1955        <.0001
                                               indConductBlock           2        1.9931        0.3692
                                               indHematCa                2       18.7159        <.0001
                                               indHospInf                2       59.8215        <.0001
                                               indIgANeph                2        0.3255        0.8498
                                               indInterstLungDis         2       14.1073        0.0009
                                               indMI                     2        1.2473        0.5360
                                               indNephSyn                2        1.1339        0.5672
                                               indNMSC                   2       15.2576        0.0005
                                               indNonVertOsFrac          2        0.0274        0.9864
                                               indOppInf                 2       49.6037        <.0001
                                               indPsoriasis              2       20.3437        <.0001
                                               indPSA                    2      447.8107        <.0001
                                               indRestrictLungDis        2       22.8936        <.0001
                                               indSolidCa                2        8.6653        0.0131
                                               indSpinalCordComp         2        1.0327        0.5967
                                               indUlcerColitis           2      125.9255        <.0001
                                               indUveitis                2      134.0679        <.0001
                                               indDiabetes               2        2.1803        0.3362
                                               indHT                     2        5.1536        0.0760
                                               indMetabSyn               2        2.5225        0.2833
                                               indNAFattyLiverDis        2        4.3212        0.1153


                                                      Analysis of Maximum Likelihood Estimates
 
                                                                                            Standard          Wald
                     Parameter                    exposure3               DF    Estimate       Error    Chi-Square    Pr > ChiSq

                     Intercept                    DMARD                    1      0.1780      0.0689        6.6811        0.0097
                     Intercept                    NSAID or no exposure     1      2.5317      0.0535     2243.3152        <.0001
                     catAge              19-29    DMARD                    1     -1.2294      0.1278       92.5335        <.0001
                     catAge              19-29    NSAID or no exposure     1     -1.7046      0.0904      355.2376        <.0001
                     catAge              30-39    DMARD                    1     -1.2450      0.0803      240.4681        <.0001
                     catAge              30-39    NSAID or no exposure     1     -1.7560      0.0601      853.3474        <.0001
                     catAge              40-49    DMARD                    1     -1.0376      0.0654      251.5996        <.0001
                     catAge              40-49    NSAID or no exposure     1     -1.5223      0.0507      901.7404        <.0001
                     catAge              50-59    DMARD                    1     -0.6933      0.0626      122.4741        <.0001
                     catAge              50-59    NSAID or no exposure     1     -1.1751      0.0502      547.0675        <.0001
                     catAge              60-69    DMARD                    1     -0.4507      0.0560       64.8301        <.0001
                     catAge              60-69    NSAID or no exposure     1     -0.7610      0.0456      278.8812        <.0001
                     SEX                 F        DMARD                    1      0.3759      0.0390       92.9401        <.0001
                     SEX                 F        NSAID or no exposure     1     -0.1906      0.0304       39.3420        <.0001
                     indAmyloidosis               DMARD                    1     -0.9116      0.8252        1.2202        0.2693
                     indAmyloidosis               NSAID or no exposure     1     -0.5026      0.5281        0.9058        0.3412
                     indAortInsuffRegurg          DMARD                    1     -0.2034      0.1161        3.0711        0.0797
                     indAortInsuffRegurg          NSAID or no exposure     1     -0.3171      0.0934       11.5197        0.0007
                     indCaudaEquina               DMARD                    1      0.8725      0.6946        1.5775        0.2091
                     indCaudaEquina               NSAID or no exposure     1      0.7831      0.6155        1.6184        0.2033
                     indVertFrac                  DMARD                    1    -0.00337      0.1121        0.0009        0.9760
                     indVertFrac                  NSAID or no exposure     1      0.3175      0.0892       12.6709        0.0004
                     indConductBlock              DMARD                    1     -0.1803      0.1309        1.8976        0.1684
                     indConductBlock              NSAID or no exposure     1     -0.0687      0.1039        0.4379        0.5082
                     indHematCa                   DMARD                    1      0.9846      0.2276       18.7115        <.0001
                     indHematCa                   NSAID or no exposure     1      0.7061      0.2062       11.7275        0.0006
                     indHospInf                   DMARD                    1      0.3996      0.0615       42.1873        <.0001
                     indHospInf                   NSAID or no exposure     1      0.3788      0.0507       55.7434        <.0001
                     indIgANeph                   DMARD                    1     -0.2180      0.3966        0.3022        0.5825
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  16

                                                                The LOGISTIC Procedure

                                                      Analysis of Maximum Likelihood Estimates
 
                                                                                            Standard          Wald
                     Parameter                    exposure3               DF    Estimate       Error    Chi-Square    Pr > ChiSq

                     indIgANeph                   NSAID or no exposure     1     -0.1279      0.3005        0.1812        0.6703
                     indInterstLungDis            DMARD                    1      0.2630      0.2215        1.4101        0.2350
                     indInterstLungDis            NSAID or no exposure     1     -0.3594      0.2029        3.1396        0.0764
                     indMI                        DMARD                    1     -0.1549      0.1953        0.6293        0.4276
                     indMI                        NSAID or no exposure     1     -0.1716      0.1546        1.2315        0.2671
                     indNephSyn                   DMARD                    1      0.5582      0.5304        1.1073        0.2927
                     indNephSyn                   NSAID or no exposure     1      0.2343      0.4771        0.2412        0.6234
                     indNMSC                      DMARD                    1     -0.4438      0.1866        5.6560        0.0174
                     indNMSC                      NSAID or no exposure     1     -0.5726      0.1466       15.2469        <.0001
                     indNonVertOsFrac             DMARD                    1      0.0154      0.0963        0.0255        0.8731
                     indNonVertOsFrac             NSAID or no exposure     1     0.00522      0.0781        0.0045        0.9467
                     indOppInf                    DMARD                    1     -0.2078      0.1145        3.2980        0.0694
                     indOppInf                    NSAID or no exposure     1     -0.6393      0.0965       43.9125        <.0001
                     indPsoriasis                 DMARD                    1     -0.1187      0.0972        1.4916        0.2220
                     indPsoriasis                 NSAID or no exposure     1     -0.3535      0.0814       18.8632        <.0001
                     indPSA                       DMARD                    1     -0.3335      0.0786       18.0170        <.0001
                     indPSA                       NSAID or no exposure     1     -1.3649      0.0679      403.5872        <.0001
                     indRestrictLungDis           DMARD                    1      0.0265      0.1109        0.0573        0.8109
                     indRestrictLungDis           NSAID or no exposure     1     -0.3363      0.0935       12.9271        0.0003
                     indSolidCa                   DMARD                    1      0.1174      0.0860        1.8640        0.1722
                     indSolidCa                   NSAID or no exposure     1     -0.0745      0.0712        1.0943        0.2955
                     indSpinalCordComp            DMARD                    1      0.2832      0.2835        0.9985        0.3177
                     indSpinalCordComp            NSAID or no exposure     1      0.1964      0.2395        0.6725        0.4122
                     indUlcerColitis              DMARD                    1      0.0213      0.1022        0.0435        0.8347
                     indUlcerColitis              NSAID or no exposure     1     -0.8260      0.0896       84.8954        <.0001
                     indUveitis                   DMARD                    1     -0.1024      0.0801        1.6321        0.2014
                     indUveitis                   NSAID or no exposure     1     -0.6814      0.0647      110.8004        <.0001
                     indDiabetes                  DMARD                    1      0.0219      0.0422        0.2685        0.6043
                     indDiabetes                  NSAID or no exposure     1      0.0465      0.0333        1.9532        0.1622
                     indHT                        DMARD                    1      0.1220      0.0537        5.1536        0.0232
                     indHT                        NSAID or no exposure     1      0.0518      0.0403        1.6511        0.1988
                     indMetabSyn                  DMARD                    1     -0.1173      0.1206        0.9463        0.3307
                     indMetabSyn                  NSAID or no exposure     1     -0.1487      0.0937        2.5189        0.1125
                     indNAFattyLiverDis           DMARD                    1     -0.0943      0.0871        1.1713        0.2791
                     indNAFattyLiverDis           NSAID or no exposure     1     -0.1406      0.0678        4.2979        0.0382


                                                                 Odds Ratio Estimates
                                                                           
                                                                                            Point          95% Wald
                             Effect                              exposure3               Estimate      Confidence Limits

                             catAge              19-29 vs 70+    DMARD                      0.292       0.228       0.376
                             catAge              19-29 vs 70+    NSAID or no exposure       0.182       0.152       0.217
                             catAge              30-39 vs 70+    DMARD                      0.288       0.246       0.337
                             catAge              30-39 vs 70+    NSAID or no exposure       0.173       0.154       0.194
                             catAge              40-49 vs 70+    DMARD                      0.354       0.312       0.403
                             catAge              40-49 vs 70+    NSAID or no exposure       0.218       0.198       0.241
                             catAge              50-59 vs 70+    DMARD                      0.500       0.442       0.565
                             catAge              50-59 vs 70+    NSAID or no exposure       0.309       0.280       0.341
                             catAge              60-69 vs 70+    DMARD                      0.637       0.571       0.711
                             catAge              60-69 vs 70+    NSAID or no exposure       0.467       0.427       0.511
                             SEX                 F vs M          DMARD                      1.456       1.349       1.572
                             SEX                 F vs M          NSAID or no exposure       0.826       0.779       0.877
                             indAmyloidosis                      DMARD                      0.402       0.080       2.026
                             indAmyloidosis                      NSAID or no exposure       0.605       0.215       1.703
                             indAortInsuffRegurg                 DMARD                      0.816       0.650       1.024
                             indAortInsuffRegurg                 NSAID or no exposure       0.728       0.606       0.875
                             indCaudaEquina                      DMARD                      2.393       0.613       9.336
                             indCaudaEquina                      NSAID or no exposure       2.188       0.655       7.312
                             indVertFrac                         DMARD                      0.997       0.800       1.242
                             indVertFrac                         NSAID or no exposure       1.374       1.153       1.636
                             indConductBlock                     DMARD                      0.835       0.646       1.079
 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  17

                                                                The LOGISTIC Procedure

                                                                 Odds Ratio Estimates
                                                                           
                                                                                            Point          95% Wald
                             Effect                              exposure3               Estimate      Confidence Limits

                             indConductBlock                     NSAID or no exposure       0.934       0.762       1.144
                             indHematCa                          DMARD                      2.677       1.713       4.182
                             indHematCa                          NSAID or no exposure       2.026       1.353       3.035
                             indHospInf                          DMARD                      1.491       1.322       1.682
                             indHospInf                          NSAID or no exposure       1.460       1.322       1.613
                             indIgANeph                          DMARD                      0.804       0.370       1.750
                             indIgANeph                          NSAID or no exposure       0.880       0.488       1.586
                             indInterstLungDis                   DMARD                      1.301       0.843       2.008
                             indInterstLungDis                   NSAID or no exposure       0.698       0.469       1.039
                             indMI                               DMARD                      0.856       0.584       1.256
                             indMI                               NSAID or no exposure       0.842       0.622       1.140
                             indNephSyn                          DMARD                      1.747       0.618       4.942
                             indNephSyn                          NSAID or no exposure       1.264       0.496       3.220
                             indNMSC                             DMARD                      0.642       0.445       0.925
                             indNMSC                             NSAID or no exposure       0.564       0.423       0.752
                             indNonVertOsFrac                    DMARD                      1.016       0.841       1.226
                             indNonVertOsFrac                    NSAID or no exposure       1.005       0.862       1.172
                             indOppInf                           DMARD                      0.812       0.649       1.017
                             indOppInf                           NSAID or no exposure       0.528       0.437       0.637
                             indPsoriasis                        DMARD                      0.888       0.734       1.074
                             indPsoriasis                        NSAID or no exposure       0.702       0.599       0.824
                             indPSA                              DMARD                      0.716       0.614       0.836
                             indPSA                              NSAID or no exposure       0.255       0.224       0.292
                             indRestrictLungDis                  DMARD                      1.027       0.826       1.276
                             indRestrictLungDis                  NSAID or no exposure       0.714       0.595       0.858
                             indSolidCa                          DMARD                      1.125       0.950       1.331
                             indSolidCa                          NSAID or no exposure       0.928       0.807       1.067
                             indSpinalCordComp                   DMARD                      1.327       0.762       2.314
                             indSpinalCordComp                   NSAID or no exposure       1.217       0.761       1.946
                             indUlcerColitis                     DMARD                      1.022       0.836       1.248
                             indUlcerColitis                     NSAID or no exposure       0.438       0.367       0.522
                             indUveitis                          DMARD                      0.903       0.771       1.056
                             indUveitis                          NSAID or no exposure       0.506       0.446       0.574
                             indDiabetes                         DMARD                      1.022       0.941       1.110
                             indDiabetes                         NSAID or no exposure       1.048       0.981       1.118
                             indHT                               DMARD                      1.130       1.017       1.255
                             indHT                               NSAID or no exposure       1.053       0.973       1.140
                             indMetabSyn                         DMARD                      0.889       0.702       1.126
                             indMetabSyn                         NSAID or no exposure       0.862       0.717       1.036
                             indNAFattyLiverDis                  DMARD                      0.910       0.767       1.079
                             indNAFattyLiverDis                  NSAID or no exposure       0.869       0.761       0.992
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: There were 37244 observations read from the data set WORK.ALLCOVARIATES.
      WHERE database='Medicare';
NOTE: The data set WORK.PSBETAS3LEVEL has 1 observations and 70 variables.
NOTE: The data set WORK.PS3LEVEL has 111732 observations and 37 variables.
NOTE: The PROCEDURE LOGISTIC printed pages 14-17.
NOTE: PROCEDURE LOGISTIC used (Total process time):
      real time           5.95 seconds
      cpu time            5.74 seconds
      

400        proc datasets library = work nolist;
401          change psBetas3Level = psBetas3Level&db
402                 ps3Level = ps3Level&db;
403        run;

NOTE: Changing the name WORK.PSBETAS3LEVEL to WORK.PSBETAS3LEVELMEDICARE (memtype=DATA).
NOTE: Changing the name WORK.PS3LEVEL to WORK.PS3LEVELMEDICARE (memtype=DATA).
404        

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

405        proc sql;
406          create table Work.ps3Level as
407            select * from ps3LevelMPCD union corr
408            select * from ps3LevelMarketscan union corr
409            select * from ps3LevelMedicare ;
NOTE: Table WORK.PS3LEVEL created, with 180030 rows and 37 columns.

410          create table Work.psBetas3Level as
411            select "MPCD" as database, * from psBetas3LevelMPCD union corr
412            select "Marketscan" as database, * from psBetas3LevelMarketscan union corr
413            select "Medicare" as database, * from psBetas3LevelMedicare ;
NOTE: Table WORK.PSBETAS3LEVEL created, with 3 rows and 55 columns.

414        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.98 seconds
      cpu time            1.41 seconds
      

415        
416        
417        /*
418        Check
419         */
420        proc sql;
421          select database, indexID,
422                 sum(ps) as sumPS
423            from Work.ps3Level
424            group by database, indexID
425            having calculated sumPS < 1 - 1e-12;
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  18

                                                            database     indexID     sumPS
                                                            ------------------------------
                                                            MPCD            6584          
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
426        quit;
NOTE: The PROCEDURE SQL printed page 18.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.27 seconds
      cpu time            0.18 seconds
      

427        
428        
429        /*
430        Union model coefficients from the 4-level model and the 3-level model
431         */
432        proc sql;
433          create table Work.psBetas as
434            select * from Work.psBetas3Level ;
8                                                                   The SAS System                                     16:44 Monday, November 27, 2017

NOTE: Table WORK.PSBETAS created, with 3 rows and 55 columns.

435        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.06 seconds
      cpu time            0.01 seconds
      

436        
437        
438        /*
439        Union propensity scores from the 4-level model and the 3-level model
440        Calculate IPTW
441         */
442        %let varlist = indexID, database, _level_, ps,
443                       age,
444                       catAge,
445                       sex,
446                       indAmyloidosis,
447                       indAortInsuffRegurg,
448                       indApicalPulmFib,
449                       indCaudaEquina,
450                       indVertFrac,
451                       indConductBlock,
452                       indCrohnsDis,
453                       indHematCa,
454                       indHospInf,
455                       indIgANeph,
456                       indInterstLungDis,
457                       indMI,
458                       indNephSyn,
459                       indNMSC,
460                       indNonVertOsFrac,
461                       indOppInf,
462                       indPsoriasis,
463                       indPSA,
464                       indRestrictLungDis,
465                       indSolidCa,
466                       indSpinalCordComp,
467                       indUlcerColitis,
468                       indUveitis,
469                       indDiabetes,
470                       indHT,
471                       indMetabSyn,
472                       indNAFattyLiverDis;
473        proc sql;
474          create table Work.ps as
475            select "3-level exposure" as model, exposure3 as exposure, &varlist from Work.ps3Level
476            order by indexID, model, exposure;
NOTE: At least one nonessential ordering column reference has been removed from an ORDER BY's reference list.
NOTE: Table WORK.PS created, with 180030 rows and 36 columns.

477          alter table Work.ps add iptw numeric;
NOTE: Table WORK.PS has been modified, with 37 columns.
478          update Work.ps set iptw = (exposure  = _level_) / ps + (exposure ^= _level_) / (1 - ps);
NOTE: 180030 rows were updated in WORK.PS.

479        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.27 seconds
      cpu time            1.17 seconds
      

480        
481        
482        /*
483        Determine common support region
484        For propensity of TNF
485         */
486        %let exposure = "TNF";
487        proc means data = Work.ps n nmiss min max mean median stddev;
488          where _level_ in (&exposure);
9                                                                   The SAS System                                     16:44 Monday, November 27, 2017

489          class model _level_ exposure;
490          var ps;
491        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  19

                                                                 The MEANS Procedure

                                                    Analysis Variable : ps Estimated Probability
 
model              Response Value         exposure                N Obs        N   N Miss        Minimum        Maximum           Mean         Median
-----------------------------------------------------------------------------------------------------------------------------------------------------
3-level exposure   TNF                    DMARD                    7719     7719        0      0.0187590      0.8159777      0.2206144      0.2053271

                                          NSAID or no exposure    39304    39304        0      0.0119670      0.8810972      0.1921808      0.1734892

                                          TNF                     12987    12986        1      0.0232841      0.9539496      0.2872355      0.2892991
-----------------------------------------------------------------------------------------------------------------------------------------------------

                                                     Analysis Variable : ps Estimated Probability
 
                                model              Response Value         exposure                N Obs        Std Dev
                                --------------------------------------------------------------------------------------
                                3-level exposure   TNF                    DMARD                    7719      0.1232166

                                                                          NSAID or no exposure    39304      0.1132506

                                                                          TNF                     12987      0.1279415
                                --------------------------------------------------------------------------------------
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: There were 60010 observations read from the data set WORK.PS.
      WHERE _level_='TNF';
NOTE: The PROCEDURE MEANS printed page 19.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.10 seconds
      cpu time            0.15 seconds
      

492        proc sql;
493          create table Work.commonSupportRegion as
494            select model,
495                   max(minPS) as commonSupportLowerBound,
496                   min(maxPS) as commonSupportUpperBound
497            from (select model, exposure,
498                         min(ps) as minPS,
499                         max(ps) as maxPS
500                  from Work.ps
501                  where _level_ in (&exposure)
502                  group by model, exposure)
503            group by model;
NOTE: Table WORK.COMMONSUPPORTREGION created, with 1 rows and 3 columns.

504          select * from Work.commonSupportRegion;
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  20

                                                                             common        common
                                                                            Support       Support
                                                     model               LowerBound    UpperBound
                                                     --------------------------------------------
                                                     3-level exposure      0.023284      0.815978
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
505          create table Work.temp as
506            select * from Work.ps where _level_ in (&exposure);
NOTE: Table WORK.TEMP created, with 60010 rows and 37 columns.

507          create table Work.ps as
508            select A.*,
509                   B.commonSupportLowerBound,
510                   B.commonSupportUpperBound,
511                   case
512                     when A.ps = . then .
513                     when B.commonSupportLowerBound <= A.ps <= B.commonSupportUpperBound then 1
514                     else 0
515                     end as indCommonSupport
516            from Work.temp A inner join
517                 Work.commonSupportRegion B on (A.model = B.model);
NOTE: Table WORK.PS created, with 60010 rows and 40 columns.

518          select model,
519                 exposure,
520                 _level_,
521                 sum(indCommonSupport = 1) as n1,
522                 sum(indCommonSupport = 1) / sum(^missing(indCommonSupport)) format = percent9.3 as prop1,
523                 sum(indCommonSupport = 0) as n0,
524                 sum(indCommonSupport = 0) / sum(^missing(indCommonSupport)) format = percent9.3 as prop0
525            from Work.ps
526            group by model, exposure, _level_;
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  21

                        model             exposure              Response Value              n1      prop1        n0      prop0
                        ------------------------------------------------------------------------------------------------------
                        3-level exposure  DMARD                 TNF                       7717   99.974%          2    0.026% 
                        3-level exposure  NSAID or no exposure  TNF                      39279   99.936%         25    0.064% 
                        3-level exposure  TNF                   TNF                      12980   99.954%          6    0.046% 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
527        quit;
NOTE: The PROCEDURE SQL printed pages 20-21.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.77 seconds
      cpu time            0.57 seconds
      

528        
529        
530        /*
531        Stabilize weights
532        
533        See
534        
535        Austin, P. C., and Stuart, E. A. (2015) Moving towards best practice when
536        using inverse probability of treatment weighting (IPTW) using the propensity
537        score to estimate causal treatment effects in observational studies. Statist.
538        Med., 34: 3661â€“3679. doi: 10.1002/sim.6607.
539         */
10                                                                  The SAS System                                     16:44 Monday, November 27, 2017

540        proc sql;
541          create table Work.temp as select * from Work.ps;
NOTE: Table WORK.TEMP created, with 60010 rows and 40 columns.

542          create table Work.ps as
543            select A.*,
544                   B.marginalPS,
545                   B.marginalPS * ((A.exposure  = A._level_) / A.ps +
546                                   (A.exposure ^= A._level_) / (1 - A.ps))
547                     as iptwStabilized
548            from Work.temp A inner join
549                 (select model,
550                         exposure,
551                         _level_,
552                         mean(ps) as marginalPS
553                  from Work.temp
554                  group by model, exposure, _level_) B on (A.model = B.model & A.exposure = B.exposure);
NOTE: Table WORK.PS created, with 60010 rows and 42 columns.

555          drop table Work.temp;
NOTE: Table WORK.TEMP has been dropped.
556        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.48 seconds
      cpu time            0.26 seconds
      

557        proc means data = Work.ps n nmiss min max mean median stddev maxdec = 3;
558          class indCommonSupport model exposure _level_;
559          var ps marginalPS iptw iptwStabilized;
560        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  22

                                                                 The MEANS Procedure

    indCommon                                                                                                                         N
      Support  model             exposure              Response Value        N Obs  Variable        Label                      N   Miss       Minimum
 ----------------------------------------------------------------------------------------------------------------------------------------------------
            0  3-level exposure  DMARD                 TNF                       2  ps              Estimated Probability      2      0         0.019
                                                                                    marginalPS                                 2      0         0.221
                                                                                    iptw                                       2      0         1.019
                                                                                    iptwStabilized                             2      0         0.225

                                 NSAID or no exposure  TNF                      25  ps              Estimated Probability     25      0         0.012
                                                                                    marginalPS                                25      0         0.192
                                                                                    iptw                                      25      0         1.012
                                                                                    iptwStabilized                            25      0         0.195

                                 TNF                   TNF                       6  ps              Estimated Probability      6      0         0.826
                                                                                    marginalPS                                 6      0         0.287
                                                                                    iptw                                       6      0         1.048
                                                                                    iptwStabilized                             6      0         0.301

            1  3-level exposure  DMARD                 TNF                    7717  ps              Estimated Probability   7717      0         0.023
                                                                                    marginalPS                              7717      0         0.221
                                                                                    iptw                                    7717      0         1.024
                                                                                    iptwStabilized                          7717      0         0.226

                                 NSAID or no exposure  TNF                   39279  ps              Estimated Probability  39279      0         0.023
                                                                                    marginalPS                             39279      0         0.192
                                                                                    iptw                                   39279      0         1.024
                                                                                    iptwStabilized                         39279      0         0.197

                                 TNF                   TNF                   12980  ps              Estimated Probability  12980      0         0.023
                                                                                    marginalPS                             12980      0         0.287
                                                                                    iptw                                   12980      0         1.226
                                                                                    iptwStabilized                         12980      0         0.352
 ----------------------------------------------------------------------------------------------------------------------------------------------------

    indCommon
      Support  model             exposure              Response Value        N Obs  Variable        Label                       Maximum          Mean
 ----------------------------------------------------------------------------------------------------------------------------------------------------
            0  3-level exposure  DMARD                 TNF                       2  ps              Estimated Probability         0.021         0.020
                                                                                    marginalPS                                    0.221         0.221
                                                                                    iptw                                          1.021         1.020
                                                                                    iptwStabilized                                0.225         0.225

                                 NSAID or no exposure  TNF                      25  ps              Estimated Probability         0.881         0.054
                                                                                    marginalPS                                    0.192         0.192
                                                                                    iptw                                          8.410         1.316
                                                                                    iptwStabilized                                1.616         0.253

                                 TNF                   TNF                       6  ps              Estimated Probability         0.954         0.890
                                                                                    marginalPS                                    0.287         0.287
                                                                                    iptw                                          1.210         1.128
                                                                                    iptwStabilized                                0.348         0.324

            1  3-level exposure  DMARD                 TNF                    7717  ps              Estimated Probability         0.816         0.221
                                                                                    marginalPS                                    0.221         0.221
                                                                                    iptw                                          5.434         1.324
                                                                                    iptwStabilized                                1.199         0.292

                                 NSAID or no exposure  TNF                   39279  ps              Estimated Probability         0.802         0.192
                                                                                    marginalPS                                    0.192         0.192
                                                                                    iptw                                          5.050         1.267
                                                                                    iptwStabilized                                0.971         0.244

                                 TNF                   TNF                   12980  ps              Estimated Probability         0.816         0.287
                                                                                    marginalPS                                    0.287         0.287
                                                                                    iptw                                         42.948         4.595
                                                                                    iptwStabilized                               12.336         1.320
 ----------------------------------------------------------------------------------------------------------------------------------------------------

 
                                                               modelPropensityScore.sas
                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  23

                                                                 The MEANS Procedure

    indCommon
      Support  model             exposure              Response Value        N Obs  Variable        Label                        Median       Std Dev
 ----------------------------------------------------------------------------------------------------------------------------------------------------
            0  3-level exposure  DMARD                 TNF                       2  ps              Estimated Probability         0.020         0.001
                                                                                    marginalPS                                    0.221         0.000
                                                                                    iptw                                          1.020         0.001
                                                                                    iptwStabilized                                0.225         0.000

                                 NSAID or no exposure  TNF                      25  ps              Estimated Probability         0.021         0.172
                                                                                    marginalPS                                    0.192         0.000
                                                                                    iptw                                          1.021         1.478
                                                                                    iptwStabilized                                0.196         0.284

                                 TNF                   TNF                       6  ps              Estimated Probability         0.896         0.061
                                                                                    marginalPS                                    0.287         0.000
                                                                                    iptw                                          1.118         0.077
                                                                                    iptwStabilized                                0.321         0.022

            1  3-level exposure  DMARD                 TNF                    7717  ps              Estimated Probability         0.205         0.123
                                                                                    marginalPS                                    0.221         0.000
                                                                                    iptw                                          1.259         0.279
                                                                                    iptwStabilized                                0.278         0.062

                                 NSAID or no exposure  TNF                   39279  ps              Estimated Probability         0.173         0.113
                                                                                    marginalPS                                    0.192         0.000
                                                                                    iptw                                          1.210         0.217
                                                                                    iptwStabilized                                0.233         0.042

                                 TNF                   TNF                   12980  ps              Estimated Probability         0.289         0.127
                                                                                    marginalPS                                    0.287         0.000
                                                                                    iptw                                          3.457         3.246
                                                                                    iptwStabilized                                0.993         0.932
 ----------------------------------------------------------------------------------------------------------------------------------------------------
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: There were 60010 observations read from the data set WORK.PS.
NOTE: The PROCEDURE MEANS printed pages 22-23.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.12 seconds
      cpu time            0.09 seconds
      

561        proc corr data = Work.ps;
562          var iptw iptwStabilized;
563        run;

                                                                  --- AS project ---                               16:44 Monday, November 27, 2017  24

                                                                  The CORR Procedure

                                                     2  Variables:    iptw           iptwStabilized 


                                                                  Simple Statistics
 
                           Variable                 N          Mean       Std Dev           Sum       Minimum       Maximum

                           iptw                 60009       1.99437       2.04643        119680       1.01211      42.94782
                           iptwStabilized       60009       0.48261       0.61921         28961       0.19451      12.33614


                                                     Pearson Correlation Coefficients, N = 60009 
                                                              Prob > |r| under H0: Rho=0
 
                                                                                             iptw
                                                                             iptw      Stabilized

                                                     iptw                 1.00000         0.99766
                                                                                           <.0001

                                                     iptwStabilized       0.99766         1.00000
                                                                           <.0001                
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                               modelPropensityScore.sas
NOTE: The PROCEDURE CORR printed page 24.
NOTE: PROCEDURE CORR used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

564        
565        
566        /*
567        Save output data files
568         */
569        proc sql;
570          create table DT.ps as
571            select *
572            from Work.ps;
NOTE: Table DT.PS created, with 60010 rows and 42 columns.

573          create table Work.psDeidentified as
574            select model,
575                   database,
576                   exposure,
577                   _level_,
578                   ps,
579                   indCommonSupport,
580                   iptw,
581                   marginalPS,
582                   iptwStabilized,
583                   age,
584                   catAge,
11                                                                  The SAS System                                     16:44 Monday, November 27, 2017

585                   sex,
586                   indAmyloidosis,
587                   indAortInsuffRegurg,
588                   indApicalPulmFib,
589                   indCaudaEquina,
590                   indVertFrac,
591                   indConductBlock,
592                   indCrohnsDis,
593                   indHematCa,
594                   indHospInf,
595                   indIgANeph,
596                   indInterstLungDis,
597                   indMI,
598                   indNephSyn,
599                   indNMSC,
600                   indNonVertOsFrac,
601                   indOppInf,
602                   indPsoriasis,
603                   indPSA,
604                   indRestrictLungDis,
605                   indSolidCa,
606                   indSpinalCordComp,
607                   indUlcerColitis,
608                   indUveitis,
609                   indDiabetes,
610                   indHT,
611                   indMetabSyn,
612                   indNAFattyLiverDis
613            from DT.ps;
NOTE: Table WORK.PSDEIDENTIFIED created, with 60010 rows and 39 columns.

614        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.46 seconds
      cpu time            0.17 seconds
      

615        proc export
616          data = Work.psBetas
617          outfile = "data\processed\psBetas.csv"
618          dbms = csv
619          replace;
620          delimiter = ",";
621        run;

622         /**********************************************************************
623         *   PRODUCT:   SAS
624         *   VERSION:   9.4
625         *   CREATOR:   External File Interface
626         *   DATE:      27NOV17
627         *   DESC:      Generated SAS Datastep Code
628         *   TEMPLATE SOURCE:  (None Specified.)
629         ***********************************************************************/
630            data _null_;
631            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
632            %let _EFIREC_ = 0;     /* clear export record count macro variable */
633            file 'data\processed\psBetas.csv' delimiter=',' DSD DROPOVER lrecl=32767;
634            if _n_ = 1 then        /* write column names or labels */
635             do;
636               put
637                  "database"
638               ','
639                  "_LINK_"
640               ','
641                  "_TYPE_"
642               ','
643                  "_STATUS_"
644               ','
645                  "_NAME_"
646               ','
647                  "Intercept_DMARD"
648               ','
12                                                                  The SAS System                                     16:44 Monday, November 27, 2017

649                  "Intercept_NSAID_or_no_exposure"
650               ','
651                  "catAge19N29_DMARD"
652               ','
653                  "catAge19N29_NSAID_or_no_exposure"
654               ','
655                  "catAge30N39_DMARD"
656               ','
657                  "catAge30N39_NSAID_or_no_exposure"
658               ','
659                  "catAge40N49_DMARD"
660               ','
661                  "catAge40N49_NSAID_or_no_exposure"
662               ','
663                  "catAge50N59_DMARD"
664               ','
665                  "catAge50N59_NSAID_or_no_exposure"
666               ','
667                  "catAge60N69_DMARD"
668               ','
669                  "catAge60N69_NSAID_or_no_exposure"
670               ','
671                  "SEXF_DMARD"
672               ','
673                  "SEXF_NSAID_or_no_exposure"
674               ','
675                  "indAortInsuffRegurg_DMARD"
676               ','
677                  "indAortInsuffRegurg_NSAID_or_no"
678               ','
679                  "indVertFrac_DMARD"
680               ','
681                  "indVertFrac_NSAID_or_no_exposure"
682               ','
683                  "indHematCa_DMARD"
684               ','
685                  "indHematCa_NSAID_or_no_exposure"
686               ','
687                  "indHospInf_DMARD"
688               ','
689                  "indHospInf_NSAID_or_no_exposure"
690               ','
691                  "indIgANeph_DMARD"
692               ','
693                  "indIgANeph_NSAID_or_no_exposure"
694               ','
695                  "indNonVertOsFrac_DMARD"
696               ','
697                  "indNonVertOsFrac_NSAID_or_no_exp"
698               ','
699                  "indOppInf_DMARD"
700               ','
701                  "indOppInf_NSAID_or_no_exposure"
702               ','
703                  "indPsoriasis_DMARD"
704               ','
705                  "indPsoriasis_NSAID_or_no_exposur"
706               ','
707                  "indPSA_DMARD"
708               ','
709                  "indPSA_NSAID_or_no_exposure"
710               ','
711                  "indRestrictLungDis_DMARD"
712               ','
713                  "indRestrictLungDis_NSAID_or_no_e"
714               ','
715                  "indSolidCa_DMARD"
716               ','
717                  "indSolidCa_NSAID_or_no_exposure"
718               ','
719                  "indUlcerColitis_DMARD"
720               ','
13                                                                  The SAS System                                     16:44 Monday, November 27, 2017

721                  "indUlcerColitis_NSAID_or_no_expo"
722               ','
723                  "indUveitis_DMARD"
724               ','
725                  "indUveitis_NSAID_or_no_exposure"
726               ','
727                  "indDiabetes_DMARD"
728               ','
729                  "indDiabetes_NSAID_or_no_exposure"
730               ','
731                  "indHT_DMARD"
732               ','
733                  "indHT_NSAID_or_no_exposure"
734               ','
735                  "indMetabSyn_DMARD"
736               ','
737                  "indMetabSyn_NSAID_or_no_exposure"
738               ','
739                  "indNAFattyLiverDis_DMARD"
740               ','
741                  "indNAFattyLiverDis_NSAID_or_no_e"
742               ','
743                  "_LNLIKE_"
744               ','
745                  "_ESTTYPE_"
746               ;
747             end;
748           set  WORK.PSBETAS   end=EFIEOD;
749               format database $10. ;
750               format _LINK_ $8. ;
751               format _TYPE_ $8. ;
752               format _STATUS_ $11. ;
753               format _NAME_ $9. ;
754               format Intercept_DMARD best12. ;
755               format Intercept_NSAID_or_no_exposure best12. ;
756               format catAge19N29_DMARD best12. ;
757               format catAge19N29_NSAID_or_no_exposure best12. ;
758               format catAge30N39_DMARD best12. ;
759               format catAge30N39_NSAID_or_no_exposure best12. ;
760               format catAge40N49_DMARD best12. ;
761               format catAge40N49_NSAID_or_no_exposure best12. ;
762               format catAge50N59_DMARD best12. ;
763               format catAge50N59_NSAID_or_no_exposure best12. ;
764               format catAge60N69_DMARD best12. ;
765               format catAge60N69_NSAID_or_no_exposure best12. ;
766               format SEXF_DMARD best12. ;
767               format SEXF_NSAID_or_no_exposure best12. ;
768               format indAortInsuffRegurg_DMARD best12. ;
769               format indAortInsuffRegurg_NSAID_or_no best12. ;
770               format indVertFrac_DMARD best12. ;
771               format indVertFrac_NSAID_or_no_exposure best12. ;
772               format indHematCa_DMARD best12. ;
773               format indHematCa_NSAID_or_no_exposure best12. ;
774               format indHospInf_DMARD best12. ;
775               format indHospInf_NSAID_or_no_exposure best12. ;
776               format indIgANeph_DMARD best12. ;
777               format indIgANeph_NSAID_or_no_exposure best12. ;
778               format indNonVertOsFrac_DMARD best12. ;
779               format indNonVertOsFrac_NSAID_or_no_exp best12. ;
780               format indOppInf_DMARD best12. ;
781               format indOppInf_NSAID_or_no_exposure best12. ;
782               format indPsoriasis_DMARD best12. ;
783               format indPsoriasis_NSAID_or_no_exposur best12. ;
784               format indPSA_DMARD best12. ;
785               format indPSA_NSAID_or_no_exposure best12. ;
786               format indRestrictLungDis_DMARD best12. ;
787               format indRestrictLungDis_NSAID_or_no_e best12. ;
788               format indSolidCa_DMARD best12. ;
789               format indSolidCa_NSAID_or_no_exposure best12. ;
790               format indUlcerColitis_DMARD best12. ;
791               format indUlcerColitis_NSAID_or_no_expo best12. ;
792               format indUveitis_DMARD best12. ;
14                                                                  The SAS System                                     16:44 Monday, November 27, 2017

793               format indUveitis_NSAID_or_no_exposure best12. ;
794               format indDiabetes_DMARD best12. ;
795               format indDiabetes_NSAID_or_no_exposure best12. ;
796               format indHT_DMARD best12. ;
797               format indHT_NSAID_or_no_exposure best12. ;
798               format indMetabSyn_DMARD best12. ;
799               format indMetabSyn_NSAID_or_no_exposure best12. ;
800               format indNAFattyLiverDis_DMARD best12. ;
801               format indNAFattyLiverDis_NSAID_or_no_e best12. ;
802               format _LNLIKE_ best12. ;
803               format _ESTTYPE_ $4. ;
804             do;
805               EFIOUT + 1;
806               put database $ @;
807               put _LINK_ $ @;
808               put _TYPE_ $ @;
809               put _STATUS_ $ @;
810               put _NAME_ $ @;
811               put Intercept_DMARD @;
812               put Intercept_NSAID_or_no_exposure @;
813               put catAge19N29_DMARD @;
814               put catAge19N29_NSAID_or_no_exposure @;
815               put catAge30N39_DMARD @;
816               put catAge30N39_NSAID_or_no_exposure @;
817               put catAge40N49_DMARD @;
818               put catAge40N49_NSAID_or_no_exposure @;
819               put catAge50N59_DMARD @;
820               put catAge50N59_NSAID_or_no_exposure @;
821               put catAge60N69_DMARD @;
822               put catAge60N69_NSAID_or_no_exposure @;
823               put SEXF_DMARD @;
824               put SEXF_NSAID_or_no_exposure @;
825               put indAortInsuffRegurg_DMARD @;
826               put indAortInsuffRegurg_NSAID_or_no @;
827               put indVertFrac_DMARD @;
828               put indVertFrac_NSAID_or_no_exposure @;
829               put indHematCa_DMARD @;
830               put indHematCa_NSAID_or_no_exposure @;
831               put indHospInf_DMARD @;
832               put indHospInf_NSAID_or_no_exposure @;
833               put indIgANeph_DMARD @;
834               put indIgANeph_NSAID_or_no_exposure @;
835               put indNonVertOsFrac_DMARD @;
836               put indNonVertOsFrac_NSAID_or_no_exp @;
837               put indOppInf_DMARD @;
838               put indOppInf_NSAID_or_no_exposure @;
839               put indPsoriasis_DMARD @;
840               put indPsoriasis_NSAID_or_no_exposur @;
841               put indPSA_DMARD @;
842               put indPSA_NSAID_or_no_exposure @;
843               put indRestrictLungDis_DMARD @;
844               put indRestrictLungDis_NSAID_or_no_e @;
845               put indSolidCa_DMARD @;
846               put indSolidCa_NSAID_or_no_exposure @;
847               put indUlcerColitis_DMARD @;
848               put indUlcerColitis_NSAID_or_no_expo @;
849               put indUveitis_DMARD @;
850               put indUveitis_NSAID_or_no_exposure @;
851               put indDiabetes_DMARD @;
852               put indDiabetes_NSAID_or_no_exposure @;
853               put indHT_DMARD @;
854               put indHT_NSAID_or_no_exposure @;
855               put indMetabSyn_DMARD @;
856               put indMetabSyn_NSAID_or_no_exposure @;
857               put indNAFattyLiverDis_DMARD @;
858               put indNAFattyLiverDis_NSAID_or_no_e @;
859               put _LNLIKE_ @;
860               put _ESTTYPE_ $ ;
861               ;
862             end;
863            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
864            if EFIEOD then call symputx('_EFIREC_',EFIOUT);
15                                                                  The SAS System                                     16:44 Monday, November 27, 2017

865            run;

NOTE: The file 'data\processed\psBetas.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\processed\psBetas.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=27Nov2017:16:45:02,
      Create Time=13Nov2017:10:43:08

NOTE: 4 records were written to the file 'data\processed\psBetas.csv'.
      The minimum record length was 672.
      The maximum record length was 1258.
NOTE: There were 3 observations read from the data set WORK.PSBETAS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

3 records created in data\processed\psBetas.csv from WORK.PSBETAS.
  
  
NOTE: "data\processed\psBetas.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      

866        proc export
867          data = Work.psDeidentified
868          outfile = "data\processed\psDeidentified.csv"
869          dbms = csv
870          replace;
871          delimiter = ",";
872        run;

873         /**********************************************************************
874         *   PRODUCT:   SAS
875         *   VERSION:   9.4
876         *   CREATOR:   External File Interface
877         *   DATE:      27NOV17
878         *   DESC:      Generated SAS Datastep Code
879         *   TEMPLATE SOURCE:  (None Specified.)
880         ***********************************************************************/
881            data _null_;
882            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
883            %let _EFIREC_ = 0;     /* clear export record count macro variable */
884            file 'data\processed\psDeidentified.csv' delimiter=',' DSD DROPOVER lrecl=32767;
885            if _n_ = 1 then        /* write column names or labels */
886             do;
887               put
888                  "model"
889               ','
890                  "database"
891               ','
892                  "exposure"
893               ','
894                  "_LEVEL_"
895               ','
896                  "ps"
897               ','
898                  "indCommonSupport"
899               ','
900                  "iptw"
901               ','
902                  "marginalPS"
903               ','
904                  "iptwStabilized"
905               ','
906                  "age"
907               ','
908                  "catAge"
909               ','
910                  "SEX"
16                                                                  The SAS System                                     16:44 Monday, November 27, 2017

911               ','
912                  "indAmyloidosis"
913               ','
914                  "indAortInsuffRegurg"
915               ','
916                  "indApicalPulmFib"
917               ','
918                  "indCaudaEquina"
919               ','
920                  "indVertFrac"
921               ','
922                  "indConductBlock"
923               ','
924                  "indCrohnsDis"
925               ','
926                  "indHematCa"
927               ','
928                  "indHospInf"
929               ','
930                  "indIgANeph"
931               ','
932                  "indInterstLungDis"
933               ','
934                  "indMI"
935               ','
936                  "indNephSyn"
937               ','
938                  "indNMSC"
939               ','
940                  "indNonVertOsFrac"
941               ','
942                  "indOppInf"
943               ','
944                  "indPsoriasis"
945               ','
946                  "indPSA"
947               ','
948                  "indRestrictLungDis"
949               ','
950                  "indSolidCa"
951               ','
952                  "indSpinalCordComp"
953               ','
954                  "indUlcerColitis"
955               ','
956                  "indUveitis"
957               ','
958                  "indDiabetes"
959               ','
960                  "indHT"
961               ','
962                  "indMetabSyn"
963               ','
964                  "indNAFattyLiverDis"
965               ;
966             end;
967           set  WORK.PSDEIDENTIFIED   end=EFIEOD;
968               format model $16. ;
969               format database $10. ;
970               format exposure $20. ;
971               format _LEVEL_ $20. ;
972               format ps best12. ;
973               format indCommonSupport best12. ;
974               format iptw best12. ;
975               format marginalPS best12. ;
976               format iptwStabilized best12. ;
977               format age best12. ;
978               format catAge $5. ;
979               format SEX $2. ;
980               format indAmyloidosis best12. ;
981               format indAortInsuffRegurg best12. ;
982               format indApicalPulmFib best12. ;
17                                                                  The SAS System                                     16:44 Monday, November 27, 2017

983               format indCaudaEquina best12. ;
984               format indVertFrac best12. ;
985               format indConductBlock best12. ;
986               format indCrohnsDis best12. ;
987               format indHematCa best12. ;
988               format indHospInf best12. ;
989               format indIgANeph best12. ;
990               format indInterstLungDis best12. ;
991               format indMI best12. ;
992               format indNephSyn best12. ;
993               format indNMSC best12. ;
994               format indNonVertOsFrac best12. ;
995               format indOppInf best12. ;
996               format indPsoriasis best12. ;
997               format indPSA best12. ;
998               format indRestrictLungDis best12. ;
999               format indSolidCa best12. ;
1000              format indSpinalCordComp best12. ;
1001              format indUlcerColitis best12. ;
1002              format indUveitis best12. ;
1003              format indDiabetes best12. ;
1004              format indHT best12. ;
1005              format indMetabSyn best12. ;
1006              format indNAFattyLiverDis best12. ;
1007            do;
1008              EFIOUT + 1;
1009              put model $ @;
1010              put database $ @;
1011              put exposure $ @;
1012              put _LEVEL_ $ @;
1013              put ps @;
1014              put indCommonSupport @;
1015              put iptw @;
1016              put marginalPS @;
1017              put iptwStabilized @;
1018              put age @;
1019              put catAge $ @;
1020              put SEX $ @;
1021              put indAmyloidosis @;
1022              put indAortInsuffRegurg @;
1023              put indApicalPulmFib @;
1024              put indCaudaEquina @;
1025              put indVertFrac @;
1026              put indConductBlock @;
1027              put indCrohnsDis @;
1028              put indHematCa @;
1029              put indHospInf @;
1030              put indIgANeph @;
1031              put indInterstLungDis @;
1032              put indMI @;
1033              put indNephSyn @;
1034              put indNMSC @;
1035              put indNonVertOsFrac @;
1036              put indOppInf @;
1037              put indPsoriasis @;
1038              put indPSA @;
1039              put indRestrictLungDis @;
1040              put indSolidCa @;
1041              put indSpinalCordComp @;
1042              put indUlcerColitis @;
1043              put indUveitis @;
1044              put indDiabetes @;
1045              put indHT @;
1046              put indMetabSyn @;
1047              put indNAFattyLiverDis ;
1048              ;
1049            end;
1050           if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
1051           if EFIEOD then call symputx('_EFIREC_',EFIOUT);
1052           run;

NOTE: The file 'data\processed\psDeidentified.csv' is:
18                                                                  The SAS System                                     16:44 Monday, November 27, 2017

      Filename=U:\studies\AS\pgms\bchan\data\processed\psDeidentified.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=27Nov2017:16:45:02,
      Create Time=13Nov2017:10:31:18

NOTE: 60011 records were written to the file 'data\processed\psDeidentified.csv'.
      The minimum record length was 104.
      The maximum record length was 452.
NOTE: There were 60010 observations read from the data set WORK.PSDEIDENTIFIED.
NOTE: DATA statement used (Total process time):
      real time           0.68 seconds
      cpu time            0.68 seconds
      

60010 records created in data\processed\psDeidentified.csv from WORK.PSDEIDENTIFIED.
  
  
NOTE: "data\processed\psDeidentified.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.84 seconds
      cpu time            0.84 seconds
      

1053       proc export
1054         data = Work.commonSupportRegion
1055         outfile = "data\processed\commonSupportRegion.csv"
1056         dbms = csv
1057         replace;
1058         delimiter = ",";
1059       run;

1060        /**********************************************************************
1061        *   PRODUCT:   SAS
1062        *   VERSION:   9.4
1063        *   CREATOR:   External File Interface
1064        *   DATE:      27NOV17
1065        *   DESC:      Generated SAS Datastep Code
1066        *   TEMPLATE SOURCE:  (None Specified.)
1067        ***********************************************************************/
1068           data _null_;
1069           %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
1070           %let _EFIREC_ = 0;     /* clear export record count macro variable */
1071           file 'data\processed\commonSupportRegion.csv' delimiter=',' DSD DROPOVER lrecl=32767;
1072           if _n_ = 1 then        /* write column names or labels */
1073            do;
1074              put
1075                 "model"
1076              ','
1077                 "commonSupportLowerBound"
1078              ','
1079                 "commonSupportUpperBound"
1080              ;
1081            end;
1082          set  WORK.COMMONSUPPORTREGION   end=EFIEOD;
1083              format model $16. ;
1084              format commonSupportLowerBound best12. ;
1085              format commonSupportUpperBound best12. ;
1086            do;
1087              EFIOUT + 1;
1088              put model $ @;
1089              put commonSupportLowerBound @;
1090              put commonSupportUpperBound ;
1091              ;
1092            end;
1093           if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
1094           if EFIEOD then call symputx('_EFIREC_',EFIOUT);
1095           run;

NOTE: The file 'data\processed\commonSupportRegion.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\processed\commonSupportRegion.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=27Nov2017:16:45:03,
19                                                                  The SAS System                                     16:44 Monday, November 27, 2017

      Create Time=13Nov2017:10:31:20

NOTE: 2 records were written to the file 'data\processed\commonSupportRegion.csv'.
      The minimum record length was 42.
      The maximum record length was 53.
NOTE: There were 1 observations read from the data set WORK.COMMONSUPPORTREGION.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1 records created in data\processed\commonSupportRegion.csv from WORK.COMMONSUPPORTREGION.
  
  
NOTE: "data\processed\commonSupportRegion.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

1096       
1097       
1098       ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           18.98 seconds
      cpu time            16.98 seconds
      
