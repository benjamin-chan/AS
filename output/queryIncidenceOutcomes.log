1                                                          The SAS System                             16:43 Tuesday, October 3, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70058223.
NOTE: This session is executing on the W32_ES08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_ES08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           0.12 seconds
      cpu time            0.15 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=queryIncidenceOutcomes; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: h:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
127        footnote "&pgm.";
128        * footnote2 "%sysfunc(datetime(),datetime14.)";
129        title1 '--- AS project ---';
130        **********************************************************************;
131        options macrogen mlogic mprint symbolgen;
132        options nomacrogen nomlogic nomprint nosymbolgen;
133        
134        
135        ods html
2                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

136          body = "output\&cmt..html"
137          style = Statistical;
NOTE: Writing HTML Body file: output\queryIncidenceOutcomes.html
138        
139        
140        /*
141        See the *Compact Outcome Definition* worksheet in `AS Project Cohort Outcome Codebook-20170410.xlsx`
142         */
143        
144        
145        /*
146        From: Xie, Fenglong [mailto:fenglongxie@uabmc.edu]
147        Sent: Wednesday, May 17, 2017 7:03 AM
148        To: Benjamin Chan <chanb@ohsu.edu>
149        Subject: RE: AS project data
150        
151        Hi, Ben
152        
153        The data are stored at UCB library defined as below email.
154        
155        Attached please find the cohort list.
156        
157        No exclusion was done except excluded for higher level exposure in six month
158        baseline.
159        
160        You need to do appropriate censor (such as censor for discontinues of
161        exposure, switch to same level or higher lever exposure ...).
162        
163        If you have question, please let me know.
164         */
165        
166        
167        /*
168        Call interstitial lung disease macro
169         */
170        %include "lib\IPP_2IPSOPplusPX_ILD.sas" / source2;
NOTE: %INCLUDE (level 1) file lib\IPP_2IPSOPplusPX_ILD.sas is file U:\studies\AS\pgms\bchan\lib\IPP_2IPSOPplusPX_ILD.sas.
171       +/*
172       +Interstitial lung disease;
173       +1)  One or more diagnosis codes for ILD from primary discharge
174       +Or
175       +2)  (Two or more diagnosis codes for ILD from secondary discharge or physician EMM ) plus one or more diagnosis tests within 90 days prior
175      !+to (inclusive) one of the diagnosis code for ILD
176       +*/
177       +%macro IPP_2IPSOPplusPX_ILD(outdata=,ids=,Dxs=, Pxs=);
178       +*DXs=diagnosis code in followup, Pxs=CPT code in follow up;
179       +*do not name outData as IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
180       +
181       +data IPPILD dxIPSILD dxOPILD;
182       +set &dxs();
183       +length dx1_date 4;
184       +format dx1_date mmddyy10.;
185       +dx1_date=min(ADMIT_DATE,  BEGIN_DATE);
186       +
187       +if dx in :('515','51630','51631','51632','51633','51634','51635','51636','51637',
188       +           '5164','5165','5166','5168','5169','71481');
189       +
190       +if enc_type='IP' and pdx='P'
191       +    then output IPPILD;
192       +if enc_type='IP' and pdx ne 'P'
193       +    then output dxIPSILD;
194       +if enc_type not in ('IP','IF', 'OT', " ")
195       +    then output dxOPILD;
196       +run;
197       +
198       +data dxIPSOPILD; *ILD from secondary discharge or physician EMM;
199       +set dxIPSILD dxOPILD;
200       +run;
201       +
202       +data pxILD; *diagnosis tests;
203       +set &pxs();
204       +if (px_type='09' and px in ('8741','8742')) or
3                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

205       +   (px_type='C1' and px in ('71250','71260','71270','71275','31625','31628',
206       +                             '31629','31632','31633','32095','32096','32097',
207       +                             '32098','32400','32405','32604','32606','32607',
208       +                             '32608','32609'));
209       +run;
210       +proc sort data=pxILD nodupkey; by &IDS px_date;run; * drop duplicate PX date and keep only one;
211       +
212       +proc sql;
213       +/*one or more diagnosis tests within 90 days prior to (inclusive) one of the diagnosis code for ILD*/
214       +create table dxpxIPSOPILD as
215       +select a.* , b.px_date
216       +from dxIPSOPILD as a
217       +    ,
218       +     pxILD as b
219       +where a.&IDS=b.&IDS and
220       +      min(b.ADMIT_DATE, b.BEGIN_DATE)-90<=b.px_date<=min(b.ADMIT_DATE, b.BEGIN_DATE);
221       +
222       +/* sencond DX code */
223       +create table IPSOPILD as
224       +select a.*, min(b.ADMIT_DATE, b.BEGIN_DATE) as DX2_date length=4 format mmddyy10.
225       +from dxpxIPSOPILD as a
226       +    ,
227       +     dxIPSOPILD(drop=dx1_date) as b
228       +where a.patid=b.patid and
229       +      (a.ADMIT_DATE ne b.ADMIT_DATE and a.BEGIN_DATE ne b.BEGIN_DATE)
230       +order by &IDS,ADMIT_DATE, BEGIN_DATE;
231       +quit;
232       +
233       +
234       +data &outData;
235       +set IPPILD IPSOPILD;
236       +length outcome $20 outcome_date outcome_start_date 4;
237       +format outcome_date outcome_start_date mmddyy10.;
238       +outcome="ILD";
239       +outcome_date=max(dx1_date, dx2_date, px_date);
240       +outcome_start_date=min(dx1_date, dx2_date, px_date);
241       +drop ADMIT_DATE BEGIN_DATE DISCHARGE_DATE END_DATE;
242       +run;
243       +
244       +proc sort data=&outData;
245       +by &IDS outcome_date descending outcome_start_date descending Enc_type;
246       +run;
247       +
248       +data &outData;
249       +set &outData;
250       +by &IDS outcome_date descending outcome_start_date;
251       +if first.outcome_date;
252       +run;
253       +
254       +proc datasets nolist;
255       +delete IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
256       +quit;run;
257       +%mend IPP_2IPSOPplusPX_ILD;
NOTE: %INCLUDE (level 1) ending.
258        %IPP_2IPSOPplusPX_ILD(outdata = Work.outcome_ILD_All,
259                              IDS = exposureID,
260                              Dxs = UCB.tempIncDxAll,
261                              Pxs = UCB.tempIncPxAll);

NOTE: There were 5129437 observations read from the data set UCB.TEMPINCDXALL.
NOTE: The data set WORK.IPPILD has 85 observations and 22 variables.
NOTE: The data set WORK.DXIPSILD has 1149 observations and 22 variables.
NOTE: The data set WORK.DXOPILD has 3877 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           2.63 seconds
      cpu time            2.63 seconds
      


NOTE: There were 1149 observations read from the data set WORK.DXIPSILD.
NOTE: There were 3877 observations read from the data set WORK.DXOPILD.
NOTE: The data set WORK.DXIPSOPILD has 5026 observations and 22 variables.
4                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      


NOTE: There were 7830153 observations read from the data set UCB.TEMPINCPXALL.
NOTE: The data set WORK.PXILD has 16323 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           2.38 seconds
      cpu time            2.38 seconds
      


NOTE: There were 16323 observations read from the data set WORK.PXILD.
NOTE: 690 observations with duplicate key values were deleted.
NOTE: The data set WORK.PXILD has 15633 observations and 20 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

NOTE: Table WORK.DXPXIPSOPILD created, with 13605 rows and 23 columns.

NOTE: Table WORK.IPSOPILD created, with 178759 rows and 24 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.26 seconds
      cpu time            0.40 seconds
      


NOTE: There were 85 observations read from the data set WORK.IPPILD.
NOTE: There were 178759 observations read from the data set WORK.IPSOPILD.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 178844 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds
      


NOTE: There were 178844 observations read from the data set WORK.OUTCOME_ILD_ALL.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 178844 observations and 23 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.17 seconds
      cpu time            0.31 seconds
      


NOTE: There were 178844 observations read from the data set WORK.OUTCOME_ILD_ALL.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 2156 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      


NOTE: Deleting WORK.IPPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSILD (memtype=DATA).
NOTE: Deleting WORK.DXOPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.PXILD (memtype=DATA).
NOTE: Deleting WORK.DXPXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.IPSOPILD (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

262        proc sql;
263          create table Work.ILD as
264            select database,
5                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

265                   exposure,
266                   patid,
267                   exposureStart,
268                   exposureEnd,
269                   exposureID,
270                   "Lung disease" as outcomeCategory,
271                   "Interstitial lung disease" as disease,
272                   outcome_start_date as begin_date
273            from Work.outcome_ILD_All;
NOTE: Table WORK.ILD created, with 2156 rows and 9 columns.

274          select database, exposure, disease, count(distinct exposureID) as n
275            from Work.ILD
276            group by database, exposure, disease;
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   1

                                             database    exposure     disease                           n
                                             ------------------------------------------------------------
                                             MPCD        No exposure  Interstitial lung disease         3
                                             Marketscan  DMARD        Interstitial lung disease         3
                                             Marketscan  No exposure  Interstitial lung disease         6
                                             Marketscan  TNF          Interstitial lung disease         5
                                             Medicare    DMARD        Interstitial lung disease        82
                                             Medicare    NSAID        Interstitial lung disease        82
                                             Medicare    No exposure  Interstitial lung disease       113
                                             Medicare    TNF          Interstitial lung disease        54
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
277        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

278        
279        
280        /*
281        Process fracture episodes data set
282         */
283        proc sql;
284          create table Work.fractures as
285            select database,
286                   exposure,
287                   patid,
288                   exposureStart,
289                   exposureEnd,
290                   exposureID,
291                   "Osteoporotic fracture" as outcomeCategory,
292                   fractureType as disease,
293                   fractureEpisodeStart as begin_date
294            from DT.fractureEpisodesInc
295            where ^missing(fractureType);
NOTE: Table WORK.FRACTURES created, with 6495 rows and 9 columns.

296          select database, exposure, disease, count(distinct exposureID) as n
297            from Work.fractures
298            group by database, exposure, disease;
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   2

                                   database    exposure              disease                                     n
                                   -------------------------------------------------------------------------------
                                   MPCD        DMARD                 Clinical vertebral fracture                 1
                                   MPCD        DMARD                 Non-vertebral osteoporotic fracture         4
                                   MPCD        NSAID or no exposure  Clinical vertebral fracture                45
                                   MPCD        NSAID or no exposure  Non-vertebral osteoporotic fracture        84
                                   MPCD        TNF                   Clinical vertebral fracture                13
                                   MPCD        TNF                   Non-vertebral osteoporotic fracture        19
                                   Marketscan  DMARD                 Clinical vertebral fracture                13
                                   Marketscan  DMARD                 Non-vertebral osteoporotic fracture        20
                                   Marketscan  NSAID or no exposure  Clinical vertebral fracture               211
                                   Marketscan  NSAID or no exposure  Non-vertebral osteoporotic fracture       161
                                   Marketscan  TNF                   Clinical vertebral fracture                30
                                   Marketscan  TNF                   Non-vertebral osteoporotic fracture        81
                                   Medicare    DMARD                 Clinical vertebral fracture               205
                                   Medicare    DMARD                 Non-vertebral osteoporotic fracture       281
                                   Medicare    NSAID or no exposure  Clinical vertebral fracture              1471
                                   Medicare    NSAID or no exposure  Non-vertebral osteoporotic fracture      1314
                                   Medicare    TNF                   Clinical vertebral fracture               228
                                   Medicare    TNF                   Non-vertebral osteoporotic fracture       331
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
299        quit;
NOTE: The PROCEDURE SQL printed page 2.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.06 seconds
      cpu time            0.07 seconds
      

300        
301        
302        /*
303        Process hospitalized infection data set
304         */
305        proc sql;
306          create table Work.hospInf as
307            select database,
308                   exposure,
309                   patid,
310                   exposureStart,
311                   exposureEnd,
312                   exposureID,
313                   "Infection" as outcomeCategory,
314                   "Hospitalized infection" as disease,
315                   outcome_start_date as begin_date
316            from DT.hospitalizedInfectionEpisodesInc;
NOTE: Table WORK.HOSPINF created, with 21840 rows and 9 columns.

317          select database, exposure, disease, count(distinct exposureID) as n
318            from Work.hospInf
6                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

319            group by database, exposure, disease;
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   3

                                              database    exposure     disease                        n
                                              ---------------------------------------------------------
                                              MPCD        DMARD        Hospitalized infection        11
                                              MPCD        NSAID        Hospitalized infection        16
                                              MPCD        No exposure  Hospitalized infection       174
                                              MPCD        TNF          Hospitalized infection        49
                                              Marketscan  DMARD        Hospitalized infection       123
                                              Marketscan  NSAID        Hospitalized infection       249
                                              Marketscan  No exposure  Hospitalized infection       526
                                              Marketscan  TNF          Hospitalized infection       371
                                              Medicare    DMARD        Hospitalized infection      1115
                                              Medicare    NSAID        Hospitalized infection      2406
                                              Medicare    No exposure  Hospitalized infection      3563
                                              Medicare    TNF          Hospitalized infection      1267
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
320        quit;
NOTE: The PROCEDURE SQL printed page 3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
      cpu time            0.12 seconds
      

321        
322        
323        /*
324        Process opportunistic infection data set
325         */
326        proc sql;
327          create table Work.oppInf as
328            select database,
329                   exposure,
330                   patid,
331                   exposureStart,
332                   exposureEnd,
333                   exposureID,
334                   "Infection" as outcomeCategory,
335                   "Opportunistic infection" as disease,
336                   outcome_start_date as begin_date
337            from DT.opportunInfectionEpisodesInc;
NOTE: Table WORK.OPPINF created, with 2167 rows and 9 columns.

338          select database, exposure, disease, count(distinct exposureID) as n
339            from Work.oppInf
340            group by database, exposure, disease;
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   4

                                              database    exposure     disease                         n
                                              ----------------------------------------------------------
                                              MPCD        DMARD        Opportunistic infection         3
                                              MPCD        NSAID        Opportunistic infection         4
                                              MPCD        No exposure  Opportunistic infection         9
                                              MPCD        TNF          Opportunistic infection        10
                                              Marketscan  DMARD        Opportunistic infection        18
                                              Marketscan  NSAID        Opportunistic infection        17
                                              Marketscan  No exposure  Opportunistic infection        32
                                              Marketscan  TNF          Opportunistic infection        46
                                              Medicare    DMARD        Opportunistic infection       149
                                              Medicare    NSAID        Opportunistic infection       316
                                              Medicare    No exposure  Opportunistic infection       351
                                              Medicare    TNF          Opportunistic infection       179
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
341        quit;
NOTE: The PROCEDURE SQL printed page 4.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

342        
343        
344        /*
345        Query for incident MI
346        
347        * Requires at least a 1-day inpatient admission
348         */
349        proc sql;
350          create table Work.incidentMI as
351            select C.database, C.exposureID, C.patid, C.exposure, C.exposureStart, C.exposureEnd,
352                   C.outcomeCategory,
353                   C.disease,
354                   C.begin_date
355            from (select A.*, B.outcomeCategory, B.disease
356                  from UCB.tempIncDxAll A inner join
357                       (select * from DT.defOutcomes where disease = "Myocardial infarction") B on (A.codeType = B.codeType & A.code = B.code)
358                  where B.disease = "Myocardial infarction"  &
359                        A.enc_type = "IP" &
360                        . < A.admit_date < A.discharge_date) C
361            order by C.database, C.exposureID, C.outcomeCategory, C.disease, C.begin_date;
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Table WORK.INCIDENTMI created, with 1866 rows and 9 columns.

362        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.23 seconds
      cpu time            0.99 seconds
      

363        
364        
365        /*
366        Process the data sets created by the cancer scripts
367         */
368        
7                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

369        
370        proc sql;
371        
372          create table Work.defOutcomes as
373            select *
374            from DT.defOutcomes
375            where disease ^in ("Interstitial lung disease",
376                               "Myocardial infarction",
377                               "Hospitalized infection",
378                               "Opportunistic infection");
NOTE: Table WORK.DEFOUTCOMES created, with 750 rows and 6 columns.

379          create table Work.lookupDisease as
380            select distinct outcomeCategory, disease
381            from DT.defOutcomes;
NOTE: Table WORK.LOOKUPDISEASE created, with 21 rows and 2 columns.

382          insert into Work.lookupDisease (outcomeCategory, disease)
383            values ("Osteoporotic fracture", "Clinical vertebral fracture")
384            values ("Osteoporotic fracture", "Non-vertebral osteoporotic fracture");
NOTE: 2 rows were inserted into WORK.LOOKUPDISEASE.

385        
386          %let select1 = select A.*, B.outcomeCategory, B.disease;
387          %let join1 = inner join Work.defOutcomes B on (A.codeType = B.codeType & A.code = B.code);
388          create table Work.incidentDisease as
389            select C.database, C.exposureID, C.patid, C.exposure, C.exposureStart, C.exposureEnd,
390                   C.outcomeCategory,
391                   C.disease,
392                   C.begin_date
393            from (&select1 from UCB.tempIncDxAll A &join1 union corr
394                  &select1 from UCB.tempIncPxAll A &join1 union corr
395                  select * from Work.ILD union corr
396                  select * from Work.incidentMI union corr
397                  select * from Work.hospInf union corr
398                  select * from Work.oppInf  union corr
399                  select * from Work.fractures) C
400            order by C.database, C.exposureID, C.outcomeCategory, C.disease, C.begin_date;
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Table WORK.INCIDENTDISEASE created, with 139292 rows and 9 columns.

401        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           3.74 seconds
      cpu time            4.82 seconds
      

402        
403        /*
404        Take first occurrence of outcome
405         */
406        proc sort data = Work.incidentDisease nodupkey;
407          by database exposureID outcomeCategory disease;
408        run;

NOTE: There were 139292 observations read from the data set WORK.INCIDENTDISEASE.
NOTE: 97622 observations with duplicate key values were deleted.
NOTE: The data set WORK.INCIDENTDISEASE has 41670 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.18 seconds
      

409        
410        /*
411        Join incident disease outcomes to exposure timelines
412        Summarize
413         */
414        proc sql;
415          create table DT.incidentDiseaseTimelines as
416            select A.*,
8                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

417                   B.begin_date format = mmddyy10. as outcomeDate,
418                   missing(B.begin_date) as censor,
419                   case
420                     when missing(B.begin_date) then daysExposed
421                     when ^missing(B.begin_date) then B.begin_date - A.exposureStart + 1
422                     else .
423                     end as daysToOutcome
424            from (select A.*, B.*
425                  from DT.exposureTimeline A,
426                       Work.lookupDisease B) A left join
427                 Work.incidentDisease B on (A.exposureID = B.exposureID &
428                                            A.outcomeCategory = B.outcomeCategory &
429                                            A.disease = B.disease);
NOTE: The execution of this query involves performing one or more Cartesian product joins that can not be optimized.
NOTE: Table DT.INCIDENTDISEASETIMELINES created, with 1380230 rows and 16 columns.

430          create table Work.incidence as
431            select database, exposure, outcomeCategory, disease,
432                   count(distinct exposureID) as n,
433                   sum(censor = 0) as incidence,
434                   sum(daysToOutcome) / 365.25 as personYears,
435                   sum(censor = 0) / (sum(daysToOutcome) / 365.25) * 1000 as incidencePer1000PY
436            from DT.incidentDiseaseTimelines
437            group by database, exposure, outcomeCategory, disease;
NOTE: Table WORK.INCIDENCE created, with 276 rows and 8 columns.

438          select * from Work.incidence;
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   5

                                                                                                                                         incidence
    database    exposure     Disease Category            Disease                                           n  incidence  personYears     Per1000PY
    ----------------------------------------------------------------------------------------------------------------------------------------------
    MPCD        DMARD        Cancer                      Hematologic Cancer                              481          1     426.4066       2.34518
    MPCD        DMARD        Cancer                      Non Melanoma Skin Cancer                        481          0     427.5565             0
    MPCD        DMARD        Cancer                      Solid Cancer                                    481          9     419.9316      21.43206
    MPCD        DMARD        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation       481          1     427.3511      2.339996
    MPCD        DMARD        Cardiac disease             Conduction Block                                481          0     427.5565             0
    MPCD        DMARD        Cardiac disease             Myocardial infarction                           481          0     427.5565             0
    MPCD        DMARD        Infection                   Hospitalized infection                          481         11     420.4709      26.16114
    MPCD        DMARD        Infection                   Opportunistic infection                         481          2     425.3634      4.701861
    MPCD        DMARD        Inflammatory bowel disease  Crohn’s Disease                                 481         15     415.6222      36.09047
    MPCD        DMARD        Inflammatory bowel disease  Ulcerative Colitis                              481          4     423.4716      9.445734
    MPCD        DMARD        Kidney disease              Amyloidosis                                     481          0     427.5565             0
    MPCD        DMARD        Kidney disease              IgA nephropathy                                 481          0     427.5565             0
    MPCD        DMARD        Kidney disease              Nephrotic syndrome                              481          0     427.5565             0
    MPCD        DMARD        Lung disease                Apical Pulmonary fibrosis                       481          0     427.5565             0
    MPCD        DMARD        Lung disease                Interstitial lung disease                       481          0     427.5565             0
    MPCD        DMARD        Lung disease                Restrictive lung disease                        481          0     427.5565             0
    MPCD        DMARD        Neurological Disease        Cauda Equina syndrome                           481          0     427.5565             0
    MPCD        DMARD        Neurological Disease        Spinal Cord compression                         481          0     427.5565             0
    MPCD        DMARD        Osteoporotic fracture       Clinical vertebral fracture                     481          3     428.5175      7.000882
    MPCD        DMARD        Osteoporotic fracture       Non-vertebral osteoporotic fracture             481         10     422.5243      23.66728
    MPCD        DMARD        PsO/PsA                     Psoriasis                                       481          4     421.3032       9.49435
    MPCD        DMARD        PsO/PsA                     Psoriatic arthritis                             481         21     411.2005      51.06997
    MPCD        DMARD        Uveitis                     Uveitis                                         481         26     398.1054      65.30934
    MPCD        NSAID        Cancer                      Hematologic Cancer                             1000          0     777.1034             0
    MPCD        NSAID        Cancer                      Non Melanoma Skin Cancer                       1000          0     777.1034             0
    MPCD        NSAID        Cancer                      Solid Cancer                                   1000         26      757.911      34.30482
    MPCD        NSAID        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      1000          4     771.2115      5.186645
    MPCD        NSAID        Cardiac disease             Conduction Block                               1000          4      771.384      5.185485
    MPCD        NSAID        Cardiac disease             Myocardial infarction                          1000          3     773.4675      3.878637
    MPCD        NSAID        Infection                   Hospitalized infection                         1000         16     762.3354      20.98814
    MPCD        NSAID        Infection                   Opportunistic infection                        1000          2      774.037      2.583856
    MPCD        NSAID        Inflammatory bowel disease  Crohn’s Disease                                1000         15     766.0014      19.58221
    MPCD        NSAID        Inflammatory bowel disease  Ulcerative Colitis                             1000          7     770.9541      9.079658
    MPCD        NSAID        Kidney disease              Amyloidosis                                    1000          0     777.1034             0
    MPCD        NSAID        Kidney disease              IgA nephropathy                                1000          1     776.7365      1.287438
    MPCD        NSAID        Kidney disease              Nephrotic syndrome                             1000          0     777.1034             0
    MPCD        NSAID        Lung disease                Apical Pulmonary fibrosis                      1000          0     777.1034             0
    MPCD        NSAID        Lung disease                Interstitial lung disease                      1000          0     777.1034             0
    MPCD        NSAID        Lung disease                Restrictive lung disease                       1000          9     773.0349      11.64242
    MPCD        NSAID        Neurological Disease        Cauda Equina syndrome                          1000          0     777.1034             0
    MPCD        NSAID        Neurological Disease        Spinal Cord compression                        1000          2     774.9049      2.580962
    MPCD        NSAID        Osteoporotic fracture       Clinical vertebral fracture                    1000         18     778.9405      23.10831
    MPCD        NSAID        Osteoporotic fracture       Non-vertebral osteoporotic fracture            1000         27      768.334      35.14097
    MPCD        NSAID        PsO/PsA                     Psoriasis                                      1000         10     769.8864      12.98893
    MPCD        NSAID        PsO/PsA                     Psoriatic arthritis                            1000          8       773.41       10.3438
    MPCD        NSAID        Uveitis                     Uveitis                                        1000         40     753.1253      53.11202
    MPCD        No exposure  Cancer                      Hematologic Cancer                             1593         15     1858.182      8.072406
    MPCD        No exposure  Cancer                      Non Melanoma Skin Cancer                       1593          0     1873.418             0
    MPCD        No exposure  Cancer                      Solid Cancer                                   1593         95     1752.914      54.19546
    MPCD        No exposure  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      1593         40     1809.925      22.10037
    MPCD        No exposure  Cardiac disease             Conduction Block                               1593         19     1851.912      10.25966
    MPCD        No exposure  Cardiac disease             Myocardial infarction                          1593         13     1863.031      6.977877
    MPCD        No exposure  Infection                   Hospitalized infection                         1593        174     1663.535      104.5966
    MPCD        No exposure  Infection                   Opportunistic infection                        1593          6     1869.175      3.209973
    MPCD        No exposure  Inflammatory bowel disease  Crohn’s Disease                                1593         62     1810.029       34.2536
    MPCD        No exposure  Inflammatory bowel disease  Ulcerative Colitis                             1593         36     1823.332      19.74407
    MPCD        No exposure  Kidney disease              Amyloidosis                                    1593          3     1872.216      1.602379
    MPCD        No exposure  Kidney disease              IgA nephropathy                                1593          1     1871.822      0.534239
    MPCD        No exposure  Kidney disease              Nephrotic syndrome                             1593          0     1873.418             0
    MPCD        No exposure  Lung disease                Apical Pulmonary fibrosis                      1593          1     1872.698      0.533989
    MPCD        No exposure  Lung disease                Interstitial lung disease                      1593          3     1872.591      1.602058
    MPCD        No exposure  Lung disease                Restrictive lung disease                       1593         40       1828.2      21.87945
    MPCD        No exposure  Neurological Disease        Cauda Equina syndrome                          1593          4     1868.767      2.140449
    MPCD        No exposure  Neurological Disease        Spinal Cord compression                        1593          4     1870.943      2.137959
    MPCD        No exposure  Osteoporotic fracture       Clinical vertebral fracture                    1593         28     1862.872      15.03055
    MPCD        No exposure  Osteoporotic fracture       Non-vertebral osteoporotic fracture            1593         44     1881.377      23.38712
    MPCD        No exposure  PsO/PsA                     Psoriasis                                      1593         31      1830.45      16.93572
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   6

                                                                                                                                         incidence
    database    exposure     Disease Category            Disease                                           n  incidence  personYears     Per1000PY
    ----------------------------------------------------------------------------------------------------------------------------------------------
    MPCD        No exposure  PsO/PsA                     Psoriatic arthritis                            1593         41     1832.709      22.37125
    MPCD        No exposure  Uveitis                     Uveitis                                        1593         88     1766.713      49.81001
    MPCD        TNF          Cancer                      Hematologic Cancer                             1279          3      1499.25      2.001001
    MPCD        TNF          Cancer                      Non Melanoma Skin Cancer                       1279          0     1503.488             0
    MPCD        TNF          Cancer                      Solid Cancer                                   1279         32     1469.333      21.77858
    MPCD        TNF          Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      1279         19     1488.123      12.76776
    MPCD        TNF          Cardiac disease             Conduction Block                               1279          4     1502.292      2.662599
    MPCD        TNF          Cardiac disease             Myocardial infarction                          1279          5     1499.066      3.335409
    MPCD        TNF          Infection                   Hospitalized infection                         1279         49     1461.818      33.51991
    MPCD        TNF          Infection                   Opportunistic infection                        1279          9     1497.221      6.011136
    MPCD        TNF          Inflammatory bowel disease  Crohn’s Disease                                1279         69      1430.16      48.24634
    MPCD        TNF          Inflammatory bowel disease  Ulcerative Colitis                             1279         37     1459.425      25.35245
    MPCD        TNF          Kidney disease              Amyloidosis                                    1279          0     1503.488             0
    MPCD        TNF          Kidney disease              IgA nephropathy                                1279          3     1500.882      1.998825
    MPCD        TNF          Kidney disease              Nephrotic syndrome                             1279          2     1500.526      1.332866
    MPCD        TNF          Lung disease                Apical Pulmonary fibrosis                      1279          0     1503.488             0
    MPCD        TNF          Lung disease                Interstitial lung disease                      1279          0     1503.488             0
    MPCD        TNF          Lung disease                Restrictive lung disease                       1279         12     1487.009      8.069891
    MPCD        TNF          Neurological Disease        Cauda Equina syndrome                          1279          0     1503.488             0
    MPCD        TNF          Neurological Disease        Spinal Cord compression                        1279          1      1502.76      0.665442
    MPCD        TNF          Osteoporotic fracture       Clinical vertebral fracture                    1279         24     1485.643      16.15462
    MPCD        TNF          Osteoporotic fracture       Non-vertebral osteoporotic fracture            1279         43     1480.298       29.0482
    MPCD        TNF          PsO/PsA                     Psoriasis                                      1279         51     1457.257      34.99727
    MPCD        TNF          PsO/PsA                     Psoriatic arthritis                            1279         81     1426.097      56.79837
    MPCD        TNF          Uveitis                     Uveitis                                        1279         78     1423.053      54.81174
    Marketscan  DMARD        Cancer                      Hematologic Cancer                             2045         18     1809.322      9.948476
    Marketscan  DMARD        Cancer                      Non Melanoma Skin Cancer                       2045         20     1809.139      11.05498
    Marketscan  DMARD        Cancer                      Solid Cancer                                   2045         82     1748.758      46.89041
    Marketscan  DMARD        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      2045         18     1812.156      9.932919
    Marketscan  DMARD        Cardiac disease             Conduction Block                               2045         15     1813.807      8.269899
    Marketscan  DMARD        Cardiac disease             Myocardial infarction                          2045          5      1820.58      2.746377
    Marketscan  DMARD        Infection                   Hospitalized infection                         2045        123     1721.229      71.46055
    Marketscan  DMARD        Infection                   Opportunistic infection                        2045         17     1808.214      9.401544
    Marketscan  DMARD        Inflammatory bowel disease  Crohn’s Disease                                2045         67     1754.913      38.17853
    Marketscan  DMARD        Inflammatory bowel disease  Ulcerative Colitis                             2045         47     1775.734      26.46792
    Marketscan  DMARD        Kidney disease              Amyloidosis                                    2045          0     1823.493             0
    Marketscan  DMARD        Kidney disease              IgA nephropathy                                2045          0     1823.493             0
    Marketscan  DMARD        Kidney disease              Nephrotic syndrome                             2045          2     1821.207      1.098173
    Marketscan  DMARD        Lung disease                Apical Pulmonary fibrosis                      2045          0     1823.493             0
    Marketscan  DMARD        Lung disease                Interstitial lung disease                      2045          3     1821.298      1.647177
    Marketscan  DMARD        Lung disease                Restrictive lung disease                       2045         15     1807.077      8.300696
    Marketscan  DMARD        Neurological Disease        Cauda Equina syndrome                          2045          1      1823.25      0.548471
    Marketscan  DMARD        Neurological Disease        Spinal Cord compression                        2045          4     1818.836      2.199208
    Marketscan  DMARD        Osteoporotic fracture       Clinical vertebral fracture                    2045         57     1723.565        33.071
    Marketscan  DMARD        Osteoporotic fracture       Non-vertebral osteoporotic fracture            2045         60     1736.816      34.54598
    Marketscan  DMARD        PsO/PsA                     Psoriasis                                      2045         56     1791.055      31.26648
    Marketscan  DMARD        PsO/PsA                     Psoriatic arthritis                            2045        121     1733.582      69.79766
    Marketscan  DMARD        Uveitis                     Uveitis                                        2045        114     1728.668      65.94673
    Marketscan  NSAID        Cancer                      Hematologic Cancer                             4893         21     4290.231      4.894841
    Marketscan  NSAID        Cancer                      Non Melanoma Skin Cancer                       4893         43     4270.188      10.06982
    Marketscan  NSAID        Cancer                      Solid Cancer                                   4893        165     4135.452       39.8989
    Marketscan  NSAID        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      4893         34     4272.244      7.958348
    Marketscan  NSAID        Cardiac disease             Conduction Block                               4893         51     4262.439      11.96498
    Marketscan  NSAID        Cardiac disease             Myocardial infarction                          4893         13      4292.81      3.028319
    Marketscan  NSAID        Infection                   Hospitalized infection                         4893        249      4106.42      60.63676
    Marketscan  NSAID        Infection                   Opportunistic infection                        4893         17     4289.322       3.96333
    Marketscan  NSAID        Inflammatory bowel disease  Crohn’s Disease                                4893         68      4242.93      16.02666
    Marketscan  NSAID        Inflammatory bowel disease  Ulcerative Colitis                             4893         38     4265.895      8.907862
    Marketscan  NSAID        Kidney disease              Amyloidosis                                    4893          0     4304.014             0
    Marketscan  NSAID        Kidney disease              IgA nephropathy                                4893          1     4302.979      0.232397
    Marketscan  NSAID        Kidney disease              Nephrotic syndrome                             4893          2     4300.003      0.465116
    Marketscan  NSAID        Lung disease                Apical Pulmonary fibrosis                      4893          0     4304.014             0
    Marketscan  NSAID        Lung disease                Interstitial lung disease                      4893          0     4304.014             0
    Marketscan  NSAID        Lung disease                Restrictive lung disease                       4893         28     4279.532      6.542772
    Marketscan  NSAID        Neurological Disease        Cauda Equina syndrome                          4893          0     4304.014             0
    Marketscan  NSAID        Neurological Disease        Spinal Cord compression                        4893         14     4292.712      3.261342
    Marketscan  NSAID        Osteoporotic fracture       Clinical vertebral fracture                    4893        155     4102.001      37.78643
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   7

                                                                                                                                         incidence
    database    exposure     Disease Category            Disease                                           n  incidence  personYears     Per1000PY
    ----------------------------------------------------------------------------------------------------------------------------------------------
    Marketscan  NSAID        Osteoporotic fracture       Non-vertebral osteoporotic fracture            4893        136     4096.255      33.20106
    Marketscan  NSAID        PsO/PsA                     Psoriasis                                      4893         70     4264.832      16.41331
    Marketscan  NSAID        PsO/PsA                     Psoriatic arthritis                            4893         79     4256.914      18.55804
    Marketscan  NSAID        Uveitis                     Uveitis                                        4893        240     4129.818      58.11394
    Marketscan  No exposure  Cancer                      Hematologic Cancer                             5696         41     4880.515      8.400753
    Marketscan  No exposure  Cancer                      Non Melanoma Skin Cancer                       5696         43     4893.944       8.78637
    Marketscan  No exposure  Cancer                      Solid Cancer                                   5696        233     4709.112      49.47855
    Marketscan  No exposure  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5696         84     4823.888      17.41334
    Marketscan  No exposure  Cardiac disease             Conduction Block                               5696        101     4825.188      20.93183
    Marketscan  No exposure  Cardiac disease             Myocardial infarction                          5696         45     4895.097      9.192873
    Marketscan  No exposure  Infection                   Hospitalized infection                         5696        526     4442.349      118.4058
    Marketscan  No exposure  Infection                   Opportunistic infection                        5696         31     4899.819      6.326764
    Marketscan  No exposure  Inflammatory bowel disease  Crohn’s Disease                                5696        165     4795.828      34.40491
    Marketscan  No exposure  Inflammatory bowel disease  Ulcerative Colitis                             5696        125     4826.467      25.89886
    Marketscan  No exposure  Kidney disease              Amyloidosis                                    5696          0     4930.313             0
    Marketscan  No exposure  Kidney disease              IgA nephropathy                                5696          6     4927.962      1.217542
    Marketscan  No exposure  Kidney disease              Nephrotic syndrome                             5696          2     4929.574      0.405715
    Marketscan  No exposure  Lung disease                Apical Pulmonary fibrosis                      5696          1     4929.536      0.202859
    Marketscan  No exposure  Lung disease                Interstitial lung disease                      5696          6     4924.999      1.218274
    Marketscan  No exposure  Lung disease                Restrictive lung disease                       5696         93      4853.96      19.15961
    Marketscan  No exposure  Neurological Disease        Cauda Equina syndrome                          5696          1     4929.941      0.202842
    Marketscan  No exposure  Neurological Disease        Spinal Cord compression                        5696         14      4923.48      2.843517
    Marketscan  No exposure  Osteoporotic fracture       Clinical vertebral fracture                    5696        153     4788.112      31.95414
    Marketscan  No exposure  Osteoporotic fracture       Non-vertebral osteoporotic fracture            5696        180     4764.997      37.77547
    Marketscan  No exposure  PsO/PsA                     Psoriasis                                      5696         94     4844.769      19.40237
    Marketscan  No exposure  PsO/PsA                     Psoriatic arthritis                            5696        111     4845.068       22.9099
    Marketscan  No exposure  Uveitis                     Uveitis                                        5696        312     4669.999      66.80944
    Marketscan  TNF          Cancer                      Hematologic Cancer                             5779         13     6701.862       1.93976
    Marketscan  TNF          Cancer                      Non Melanoma Skin Cancer                       5779         54     6668.197      8.098141
    Marketscan  TNF          Cancer                      Solid Cancer                                   5779        126     6579.168      19.15136
    Marketscan  TNF          Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5779         53     6654.765      7.964218
    Marketscan  TNF          Cardiac disease             Conduction Block                               5779         48     6671.368      7.194927
    Marketscan  TNF          Cardiac disease             Myocardial infarction                          5779         14     6709.095       2.08672
    Marketscan  TNF          Infection                   Hospitalized infection                         5779        371     6372.214      58.22153
    Marketscan  TNF          Infection                   Opportunistic infection                        5779         44      6686.65      6.580275
    Marketscan  TNF          Inflammatory bowel disease  Crohn’s Disease                                5779        306      6415.94      47.69371
    Marketscan  TNF          Inflammatory bowel disease  Ulcerative Colitis                             5779        181      6547.88      27.64254
    Marketscan  TNF          Kidney disease              Amyloidosis                                    5779          2     6715.915        0.2978
    Marketscan  TNF          Kidney disease              IgA nephropathy                                5779          8     6712.901      1.191735
    Marketscan  TNF          Kidney disease              Nephrotic syndrome                             5779          4     6712.307       0.59592
    Marketscan  TNF          Lung disease                Apical Pulmonary fibrosis                      5779          0     6716.854             0
    Marketscan  TNF          Lung disease                Interstitial lung disease                      5779          5     6713.068      0.744816
    Marketscan  TNF          Lung disease                Restrictive lung disease                       5779         51     6678.021      7.636994
    Marketscan  TNF          Neurological Disease        Cauda Equina syndrome                          5779          2      6713.09      0.297925
    Marketscan  TNF          Neurological Disease        Spinal Cord compression                        5779         12     6711.671       1.78793
    Marketscan  TNF          Osteoporotic fracture       Clinical vertebral fracture                    5779        186      6389.73      29.10921
    Marketscan  TNF          Osteoporotic fracture       Non-vertebral osteoporotic fracture            5779        190     6417.651      29.60585
    Marketscan  TNF          PsO/PsA                     Psoriasis                                      5779        244     6475.436      37.68086
    Marketscan  TNF          PsO/PsA                     Psoriatic arthritis                            5779        382     6325.689      60.38868
    Marketscan  TNF          Uveitis                     Uveitis                                        5779        375     6310.675      59.42312
    Medicare    DMARD        Cancer                      Hematologic Cancer                             5193        106      9021.38      11.74987
    Medicare    DMARD        Cancer                      Non Melanoma Skin Cancer                       5193        139     9004.704      15.43638
    Medicare    DMARD        Cancer                      Solid Cancer                                   5193        495     8408.542      58.86871
    Medicare    DMARD        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5193        249     8741.251      28.48562
    Medicare    DMARD        Cardiac disease             Conduction Block                               5193        221     8835.995      25.01133
    Medicare    DMARD        Cardiac disease             Myocardial infarction                          5193        106     9047.255      11.71626
    Medicare    DMARD        Infection                   Hospitalized infection                         5193       1115     7464.693      149.3698
    Medicare    DMARD        Infection                   Opportunistic infection                        5193        138     8993.402      15.34458
    Medicare    DMARD        Inflammatory bowel disease  Crohn’s Disease                                5193        328     8611.173      38.09005
    Medicare    DMARD        Inflammatory bowel disease  Ulcerative Colitis                             5193        178     8871.206      20.06492
    Medicare    DMARD        Kidney disease              Amyloidosis                                    5193          2     9174.836      0.217988
    Medicare    DMARD        Kidney disease              IgA nephropathy                                5193         11      9163.28      1.200444
    Medicare    DMARD        Kidney disease              Nephrotic syndrome                             5193         12     9157.202      1.310444
    Medicare    DMARD        Lung disease                Apical Pulmonary fibrosis                      5193          2     9171.554      0.218066
    Medicare    DMARD        Lung disease                Interstitial lung disease                      5193         82     9064.528      9.046251
    Medicare    DMARD        Lung disease                Restrictive lung disease                       5193        225     8786.749      25.60674
    Medicare    DMARD        Neurological Disease        Cauda Equina syndrome                          5193          1     9175.135       0.10899
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   8

                                                                                                                                         incidence
    database    exposure     Disease Category            Disease                                           n  incidence  personYears     Per1000PY
    ----------------------------------------------------------------------------------------------------------------------------------------------
    Medicare    DMARD        Neurological Disease        Spinal Cord compression                        5193         25     9139.127      2.735491
    Medicare    DMARD        Osteoporotic fracture       Clinical vertebral fracture                    5193        227     8868.159       25.5972
    Medicare    DMARD        Osteoporotic fracture       Non-vertebral osteoporotic fracture            5193        216     8835.277      24.44745
    Medicare    DMARD        PsO/PsA                     Psoriasis                                      5193        294     8669.944      33.91025
    Medicare    DMARD        PsO/PsA                     Psoriatic arthritis                            5193        390     8568.583      45.51511
    Medicare    DMARD        Uveitis                     Uveitis                                        5193        256     8722.294      29.35008
    Medicare    NSAID        Cancer                      Hematologic Cancer                            12847        202      19550.7      10.33211
    Medicare    NSAID        Cancer                      Non Melanoma Skin Cancer                      12847        382     19383.87      19.70711
    Medicare    NSAID        Cancer                      Solid Cancer                                  12847       1271     17917.05      70.93802
    Medicare    NSAID        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     12847        579      18981.4      30.50355
    Medicare    NSAID        Cardiac disease             Conduction Block                              12847        570      19023.3      29.96326
    Medicare    NSAID        Cardiac disease             Myocardial infarction                         12847        208     19590.67       10.6173
    Medicare    NSAID        Infection                   Hospitalized infection                        12847       2406      16565.9      145.2381
    Medicare    NSAID        Infection                   Opportunistic infection                       12847        290     19446.41      14.91278
    Medicare    NSAID        Inflammatory bowel disease  Crohn’s Disease                               12847        391     19265.85      20.29498
    Medicare    NSAID        Inflammatory bowel disease  Ulcerative Colitis                            12847        230     19508.19      11.78992
    Medicare    NSAID        Kidney disease              Amyloidosis                                   12847          7     19836.88      0.352878
    Medicare    NSAID        Kidney disease              IgA nephropathy                               12847         18     19820.46      0.908153
    Medicare    NSAID        Kidney disease              Nephrotic syndrome                            12847         11     19836.53      0.554532
    Medicare    NSAID        Lung disease                Apical Pulmonary fibrosis                     12847          3     19841.51      0.151198
    Medicare    NSAID        Lung disease                Interstitial lung disease                     12847         82     19686.06      4.165385
    Medicare    NSAID        Lung disease                Restrictive lung disease                      12847        397     19222.57      20.65281
    Medicare    NSAID        Neurological Disease        Cauda Equina syndrome                         12847         12     19824.04      0.605326
    Medicare    NSAID        Neurological Disease        Spinal Cord compression                       12847         65      19767.1      3.288292
    Medicare    NSAID        Osteoporotic fracture       Clinical vertebral fracture                   12847        594     19155.98      31.00859
    Medicare    NSAID        Osteoporotic fracture       Non-vertebral osteoporotic fracture           12847        571     19070.91      29.94088
    Medicare    NSAID        PsO/PsA                     Psoriasis                                     12847        395     19283.44       20.4839
    Medicare    NSAID        PsO/PsA                     Psoriatic arthritis                           12847        294     19432.15      15.12957
    Medicare    NSAID        Uveitis                     Uveitis                                       12847        502     19098.48      26.28481
    Medicare    No exposure  Cancer                      Hematologic Cancer                            13275        274     18807.26      14.56885
    Medicare    No exposure  Cancer                      Non Melanoma Skin Cancer                      13275        430     18680.51      23.01864
    Medicare    No exposure  Cancer                      Solid Cancer                                  13275       1588     16934.32      93.77407
    Medicare    No exposure  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     13275        840     17897.29      46.93449
    Medicare    No exposure  Cardiac disease             Conduction Block                              13275        862     18009.89      47.86258
    Medicare    No exposure  Cardiac disease             Myocardial infarction                         13275        388     18709.15      20.73852
    Medicare    No exposure  Infection                   Hospitalized infection                        13275       3563     14737.93      241.7571
    Medicare    No exposure  Infection                   Opportunistic infection                       13275        312     18759.41      16.63166
    Medicare    No exposure  Inflammatory bowel disease  Crohn’s Disease                               13275        578     18173.54      31.80447
    Medicare    No exposure  Inflammatory bowel disease  Ulcerative Colitis                            13275        331     18587.95      17.80724
    Medicare    No exposure  Kidney disease              Amyloidosis                                   13275         11      19107.3      0.575696
    Medicare    No exposure  Kidney disease              IgA nephropathy                               13275         41     19083.67      2.148434
    Medicare    No exposure  Kidney disease              Nephrotic syndrome                            13275         21     19094.44      1.099796
    Medicare    No exposure  Lung disease                Apical Pulmonary fibrosis                     13275          2     19128.53      0.104556
    Medicare    No exposure  Lung disease                Interstitial lung disease                     13275        113     18972.33      5.956044
    Medicare    No exposure  Lung disease                Restrictive lung disease                      13275        559     18264.42      30.60595
    Medicare    No exposure  Neurological Disease        Cauda Equina syndrome                         13275         27     19093.57      1.414088
    Medicare    No exposure  Neurological Disease        Spinal Cord compression                       13275         97     18973.28      5.112452
    Medicare    No exposure  Osteoporotic fracture       Clinical vertebral fracture                   13275        537     18750.29      28.63955
    Medicare    No exposure  Osteoporotic fracture       Non-vertebral osteoporotic fracture           13275        550     18684.05      29.43688
    Medicare    No exposure  PsO/PsA                     Psoriasis                                     13275        418     18434.04      22.67545
    Medicare    No exposure  PsO/PsA                     Psoriatic arthritis                           13275        389     18606.39       20.9068
    Medicare    No exposure  Uveitis                     Uveitis                                       13275        397     18471.44      21.49264
    Medicare    TNF          Cancer                      Hematologic Cancer                             5929         62     13469.13       4.60312
    Medicare    TNF          Cancer                      Non Melanoma Skin Cancer                       5929        182     13333.79      13.64953
    Medicare    TNF          Cancer                      Solid Cancer                                   5929        454     12623.51      35.96464
    Medicare    TNF          Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5929        253     13077.94      19.34556
    Medicare    TNF          Cardiac disease             Conduction Block                               5929        252      13160.4      19.14836
    Medicare    TNF          Cardiac disease             Myocardial infarction                          5929         94     13428.02      7.000286
    Medicare    TNF          Infection                   Hospitalized infection                         5929       1267     11276.34      112.3591
    Medicare    TNF          Infection                   Opportunistic infection                        5929        165     13293.45      12.41213
    Medicare    TNF          Inflammatory bowel disease  Crohn’s Disease                                5929        514     12406.99      41.42826
    Medicare    TNF          Inflammatory bowel disease  Ulcerative Colitis                             5929        272     12936.31      21.02609
    Medicare    TNF          Kidney disease              Amyloidosis                                    5929          9     13547.85      0.664312
    Medicare    TNF          Kidney disease              IgA nephropathy                                5929         21     13524.29      1.552762
    Medicare    TNF          Kidney disease              Nephrotic syndrome                             5929         20     13534.98      1.477652
    Medicare    TNF          Lung disease                Apical Pulmonary fibrosis                      5929          0     13568.65             0
    Medicare    TNF          Lung disease                Interstitial lung disease                      5929         54     13470.68      4.008707
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                                16:43 Tuesday, October 3, 2017   9

                                                                                                                                         incidence
    database    exposure     Disease Category            Disease                                           n  incidence  personYears     Per1000PY
    ----------------------------------------------------------------------------------------------------------------------------------------------
    Medicare    TNF          Lung disease                Restrictive lung disease                       5929        267     13062.03      20.44092
    Medicare    TNF          Neurological Disease        Cauda Equina syndrome                          5929         12     13538.79      0.886342
    Medicare    TNF          Neurological Disease        Spinal Cord compression                        5929         27     13526.53      1.996078
    Medicare    TNF          Osteoporotic fracture       Clinical vertebral fracture                    5929        235     13213.08       17.7854
    Medicare    TNF          Osteoporotic fracture       Non-vertebral osteoporotic fracture            5929        268     13084.11      20.48287
    Medicare    TNF          PsO/PsA                     Psoriasis                                      5929        488      12600.7      38.72801
    Medicare    TNF          PsO/PsA                     Psoriatic arthritis                            5929        648     12279.51      52.77084
    Medicare    TNF          Uveitis                     Uveitis                                        5929        503     12511.96      40.20152
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
439        
440        quit;
NOTE: The PROCEDURE SQL printed pages 5-9.
NOTE: PROCEDURE SQL used (Total process time):
      real time           5.89 seconds
      cpu time            7.67 seconds
      

441        
442        
443        proc export
444          data = Work.incidence
445          outfile = "data\processed\&cmt..csv"
446          dbms = csv
447          replace;
448          delimiter = ",";
449        run;

450         /**********************************************************************
451         *   PRODUCT:   SAS
452         *   VERSION:   9.4
453         *   CREATOR:   External File Interface
454         *   DATE:      03OCT17
455         *   DESC:      Generated SAS Datastep Code
456         *   TEMPLATE SOURCE:  (None Specified.)
457         ***********************************************************************/
458            data _null_;
459            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
460            %let _EFIREC_ = 0;     /* clear export record count macro variable */
461            file 'data\processed\queryIncidenceOutcomes.csv' delimiter=',' DSD DROPOVER lrecl=32767;
462            if _n_ = 1 then        /* write column names or labels */
463             do;
464               put
465                  "database"
466               ','
467                  "exposure"
468               ','
469                  "outcomeCategory"
470               ','
471                  "Disease"
472               ','
473                  "n"
474               ','
475                  "incidence"
476               ','
9                                                                   The SAS System                                      16:43 Tuesday, October 3, 2017

477                  "personYears"
478               ','
479                  "incidencePer1000PY"
480               ;
481             end;
482           set  WORK.INCIDENCE   end=EFIEOD;
483               format database $10. ;
484               format exposure $11. ;
485               format outcomeCategory $26. ;
486               format Disease $41. ;
487               format n best12. ;
488               format incidence best12. ;
489               format personYears best12. ;
490               format incidencePer1000PY best12. ;
491             do;
492               EFIOUT + 1;
493               put database $ @;
494               put exposure $ @;
495               put outcomeCategory $ @;
496               put Disease $ @;
497               put n @;
498               put incidence @;
499               put personYears @;
500               put incidencePer1000PY ;
501               ;
502             end;
503            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
504            if EFIEOD then call symputx('_EFIREC_',EFIOUT);
505            run;

NOTE: The file 'data\processed\queryIncidenceOutcomes.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\processed\queryIncidenceOutcomes.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=03Oct2017:16:43:48,
      Create Time=29Sep2017:08:01:03

NOTE: 277 records were written to the file 'data\processed\queryIncidenceOutcomes.csv'.
      The minimum record length was 57.
      The maximum record length was 115.
NOTE: There were 276 observations read from the data set WORK.INCIDENCE.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

276 records created in data\processed\queryIncidenceOutcomes.csv from WORK.INCIDENCE.
  
  
NOTE: "data\processed\queryIncidenceOutcomes.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.43 seconds
      cpu time            0.10 seconds
      

506        
507        
508        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           17.89 seconds
      cpu time            20.48 seconds
      
