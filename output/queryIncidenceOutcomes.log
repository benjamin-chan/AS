1                                                          The SAS System                           13:40 Wednesday, October 4, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70058223.
NOTE: This session is executing on the W32_ES08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_ES08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           0.23 seconds
      cpu time            0.07 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=queryIncidenceOutcomes; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: h:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
127        footnote "&pgm.";
128        * footnote2 "%sysfunc(datetime(),datetime14.)";
129        title1 '--- AS project ---';
130        **********************************************************************;
131        options macrogen mlogic mprint symbolgen;
132        options nomacrogen nomlogic nomprint nosymbolgen;
133        
134        
135        ods html
2                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

136          body = "output\&cmt..html"
137          style = Statistical;
NOTE: Writing HTML Body file: output\queryIncidenceOutcomes.html
138        
139        
140        /*
141        See the *Compact Outcome Definition* worksheet in `AS Project Cohort Outcome Codebook-20170410.xlsx`
142         */
143        
144        
145        /*
146        From: Xie, Fenglong [mailto:fenglongxie@uabmc.edu]
147        Sent: Wednesday, May 17, 2017 7:03 AM
148        To: Benjamin Chan <chanb@ohsu.edu>
149        Subject: RE: AS project data
150        
151        Hi, Ben
152        
153        The data are stored at UCB library defined as below email.
154        
155        Attached please find the cohort list.
156        
157        No exclusion was done except excluded for higher level exposure in six month
158        baseline.
159        
160        You need to do appropriate censor (such as censor for discontinues of
161        exposure, switch to same level or higher lever exposure ...).
162        
163        If you have question, please let me know.
164         */
165        
166        
167        /*
168        Call interstitial lung disease macro
169         */
170        %include "lib\IPP_2IPSOPplusPX_ILD.sas" / source2;
NOTE: %INCLUDE (level 1) file lib\IPP_2IPSOPplusPX_ILD.sas is file U:\studies\AS\pgms\bchan\lib\IPP_2IPSOPplusPX_ILD.sas.
171       +/*
172       +Interstitial lung disease;
173       +1)  One or more diagnosis codes for ILD from primary discharge
174       +Or
175       +2)  (Two or more diagnosis codes for ILD from secondary discharge or physician EMM ) plus one or more diagnosis tests within 90 days prior
175      !+to (inclusive) one of the diagnosis code for ILD
176       +*/
177       +%macro IPP_2IPSOPplusPX_ILD(outdata=,ids=,Dxs=, Pxs=);
178       +*DXs=diagnosis code in followup, Pxs=CPT code in follow up;
179       +*do not name outData as IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
180       +
181       +data IPPILD dxIPSILD dxOPILD;
182       +set &dxs();
183       +length dx1_date 4;
184       +format dx1_date mmddyy10.;
185       +dx1_date=min(ADMIT_DATE,  BEGIN_DATE);
186       +
187       +if dx in :('515','51630','51631','51632','51633','51634','51635','51636','51637',
188       +           '5164','5165','5166','5168','5169','71481');
189       +
190       +if enc_type='IP' and pdx='P'
191       +    then output IPPILD;
192       +if enc_type='IP' and pdx ne 'P'
193       +    then output dxIPSILD;
194       +if enc_type not in ('IP','IF', 'OT', " ")
195       +    then output dxOPILD;
196       +run;
197       +
198       +data dxIPSOPILD; *ILD from secondary discharge or physician EMM;
199       +set dxIPSILD dxOPILD;
200       +run;
201       +
202       +data pxILD; *diagnosis tests;
203       +set &pxs();
204       +if (px_type='09' and px in ('8741','8742')) or
3                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

205       +   (px_type='C1' and px in ('71250','71260','71270','71275','31625','31628',
206       +                             '31629','31632','31633','32095','32096','32097',
207       +                             '32098','32400','32405','32604','32606','32607',
208       +                             '32608','32609'));
209       +run;
210       +proc sort data=pxILD nodupkey; by &IDS px_date;run; * drop duplicate PX date and keep only one;
211       +
212       +proc sql;
213       +/*one or more diagnosis tests within 90 days prior to (inclusive) one of the diagnosis code for ILD*/
214       +create table dxpxIPSOPILD as
215       +select a.* , b.px_date
216       +from dxIPSOPILD as a
217       +    ,
218       +     pxILD as b
219       +where a.&IDS=b.&IDS and
220       +      min(b.ADMIT_DATE, b.BEGIN_DATE)-90<=b.px_date<=min(b.ADMIT_DATE, b.BEGIN_DATE);
221       +
222       +/* sencond DX code */
223       +create table IPSOPILD as
224       +select a.*, min(b.ADMIT_DATE, b.BEGIN_DATE) as DX2_date length=4 format mmddyy10.
225       +from dxpxIPSOPILD as a
226       +    ,
227       +     dxIPSOPILD(drop=dx1_date) as b
228       +where a.patid=b.patid and
229       +      (a.ADMIT_DATE ne b.ADMIT_DATE and a.BEGIN_DATE ne b.BEGIN_DATE)
230       +order by &IDS,ADMIT_DATE, BEGIN_DATE;
231       +quit;
232       +
233       +
234       +data &outData;
235       +set IPPILD IPSOPILD;
236       +length outcome $20 outcome_date outcome_start_date 4;
237       +format outcome_date outcome_start_date mmddyy10.;
238       +outcome="ILD";
239       +outcome_date=max(dx1_date, dx2_date, px_date);
240       +outcome_start_date=min(dx1_date, dx2_date, px_date);
241       +drop ADMIT_DATE BEGIN_DATE DISCHARGE_DATE END_DATE;
242       +run;
243       +
244       +proc sort data=&outData;
245       +by &IDS outcome_date descending outcome_start_date descending Enc_type;
246       +run;
247       +
248       +data &outData;
249       +set &outData;
250       +by &IDS outcome_date descending outcome_start_date;
251       +if first.outcome_date;
252       +run;
253       +
254       +proc datasets nolist;
255       +delete IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
256       +quit;run;
257       +%mend IPP_2IPSOPplusPX_ILD;
NOTE: %INCLUDE (level 1) ending.
258        %IPP_2IPSOPplusPX_ILD(outdata = Work.outcome_ILD_All,
259                              IDS = exposureID,
260                              Dxs = UCB.tempIncDxAll,
261                              Pxs = UCB.tempIncPxAll);

NOTE: There were 5129437 observations read from the data set UCB.TEMPINCDXALL.
NOTE: The data set WORK.IPPILD has 85 observations and 22 variables.
NOTE: The data set WORK.DXIPSILD has 1149 observations and 22 variables.
NOTE: The data set WORK.DXOPILD has 3877 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           2.76 seconds
      cpu time            2.60 seconds
      


NOTE: There were 1149 observations read from the data set WORK.DXIPSILD.
NOTE: There were 3877 observations read from the data set WORK.DXOPILD.
NOTE: The data set WORK.DXIPSOPILD has 5026 observations and 22 variables.
4                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      


NOTE: There were 7830153 observations read from the data set UCB.TEMPINCPXALL.
NOTE: The data set WORK.PXILD has 16323 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           2.38 seconds
      cpu time            2.32 seconds
      


NOTE: There were 16323 observations read from the data set WORK.PXILD.
NOTE: 690 observations with duplicate key values were deleted.
NOTE: The data set WORK.PXILD has 15633 observations and 20 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      

NOTE: Table WORK.DXPXIPSOPILD created, with 13605 rows and 23 columns.

NOTE: Table WORK.IPSOPILD created, with 178759 rows and 24 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.46 seconds
      cpu time            0.32 seconds
      


NOTE: There were 85 observations read from the data set WORK.IPPILD.
NOTE: There were 178759 observations read from the data set WORK.IPSOPILD.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 178844 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.21 seconds
      cpu time            0.12 seconds
      


NOTE: There were 178844 observations read from the data set WORK.OUTCOME_ILD_ALL.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 178844 observations and 23 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.24 seconds
      cpu time            0.24 seconds
      


NOTE: There were 178844 observations read from the data set WORK.OUTCOME_ILD_ALL.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 2156 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.12 seconds
      cpu time            0.07 seconds
      


NOTE: Deleting WORK.IPPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSILD (memtype=DATA).
NOTE: Deleting WORK.DXOPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.PXILD (memtype=DATA).
NOTE: Deleting WORK.DXPXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.IPSOPILD (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

262        proc sql;
263          create table Work.ILD as
264            select database,
5                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

265                   exposure,
266                   patid,
267                   exposureStart,
268                   exposureEnd,
269                   exposureID,
270                   "Lung disease" as outcomeCategory,
271                   "Interstitial lung disease" as disease,
272                   outcome_start_date as begin_date
273            from Work.outcome_ILD_All;
NOTE: Table WORK.ILD created, with 2156 rows and 9 columns.

274          select database, exposure, disease, count(distinct exposureID) as n
275            from Work.ILD
276            group by database, exposure, disease;
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   1

                                             database    exposure     disease                           n
                                             ------------------------------------------------------------
                                             MPCD        No exposure  Interstitial lung disease         3
                                             Marketscan  DMARD        Interstitial lung disease         3
                                             Marketscan  No exposure  Interstitial lung disease         6
                                             Marketscan  TNF          Interstitial lung disease         5
                                             Medicare    DMARD        Interstitial lung disease        82
                                             Medicare    NSAID        Interstitial lung disease        82
                                             Medicare    No exposure  Interstitial lung disease       113
                                             Medicare    TNF          Interstitial lung disease        54
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
277        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
      cpu time            0.01 seconds
      

278        
279        
280        /*
281        Process fracture episodes data set
282         */
283        proc sql;
284          create table Work.fractures as
285            select database,
286                   exposure,
287                   patid,
288                   exposureStart,
289                   exposureEnd,
290                   exposureID,
291                   "Osteoporotic fracture" as outcomeCategory,
292                   fractureType as disease,
293                   fractureEpisodeStart as begin_date
294            from DT.fractureEpisodesInc
295            where ^missing(fractureType);
NOTE: Table WORK.FRACTURES created, with 6475 rows and 9 columns.

296          select database, exposure, disease, count(distinct exposureID) as n
297            from Work.fractures
298            group by database, exposure, disease;
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   2

                                        database    exposure     disease                                     n
                                        ----------------------------------------------------------------------
                                        MPCD        DMARD        Clinical vertebral fracture                 1
                                        MPCD        DMARD        Non-vertebral osteoporotic fracture         4
                                        MPCD        NSAID        Clinical vertebral fracture                 3
                                        MPCD        NSAID        Non-vertebral osteoporotic fracture        16
                                        MPCD        No exposure  Clinical vertebral fracture                42
                                        MPCD        No exposure  Non-vertebral osteoporotic fracture        68
                                        MPCD        TNF          Clinical vertebral fracture                13
                                        MPCD        TNF          Non-vertebral osteoporotic fracture        19
                                        Marketscan  DMARD        Clinical vertebral fracture                13
                                        Marketscan  DMARD        Non-vertebral osteoporotic fracture        21
                                        Marketscan  NSAID        Clinical vertebral fracture                42
                                        Marketscan  NSAID        Non-vertebral osteoporotic fracture        61
                                        Marketscan  No exposure  Clinical vertebral fracture               175
                                        Marketscan  No exposure  Non-vertebral osteoporotic fracture       103
                                        Marketscan  TNF          Clinical vertebral fracture                30
                                        Marketscan  TNF          Non-vertebral osteoporotic fracture        82
                                        Medicare    DMARD        Clinical vertebral fracture               213
                                        Medicare    DMARD        Non-vertebral osteoporotic fracture       286
                                        Medicare    NSAID        Clinical vertebral fracture               520
                                        Medicare    NSAID        Non-vertebral osteoporotic fracture       636
                                        Medicare    No exposure  Clinical vertebral fracture              1026
                                        Medicare    No exposure  Non-vertebral osteoporotic fracture       731
                                        Medicare    TNF          Clinical vertebral fracture               229
                                        Medicare    TNF          Non-vertebral osteoporotic fracture       339
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
299        quit;
NOTE: The PROCEDURE SQL printed page 2.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.12 seconds
      cpu time            0.03 seconds
      

300        
301        
302        /*
303        Process hospitalized infection data set
304         */
305        proc sql;
306          create table Work.hospInf as
307            select database,
308                   exposure,
309                   patid,
310                   exposureStart,
311                   exposureEnd,
312                   exposureID,
313                   "Infection" as outcomeCategory,
314                   "Hospitalized infection" as disease,
315                   outcome_start_date as begin_date
316            from DT.hospitalizedInfectionEpisodesInc;
NOTE: Table WORK.HOSPINF created, with 21840 rows and 9 columns.

317          select database, exposure, disease, count(distinct exposureID) as n
318            from Work.hospInf
6                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

319            group by database, exposure, disease;
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   3

                                              database    exposure     disease                        n
                                              ---------------------------------------------------------
                                              MPCD        DMARD        Hospitalized infection        11
                                              MPCD        NSAID        Hospitalized infection        16
                                              MPCD        No exposure  Hospitalized infection       174
                                              MPCD        TNF          Hospitalized infection        49
                                              Marketscan  DMARD        Hospitalized infection       123
                                              Marketscan  NSAID        Hospitalized infection       249
                                              Marketscan  No exposure  Hospitalized infection       526
                                              Marketscan  TNF          Hospitalized infection       371
                                              Medicare    DMARD        Hospitalized infection      1115
                                              Medicare    NSAID        Hospitalized infection      2406
                                              Medicare    No exposure  Hospitalized infection      3563
                                              Medicare    TNF          Hospitalized infection      1267
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
320        quit;
NOTE: The PROCEDURE SQL printed page 3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.15 seconds
      cpu time            0.07 seconds
      

321        
322        
323        /*
324        Process opportunistic infection data set
325         */
326        proc sql;
327          create table Work.oppInf as
328            select database,
329                   exposure,
330                   patid,
331                   exposureStart,
332                   exposureEnd,
333                   exposureID,
334                   "Infection" as outcomeCategory,
335                   "Opportunistic infection" as disease,
336                   outcome_start_date as begin_date
337            from DT.opportunInfectionEpisodesInc;
NOTE: Table WORK.OPPINF created, with 2167 rows and 9 columns.

338          select database, exposure, disease, count(distinct exposureID) as n
339            from Work.oppInf
340            group by database, exposure, disease;
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   4

                                              database    exposure     disease                         n
                                              ----------------------------------------------------------
                                              MPCD        DMARD        Opportunistic infection         3
                                              MPCD        NSAID        Opportunistic infection         4
                                              MPCD        No exposure  Opportunistic infection         9
                                              MPCD        TNF          Opportunistic infection        10
                                              Marketscan  DMARD        Opportunistic infection        18
                                              Marketscan  NSAID        Opportunistic infection        17
                                              Marketscan  No exposure  Opportunistic infection        32
                                              Marketscan  TNF          Opportunistic infection        46
                                              Medicare    DMARD        Opportunistic infection       149
                                              Medicare    NSAID        Opportunistic infection       316
                                              Medicare    No exposure  Opportunistic infection       351
                                              Medicare    TNF          Opportunistic infection       179
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
341        quit;
NOTE: The PROCEDURE SQL printed page 4.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

342        
343        
344        /*
345        Query for incident MI
346        
347        * Requires at least a 1-day inpatient admission
348         */
349        proc sql;
350          create table Work.incidentMI as
351            select C.database, C.exposureID, C.patid, C.exposure, C.exposureStart, C.exposureEnd,
352                   C.outcomeCategory,
353                   C.disease,
354                   C.begin_date
355            from (select A.*, B.outcomeCategory, B.disease
356                  from UCB.tempIncDxAll A inner join
357                       (select * from DT.defOutcomes where disease = "Myocardial infarction") B on (A.codeType = B.codeType & A.code = B.code)
358                  where B.disease = "Myocardial infarction"  &
359                        A.enc_type = "IP" &
360                        . < A.admit_date < A.discharge_date) C
361            order by C.database, C.exposureID, C.outcomeCategory, C.disease, C.begin_date;
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Table WORK.INCIDENTMI created, with 1866 rows and 9 columns.

362        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.20 seconds
      cpu time            0.84 seconds
      

363        
364        
365        /*
366        Process the data sets created by the cancer scripts
367         */
368        proc sql;
7                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

369          create table Work.cancer as
370            select database,
371                   exposure,
372                   patid,
373                   exposureStart,
374                   exposureEnd,
375                   exposureID,
376                   "Cancer" as outcomeCategory,
377                   cancer as disease,
378                   outcome_start_date as begin_date
379            from (select * from DT.cancerSetoguchiEpisodesInc union corr
380                  select * from DT.cancerNMSCEpisodesInc );
NOTE: Table WORK.CANCER created, with 5068 rows and 9 columns.

381          select database, exposure, disease,
382                 count(distinct patid) as countDistinctPatid,
383                 count(distinct exposureID) as countDistinctEpisodes
384            from Work.cancer
385            group by database, exposure, disease;
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   5

                                                                                              count         count
                                                                                           Distinct      Distinct
                                    database    exposure     disease                          Patid      Episodes
                                    -----------------------------------------------------------------------------
                                    MPCD        DMARD        Non Melanoma Skin Cancer             3             3
                                    MPCD        DMARD        Solid Cancer                         4             4
                                    MPCD        NSAID        Non Melanoma Skin Cancer             4             4
                                    MPCD        NSAID        Solid Cancer                         5             5
                                    MPCD        No exposure  Hematologic Cancer                   4             4
                                    MPCD        No exposure  Non Melanoma Skin Cancer            22            22
                                    MPCD        No exposure  Solid Cancer                        35            35
                                    MPCD        TNF          Hematologic Cancer                   3             3
                                    MPCD        TNF          Non Melanoma Skin Cancer            19            19
                                    MPCD        TNF          Solid Cancer                        13            13
                                    Marketscan  DMARD        Hematologic Cancer                   5             5
                                    Marketscan  DMARD        Non Melanoma Skin Cancer            12            12
                                    Marketscan  DMARD        Solid Cancer                        22            22
                                    Marketscan  NSAID        Hematologic Cancer                   5             5
                                    Marketscan  NSAID        Non Melanoma Skin Cancer            31            33
                                    Marketscan  NSAID        Solid Cancer                        53            53
                                    Marketscan  No exposure  Hematologic Cancer                  18            18
                                    Marketscan  No exposure  Non Melanoma Skin Cancer            41            41
                                    Marketscan  No exposure  Solid Cancer                       107           107
                                    Marketscan  TNF          Hematologic Cancer                   9             9
                                    Marketscan  TNF          Non Melanoma Skin Cancer            42            42
                                    Marketscan  TNF          Solid Cancer                        42            42
                                    Medicare    DMARD        Hematologic Cancer                  35            36
                                    Medicare    DMARD        Non Melanoma Skin Cancer           156           165
                                    Medicare    DMARD        Solid Cancer                       189           194
                                    Medicare    NSAID        Hematologic Cancer                  63            63
                                    Medicare    NSAID        Non Melanoma Skin Cancer           399           431
                                    Medicare    NSAID        Solid Cancer                       386           388
                                    Medicare    No exposure  Hematologic Cancer                 131           131
                                    Medicare    No exposure  Non Melanoma Skin Cancer           500           500
                                    Medicare    No exposure  Solid Cancer                       675           675
                                    Medicare    TNF          Hematologic Cancer                  33            33
                                    Medicare    TNF          Non Melanoma Skin Cancer           203           207
                                    Medicare    TNF          Solid Cancer                       183           183
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
386        quit;
NOTE: The PROCEDURE SQL printed page 5.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.20 seconds
      cpu time            0.09 seconds
      

387        
388        
389        proc sql;
390        
391          create table Work.defOutcomes as
392            select *
393            from DT.defOutcomes
394            where disease ^in ("Interstitial lung disease",
395                               "Myocardial infarction",
396                               "Hospitalized infection",
397                               "Opportunistic infection");
NOTE: Table WORK.DEFOUTCOMES created, with 750 rows and 6 columns.

398          create table Work.lookupDisease as
399            select distinct outcomeCategory, disease
400            from DT.defOutcomes;
NOTE: Table WORK.LOOKUPDISEASE created, with 21 rows and 2 columns.

401          insert into Work.lookupDisease (outcomeCategory, disease)
402            values ("Osteoporotic fracture", "Clinical vertebral fracture")
403            values ("Osteoporotic fracture", "Non-vertebral osteoporotic fracture");
NOTE: 2 rows were inserted into WORK.LOOKUPDISEASE.

404        
405          %let select1 = select A.*, B.outcomeCategory, B.disease;
406          %let join1 = inner join Work.defOutcomes B on (A.codeType = B.codeType & A.code = B.code);
407          create table Work.incidentDisease as
408            select C.database, C.exposureID, C.patid, C.exposure, C.exposureStart, C.exposureEnd,
409                   C.outcomeCategory,
410                   C.disease,
411                   C.begin_date
412            from (&select1 from UCB.tempIncDxAll A &join1 union corr
413                  &select1 from UCB.tempIncPxAll A &join1 union corr
414                  select * from Work.cancer union corr
415                  select * from Work.ILD union corr
416                  select * from Work.incidentMI union corr
417                  select * from Work.hospInf union corr
418                  select * from Work.oppInf  union corr
419                  select * from Work.fractures) C
420            order by C.database, C.exposureID, C.outcomeCategory, C.disease, C.begin_date;
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Table WORK.INCIDENTDISEASE created, with 140764 rows and 9 columns.

421        quit;
NOTE: PROCEDURE SQL used (Total process time):
8                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

      real time           4.43 seconds
      cpu time            4.33 seconds
      

422        
423        /*
424        Take first occurrence of outcome
425         */
426        proc sort data = Work.incidentDisease nodupkey;
427          by database exposureID outcomeCategory disease;
428        run;

NOTE: There were 140764 observations read from the data set WORK.INCIDENTDISEASE.
NOTE: 98494 observations with duplicate key values were deleted.
NOTE: The data set WORK.INCIDENTDISEASE has 42270 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.17 seconds
      cpu time            0.14 seconds
      

429        
430        /*
431        For all but NMSC and infection (hospitalized and opportunistic),
432        keep first incident outcome within patient ID
433         */
434        data Work.incidentDiseaseSubsetA Work.incidentDiseaseSubsetB;
435          set Work.incidentDisease;
436          if disease in ("Non Melanoma Skin Cancer",
437                         "Hospitalized infection") then output Work.incidentDiseaseSubsetA;
438          else output Work.incidentDiseaseSubsetB;
439        run;

NOTE: There were 42270 observations read from the data set WORK.INCIDENTDISEASE.
NOTE: The data set WORK.INCIDENTDISEASESUBSETA has 11598 observations and 9 variables.
NOTE: The data set WORK.INCIDENTDISEASESUBSETB has 30672 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.03 seconds
      

440        proc sort data = Work.incidentDiseaseSubsetB;
441          by database patid outcomeCategory disease begin_date;
442        run;

NOTE: There were 30672 observations read from the data set WORK.INCIDENTDISEASESUBSETB.
NOTE: The data set WORK.INCIDENTDISEASESUBSETB has 30672 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.12 seconds
      cpu time            0.04 seconds
      

443        proc sort data = Work.incidentDiseaseSubsetB nodupkey;
444          by database patid outcomeCategory disease;
445        run;

NOTE: There were 30672 observations read from the data set WORK.INCIDENTDISEASESUBSETB.
NOTE: 4548 observations with duplicate key values were deleted.
NOTE: The data set WORK.INCIDENTDISEASESUBSETB has 26124 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.14 seconds
      cpu time            0.04 seconds
      

446        proc sql;
447          create table Work.incidentDisease as
448            select * from Work.incidentDiseaseSubsetA union corr
449            select * from Work.incidentDiseaseSubsetB ;
NOTE: Table WORK.INCIDENTDISEASE created, with 37722 rows and 9 columns.

450        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.20 seconds
9                                                                   The SAS System                                    13:40 Wednesday, October 4, 2017

      cpu time            0.09 seconds
      

451        
452        
453        /*
454        Join incident disease outcomes to exposure timelines
455        Summarize
456         */
457        proc sql;
458          create table DT.incidentDiseaseTimelines as
459            select A.*,
460                   D.begin_date format = mmddyy10. as outcomeDate,
461                   F.earliestOutcome,
462                   case
463                     when ^missing(D.begin_date) & missing(F.earliestOutcome) then 0
464                     when ^missing(D.begin_date) & A.exposureStart <= F.earliestOutcome <= A.exposureEnd then 0
465                     when . < F.earliestOutcome < A.exposureStart then 1
466                     when missing(D.begin_date) then 1
467                     else .
468                     end as censor,
469                   case
470                     when ^missing(D.begin_date) & missing(F.earliestOutcome) then D.begin_date - A.exposureStart + 1
471                     when ^missing(D.begin_date) & A.exposureStart <= F.earliestOutcome <= A.exposureEnd then D.begin_date - A.exposureStart + 1
472                     when . < F.earliestOutcome < A.exposureStart then 0
473                     when missing(D.begin_date) then daysExposed
474                     else .
475                     end as daysAtRisk
476            from (select B.*, C.*
477                  from DT.exposureTimeline B,
478                       Work.lookupDisease C) A left join
479                 Work.incidentDisease D on (A.database = D.database &
480                                            A.patid = D.patid &
481                                            A.exposure = D.exposure &
482                                            A.exposureStart = D.exposureStart &
483                                            A.outcomeCategory = D.outcomeCategory &
484                                            A.disease = D.disease) left join
485                 (select E.database, E.patid, E.outcomeCategory, E.disease,
486                         min(E.begin_date) format = mmddyy10. as earliestOutcome
487                  from Work.incidentDisease E
488                  where E.disease ^in ("Non Melanoma Skin Cancer",
489                                       "Hospitalized infection")
490                  group by E.database, E.patid, E.outcomeCategory, E.disease) F on (A.database = F.database &
491                                                                                    A.patid = F.patid &
492                                                                                    A.outcomeCategory = F.outcomeCategory &
493                                                                                    A.disease = F.disease)
494            order by A.database, A.patid, A.outcomeCategory, A.disease, A.exposureStart;
NOTE: The execution of this query involves performing one or more Cartesian product joins that can not be optimized.
NOTE: Table DT.INCIDENTDISEASETIMELINES created, with 1380292 rows and 17 columns.

495          create table Work.incidence as
496            select database, exposure, outcomeCategory, disease,
497                   count(distinct exposureID) as n,
498                   sum(censor = 0) as incidence,
499                   sum(daysAtRisk) / 365.25 as personYears,
500                   100 as scale,
501                   sum(censor = 0) / (sum(daysAtRisk) / 365.25) * calculated scale as incidenceRate
502            from DT.incidentDiseaseTimelines
503            group by database, exposure, outcomeCategory, disease;
NOTE: Table WORK.INCIDENCE created, with 276 rows and 9 columns.

504          select * from Work.incidence;
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   6

                                                                                                                         person              incidence
database    exposure     Disease Category            Disease                                           n  incidence       Years     scale         Rate
------------------------------------------------------------------------------------------------------------------------------------------------------
MPCD        DMARD        Cancer                      Hematologic Cancer                              481          1    426.4066       100     0.234518
MPCD        DMARD        Cancer                      Non Melanoma Skin Cancer                        481          3    424.0548       100     0.707456
MPCD        DMARD        Cancer                      Solid Cancer                                    481          7    419.3758       100     1.669147
MPCD        DMARD        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation       481          0    426.7899       100            0
MPCD        DMARD        Cardiac disease             Conduction Block                                481          0    427.5565       100            0
MPCD        DMARD        Cardiac disease             Myocardial infarction                           481          0    427.5565       100            0
MPCD        DMARD        Infection                   Hospitalized infection                          481         11    420.4709       100     2.616114
MPCD        DMARD        Infection                   Opportunistic infection                         481          2    425.3634       100     0.470186
MPCD        DMARD        Inflammatory bowel disease  Crohn’s Disease                                 481          8     414.152       100     1.931658
MPCD        DMARD        Inflammatory bowel disease  Ulcerative Colitis                              481          4      420.95       100     0.950232
MPCD        DMARD        Kidney disease              Amyloidosis                                     481          0    427.5565       100            0
MPCD        DMARD        Kidney disease              IgA nephropathy                                 481          0    427.5565       100            0
MPCD        DMARD        Kidney disease              Nephrotic syndrome                              481          0    427.5565       100            0
MPCD        DMARD        Lung disease                Apical Pulmonary fibrosis                       481          0    427.5565       100            0
MPCD        DMARD        Lung disease                Interstitial lung disease                       481          0    427.5565       100            0
MPCD        DMARD        Lung disease                Restrictive lung disease                        481          0    426.3244       100            0
MPCD        DMARD        Neurological Disease        Cauda Equina syndrome                           481          0    427.5565       100            0
MPCD        DMARD        Neurological Disease        Spinal Cord compression                         481          0    427.5565       100            0
MPCD        DMARD        Osteoporotic fracture       Clinical vertebral fracture                     481          1    424.8624       100      0.23537
MPCD        DMARD        Osteoporotic fracture       Non-vertebral osteoporotic fracture             481          4    425.4182       100     0.940251
MPCD        DMARD        PsO/PsA                     Psoriasis                                       481          4      418.59       100     0.955589
MPCD        DMARD        PsO/PsA                     Psoriatic arthritis                             481         15    407.9754       100     3.676693
MPCD        DMARD        Uveitis                     Uveitis                                         481         23    395.1951       100     5.819911
MPCD        NSAID        Cancer                      Hematologic Cancer                             1000          0    776.9829       100            0
MPCD        NSAID        Cancer                      Non Melanoma Skin Cancer                       1000          4    774.5489       100      0.51643
MPCD        NSAID        Cancer                      Solid Cancer                                   1000         17    754.8282       100     2.252168
MPCD        NSAID        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      1000          4     771.165       100     0.518696
MPCD        NSAID        Cardiac disease             Conduction Block                               1000          4    770.8966       100     0.518876
MPCD        NSAID        Cardiac disease             Myocardial infarction                          1000          3    773.4675       100     0.387864
MPCD        NSAID        Infection                   Hospitalized infection                         1000         16    762.3354       100     2.098814
MPCD        NSAID        Infection                   Opportunistic infection                        1000          2     773.117       100     0.258693
MPCD        NSAID        Inflammatory bowel disease  Crohn’s Disease                                1000         13    762.3409       100     1.705274
MPCD        NSAID        Inflammatory bowel disease  Ulcerative Colitis                             1000          5    764.5038       100     0.654019
MPCD        NSAID        Kidney disease              Amyloidosis                                    1000          0    777.1034       100            0
MPCD        NSAID        Kidney disease              IgA nephropathy                                1000          1    775.6003       100     0.128932
MPCD        NSAID        Kidney disease              Nephrotic syndrome                             1000          0    777.1034       100            0
MPCD        NSAID        Lung disease                Apical Pulmonary fibrosis                      1000          0    777.1034       100            0
MPCD        NSAID        Lung disease                Interstitial lung disease                      1000          0    777.1034       100            0
MPCD        NSAID        Lung disease                Restrictive lung disease                       1000          8    769.2813       100     1.039932
MPCD        NSAID        Neurological Disease        Cauda Equina syndrome                          1000          0    777.1034       100            0
MPCD        NSAID        Neurological Disease        Spinal Cord compression                        1000          2    774.5982       100     0.258198
MPCD        NSAID        Osteoporotic fracture       Clinical vertebral fracture                    1000          3    773.3142       100     0.387941
MPCD        NSAID        Osteoporotic fracture       Non-vertebral osteoporotic fracture            1000         16    759.1759       100     2.107548
MPCD        NSAID        PsO/PsA                     Psoriasis                                      1000         10    762.7406       100     1.311062
MPCD        NSAID        PsO/PsA                     Psoriatic arthritis                            1000          6    769.9055       100     0.779316
MPCD        NSAID        Uveitis                     Uveitis                                        1000         34    738.3381       100     4.604936
MPCD        No exposure  Cancer                      Hematologic Cancer                             1593         15    1858.182       100     0.807241
MPCD        No exposure  Cancer                      Non Melanoma Skin Cancer                       1593         22    1843.431       100     1.193427
MPCD        No exposure  Cancer                      Solid Cancer                                   1593         95    1752.914       100     5.419546
MPCD        No exposure  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      1593         40    1809.925       100     2.210037
MPCD        No exposure  Cardiac disease             Conduction Block                               1593         19    1851.912       100     1.025966
MPCD        No exposure  Cardiac disease             Myocardial infarction                          1593         13    1863.031       100     0.697788
MPCD        No exposure  Infection                   Hospitalized infection                         1593        174    1663.535       100     10.45966
MPCD        No exposure  Infection                   Opportunistic infection                        1593          6    1869.175       100     0.320997
MPCD        No exposure  Inflammatory bowel disease  Crohn’s Disease                                1593         62    1810.029       100      3.42536
MPCD        No exposure  Inflammatory bowel disease  Ulcerative Colitis                             1593         36    1823.332       100     1.974407
MPCD        No exposure  Kidney disease              Amyloidosis                                    1593          3    1872.216       100     0.160238
MPCD        No exposure  Kidney disease              IgA nephropathy                                1593          1    1871.822       100     0.053424
MPCD        No exposure  Kidney disease              Nephrotic syndrome                             1593          0    1873.418       100            0
MPCD        No exposure  Lung disease                Apical Pulmonary fibrosis                      1593          1    1872.698       100     0.053399
MPCD        No exposure  Lung disease                Interstitial lung disease                      1593          3    1872.591       100     0.160206
MPCD        No exposure  Lung disease                Restrictive lung disease                       1593         40      1828.2       100     2.187945
MPCD        No exposure  Neurological Disease        Cauda Equina syndrome                          1593          4    1868.767       100     0.214045
MPCD        No exposure  Neurological Disease        Spinal Cord compression                        1593          4    1870.943       100     0.213796
MPCD        No exposure  Osteoporotic fracture       Clinical vertebral fracture                    1593         42    1817.769       100     2.310525
MPCD        No exposure  Osteoporotic fracture       Non-vertebral osteoporotic fracture            1593         68    1793.566       100      3.79133
MPCD        No exposure  PsO/PsA                     Psoriasis                                      1593         31     1830.45       100     1.693572
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   7

                                                                                                                         person              incidence
database    exposure     Disease Category            Disease                                           n  incidence       Years     scale         Rate
------------------------------------------------------------------------------------------------------------------------------------------------------
MPCD        No exposure  PsO/PsA                     Psoriatic arthritis                            1593         41    1832.709       100     2.237125
MPCD        No exposure  Uveitis                     Uveitis                                        1593         88    1766.713       100     4.981001
MPCD        TNF          Cancer                      Hematologic Cancer                             1279          3     1499.25       100       0.2001
MPCD        TNF          Cancer                      Non Melanoma Skin Cancer                       1279         19    1483.264       100     1.280959
MPCD        TNF          Cancer                      Solid Cancer                                   1279         31    1464.665       100     2.116525
MPCD        TNF          Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      1279         16    1486.272       100     1.076519
MPCD        TNF          Cardiac disease             Conduction Block                               1279          4    1502.292       100      0.26626
MPCD        TNF          Cardiac disease             Myocardial infarction                          1279          5    1498.053       100     0.333766
MPCD        TNF          Infection                   Hospitalized infection                         1279         49    1461.818       100     3.351991
MPCD        TNF          Infection                   Opportunistic infection                        1279          9    1497.068       100     0.601175
MPCD        TNF          Inflammatory bowel disease  Crohn’s Disease                                1279         54    1424.983       100     3.789519
MPCD        TNF          Inflammatory bowel disease  Ulcerative Colitis                             1279         32      1457.9       100     2.194938
MPCD        TNF          Kidney disease              Amyloidosis                                    1279          0    1503.488       100            0
MPCD        TNF          Kidney disease              IgA nephropathy                                1279          3    1500.882       100     0.199883
MPCD        TNF          Kidney disease              Nephrotic syndrome                             1279          2    1500.526       100     0.133287
MPCD        TNF          Lung disease                Apical Pulmonary fibrosis                      1279          0    1503.488       100            0
MPCD        TNF          Lung disease                Interstitial lung disease                      1279          0    1503.488       100            0
MPCD        TNF          Lung disease                Restrictive lung disease                       1279         11    1482.565       100     0.741957
MPCD        TNF          Neurological Disease        Cauda Equina syndrome                          1279          0    1503.488       100            0
MPCD        TNF          Neurological Disease        Spinal Cord compression                        1279          1     1502.76       100     0.066544
MPCD        TNF          Osteoporotic fracture       Clinical vertebral fracture                    1279         11    1487.622       100     0.739435
MPCD        TNF          Osteoporotic fracture       Non-vertebral osteoporotic fracture            1279         19    1484.632       100     1.279778
MPCD        TNF          PsO/PsA                     Psoriasis                                      1279         46    1453.322       100     3.165161
MPCD        TNF          PsO/PsA                     Psoriatic arthritis                            1279         64     1415.51       100     4.521339
MPCD        TNF          Uveitis                     Uveitis                                        1279         58    1393.306       100     4.162761
Marketscan  DMARD        Cancer                      Hematologic Cancer                             2045         14    1808.679       100     0.774046
Marketscan  DMARD        Cancer                      Non Melanoma Skin Cancer                       2045         21    1807.943       100     1.161541
Marketscan  DMARD        Cancer                      Solid Cancer                                   2045         62    1740.071       100     3.563073
Marketscan  DMARD        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      2045         18    1809.218       100     0.994905
Marketscan  DMARD        Cardiac disease             Conduction Block                               2045         13    1810.075       100     0.718202
Marketscan  DMARD        Cardiac disease             Myocardial infarction                          2045          5    1820.214       100     0.274693
Marketscan  DMARD        Infection                   Hospitalized infection                         2045        125    1722.752       100     7.255834
Marketscan  DMARD        Infection                   Opportunistic infection                        2045         17    1801.782       100      0.94351
Marketscan  DMARD        Inflammatory bowel disease  Crohn’s Disease                                2045         41    1743.863       100     2.351102
Marketscan  DMARD        Inflammatory bowel disease  Ulcerative Colitis                             2045         41    1772.318       100     2.313355
Marketscan  DMARD        Kidney disease              Amyloidosis                                    2045          0    1823.493       100            0
Marketscan  DMARD        Kidney disease              IgA nephropathy                                2045          0     1822.91       100            0
Marketscan  DMARD        Kidney disease              Nephrotic syndrome                             2045          2    1821.207       100     0.109817
Marketscan  DMARD        Lung disease                Apical Pulmonary fibrosis                      2045          0    1823.493       100            0
Marketscan  DMARD        Lung disease                Interstitial lung disease                      2045          1    1820.298       100     0.054936
Marketscan  DMARD        Lung disease                Restrictive lung disease                       2045         14    1797.703       100     0.778772
Marketscan  DMARD        Neurological Disease        Cauda Equina syndrome                          2045          1     1823.25       100     0.054847
Marketscan  DMARD        Neurological Disease        Spinal Cord compression                        2045          4    1818.836       100     0.219921
Marketscan  DMARD        Osteoporotic fracture       Clinical vertebral fracture                    2045         12    1817.336       100     0.660307
Marketscan  DMARD        Osteoporotic fracture       Non-vertebral osteoporotic fracture            2045         21    1802.787       100     1.164863
Marketscan  DMARD        PsO/PsA                     Psoriasis                                      2045         48    1781.741       100     2.693994
Marketscan  DMARD        PsO/PsA                     Psoriatic arthritis                            2045         93    1725.024       100     5.391229
Marketscan  DMARD        Uveitis                     Uveitis                                        2045         88    1713.689       100      5.13512
Marketscan  NSAID        Cancer                      Hematologic Cancer                             4893         13    4285.802       100     0.303327
Marketscan  NSAID        Cancer                      Non Melanoma Skin Cancer                       4893         43    4266.995       100     1.007735
Marketscan  NSAID        Cancer                      Solid Cancer                                   4893        109     4092.11       100     2.663663
Marketscan  NSAID        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      4893         30    4253.922       100     0.705232
Marketscan  NSAID        Cardiac disease             Conduction Block                               4893         45    4244.131       100     1.060288
Marketscan  NSAID        Cardiac disease             Myocardial infarction                          4893         13    4279.702       100     0.303759
Marketscan  NSAID        Infection                   Hospitalized infection                         4893        251    4108.873       100      6.10873
Marketscan  NSAID        Infection                   Opportunistic infection                        4893         17    4282.253       100     0.396987
Marketscan  NSAID        Inflammatory bowel disease  Crohn’s Disease                                4893         37    4222.264       100     0.876307
Marketscan  NSAID        Inflammatory bowel disease  Ulcerative Colitis                             4893         26    4247.754       100     0.612088
Marketscan  NSAID        Kidney disease              Amyloidosis                                    4893          0    4304.014       100            0
Marketscan  NSAID        Kidney disease              IgA nephropathy                                4893          1    4302.979       100      0.02324
Marketscan  NSAID        Kidney disease              Nephrotic syndrome                             4893          2    4300.003       100     0.046512
Marketscan  NSAID        Lung disease                Apical Pulmonary fibrosis                      4893          0    4304.014       100            0
Marketscan  NSAID        Lung disease                Interstitial lung disease                      4893          0    4304.014       100            0
Marketscan  NSAID        Lung disease                Restrictive lung disease                       4893         24    4263.179       100      0.56296
Marketscan  NSAID        Neurological Disease        Cauda Equina syndrome                          4893          0    4304.014       100            0
Marketscan  NSAID        Neurological Disease        Spinal Cord compression                        4893         14    4286.965       100     0.326571
Marketscan  NSAID        Osteoporotic fracture       Clinical vertebral fracture                    4893         36    4232.033       100     0.850655
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   8

                                                                                                                         person              incidence
database    exposure     Disease Category            Disease                                           n  incidence       Years     scale         Rate
------------------------------------------------------------------------------------------------------------------------------------------------------
Marketscan  NSAID        Osteoporotic fracture       Non-vertebral osteoporotic fracture            4893         58    4233.503       100     1.370024
Marketscan  NSAID        PsO/PsA                     Psoriasis                                      4893         56     4233.12       100     1.322901
Marketscan  NSAID        PsO/PsA                     Psoriatic arthritis                            4893         56    4230.732       100     1.323648
Marketscan  NSAID        Uveitis                     Uveitis                                        4893        188    4045.903       100     4.646676
Marketscan  No exposure  Cancer                      Hematologic Cancer                             5696         41    4880.515       100     0.840075
Marketscan  No exposure  Cancer                      Non Melanoma Skin Cancer                       5696         49    4885.782       100      1.00291
Marketscan  No exposure  Cancer                      Solid Cancer                                   5696        233    4709.018       100     4.947953
Marketscan  No exposure  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5696         84    4823.888       100     1.741334
Marketscan  No exposure  Cardiac disease             Conduction Block                               5696        101    4825.188       100     2.093183
Marketscan  No exposure  Cardiac disease             Myocardial infarction                          5696         45    4895.097       100     0.919287
Marketscan  No exposure  Infection                   Hospitalized infection                         5696        526    4442.349       100     11.84058
Marketscan  No exposure  Infection                   Opportunistic infection                        5696         31    4899.819       100     0.632676
Marketscan  No exposure  Inflammatory bowel disease  Crohn’s Disease                                5696        165    4795.828       100     3.440491
Marketscan  No exposure  Inflammatory bowel disease  Ulcerative Colitis                             5696        125    4826.467       100     2.589886
Marketscan  No exposure  Kidney disease              Amyloidosis                                    5696          0    4930.313       100            0
Marketscan  No exposure  Kidney disease              IgA nephropathy                                5696          6    4927.962       100     0.121754
Marketscan  No exposure  Kidney disease              Nephrotic syndrome                             5696          2    4929.574       100     0.040571
Marketscan  No exposure  Lung disease                Apical Pulmonary fibrosis                      5696          1    4929.536       100     0.020286
Marketscan  No exposure  Lung disease                Interstitial lung disease                      5696          6    4924.999       100     0.121827
Marketscan  No exposure  Lung disease                Restrictive lung disease                       5696         93     4853.96       100     1.915961
Marketscan  No exposure  Neurological Disease        Cauda Equina syndrome                          5696          1    4929.941       100     0.020284
Marketscan  No exposure  Neurological Disease        Spinal Cord compression                        5696         14     4923.48       100     0.284352
Marketscan  No exposure  Osteoporotic fracture       Clinical vertebral fracture                    5696        175    4768.287       100     3.670081
Marketscan  No exposure  Osteoporotic fracture       Non-vertebral osteoporotic fracture            5696        103    4823.797       100     2.135247
Marketscan  No exposure  PsO/PsA                     Psoriasis                                      5696         94    4844.769       100     1.940237
Marketscan  No exposure  PsO/PsA                     Psoriatic arthritis                            5696        111    4845.068       100      2.29099
Marketscan  No exposure  Uveitis                     Uveitis                                        5696        312    4669.999       100     6.680944
Marketscan  TNF          Cancer                      Hematologic Cancer                             5779         11    6701.021       100     0.164154
Marketscan  TNF          Cancer                      Non Melanoma Skin Cancer                       5779         58    6654.179       100     0.871633
Marketscan  TNF          Cancer                      Solid Cancer                                   5779        107    6562.371       100     1.630508
Marketscan  TNF          Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5779         45    6644.942       100     0.677207
Marketscan  TNF          Cardiac disease             Conduction Block                               5779         43    6659.844       100     0.645661
Marketscan  TNF          Cardiac disease             Myocardial infarction                          5779         14    6707.745       100     0.208714
Marketscan  TNF          Infection                   Hospitalized infection                         5779        371    6372.214       100     5.822153
Marketscan  TNF          Infection                   Opportunistic infection                        5779         41    6676.159       100     0.614126
Marketscan  TNF          Inflammatory bowel disease  Crohn’s Disease                                5779        230    6379.491       100     3.605303
Marketscan  TNF          Inflammatory bowel disease  Ulcerative Colitis                             5779        142    6512.939       100     2.180275
Marketscan  TNF          Kidney disease              Amyloidosis                                    5779          2    6715.915       100      0.02978
Marketscan  TNF          Kidney disease              IgA nephropathy                                5779          7    6712.468       100     0.104284
Marketscan  TNF          Kidney disease              Nephrotic syndrome                             5779          2    6712.246       100     0.029796
Marketscan  TNF          Lung disease                Apical Pulmonary fibrosis                      5779          0    6716.854       100            0
Marketscan  TNF          Lung disease                Interstitial lung disease                      5779          5    6712.397       100     0.074489
Marketscan  TNF          Lung disease                Restrictive lung disease                       5779         47     6656.17       100     0.706112
Marketscan  TNF          Neurological Disease        Cauda Equina syndrome                          5779          2     6713.09       100     0.029793
Marketscan  TNF          Neurological Disease        Spinal Cord compression                        5779         12    6710.738       100     0.178818
Marketscan  TNF          Osteoporotic fracture       Clinical vertebral fracture                    5779         29    6680.496       100       0.4341
Marketscan  TNF          Osteoporotic fracture       Non-vertebral osteoporotic fracture            5779         80    6606.294       100     1.210966
Marketscan  TNF          PsO/PsA                     Psoriasis                                      5779        199    6444.293       100     3.088004
Marketscan  TNF          PsO/PsA                     Psoriatic arthritis                            5779        276    6267.373       100     4.403759
Marketscan  TNF          Uveitis                     Uveitis                                        5779        290    6218.804       100     4.663276
Medicare    DMARD        Cancer                      Hematologic Cancer                             5193         74     8999.51       100     0.822267
Medicare    DMARD        Cancer                      Non Melanoma Skin Cancer                       5193        197    8878.648       100     2.218806
Medicare    DMARD        Cancer                      Solid Cancer                                   5193        356    8292.882       100     4.292838
Medicare    DMARD        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5193        215    8654.552       100     2.484242
Medicare    DMARD        Cardiac disease             Conduction Block                               5193        198    8750.612       100     2.262699
Medicare    DMARD        Cardiac disease             Myocardial infarction                          5193        106    9008.474       100      1.17667
Medicare    DMARD        Infection                   Hospitalized infection                         5193       1149    7510.858       100     15.29785
Medicare    DMARD        Infection                   Opportunistic infection                        5193        130    8901.604       100     1.460411
Medicare    DMARD        Inflammatory bowel disease  Crohn’s Disease                                5193        161    8533.845       100     1.886606
Medicare    DMARD        Inflammatory bowel disease  Ulcerative Colitis                             5193        119    8770.921       100     1.356756
Medicare    DMARD        Kidney disease              Amyloidosis                                    5193          1    9173.188       100     0.010901
Medicare    DMARD        Kidney disease              IgA nephropathy                                5193         10    9152.994       100     0.109254
Medicare    DMARD        Kidney disease              Nephrotic syndrome                             5193         11     9144.95       100     0.120285
Medicare    DMARD        Lung disease                Apical Pulmonary fibrosis                      5193          0    9171.452       100            0
Medicare    DMARD        Lung disease                Interstitial lung disease                      5193         63    9060.022       100     0.695363
Medicare    DMARD        Lung disease                Restrictive lung disease                       5193        202     8640.81       100     2.337744
Medicare    DMARD        Neurological Disease        Cauda Equina syndrome                          5193          1    9171.176       100     0.010904
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017   9

                                                                                                                         person              incidence
database    exposure     Disease Category            Disease                                           n  incidence       Years     scale         Rate
------------------------------------------------------------------------------------------------------------------------------------------------------
Medicare    DMARD        Neurological Disease        Spinal Cord compression                        5193         24     9104.89       100     0.263595
Medicare    DMARD        Osteoporotic fracture       Clinical vertebral fracture                    5193        191    8720.583       100      2.19022
Medicare    DMARD        Osteoporotic fracture       Non-vertebral osteoporotic fracture            5193        266    8538.494       100     3.115303
Medicare    DMARD        PsO/PsA                     Psoriasis                                      5193        211    8561.613       100     2.464489
Medicare    DMARD        PsO/PsA                     Psoriatic arthritis                            5193        263    8390.771       100     3.134396
Medicare    DMARD        Uveitis                     Uveitis                                        5193        171    8572.657       100     1.994714
Medicare    NSAID        Cancer                      Hematologic Cancer                            12847        116    19474.68       100     0.595645
Medicare    NSAID        Cancer                      Non Melanoma Skin Cancer                      12847        498    19062.85       100     2.612411
Medicare    NSAID        Cancer                      Solid Cancer                                  12847        766     17396.3       100     4.403236
Medicare    NSAID        Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     12847        401    18653.19       100     2.149766
Medicare    NSAID        Cardiac disease             Conduction Block                              12847        462    18610.22       100     2.482507
Medicare    NSAID        Cardiac disease             Myocardial infarction                         12847        199    19462.64       100     1.022472
Medicare    NSAID        Infection                   Hospitalized infection                        12847       2418    16574.68       100     14.58851
Medicare    NSAID        Infection                   Opportunistic infection                       12847        275    19223.42       100     1.430547
Medicare    NSAID        Inflammatory bowel disease  Crohn’s Disease                               12847        187    19066.86       100     0.980759
Medicare    NSAID        Inflammatory bowel disease  Ulcerative Colitis                            12847        158    19301.73       100     0.818579
Medicare    NSAID        Kidney disease              Amyloidosis                                   12847          5    19833.06       100      0.02521
Medicare    NSAID        Kidney disease              IgA nephropathy                               12847         17    19799.81       100     0.085859
Medicare    NSAID        Kidney disease              Nephrotic syndrome                            12847          9    19816.71       100     0.045416
Medicare    NSAID        Lung disease                Apical Pulmonary fibrosis                     12847          3    19841.16       100      0.01512
Medicare    NSAID        Lung disease                Interstitial lung disease                     12847         52     19655.7       100     0.264554
Medicare    NSAID        Lung disease                Restrictive lung disease                      12847        333     18810.9       100      1.77025
Medicare    NSAID        Neurological Disease        Cauda Equina syndrome                         12847          8     19808.7       100     0.040386
Medicare    NSAID        Neurological Disease        Spinal Cord compression                       12847         59       19693       100     0.299599
Medicare    NSAID        Osteoporotic fracture       Clinical vertebral fracture                   12847        424     18546.9       100     2.286096
Medicare    NSAID        Osteoporotic fracture       Non-vertebral osteoporotic fracture           12847        562    18135.39       100     3.098914
Medicare    NSAID        PsO/PsA                     Psoriasis                                     12847        265    18989.04       100     1.395542
Medicare    NSAID        PsO/PsA                     Psoriatic arthritis                           12847        187    19118.98       100     0.978086
Medicare    NSAID        Uveitis                     Uveitis                                       12847        348    18601.33       100     1.870834
Medicare    No exposure  Cancer                      Hematologic Cancer                            13275        276    18803.65       100       1.4678
Medicare    No exposure  Cancer                      Non Melanoma Skin Cancer                      13275        582    18239.58       100     3.190864
Medicare    No exposure  Cancer                      Solid Cancer                                  13275       1588    16934.32       100     9.377407
Medicare    No exposure  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     13275        840    17897.29       100     4.693449
Medicare    No exposure  Cardiac disease             Conduction Block                              13275        862    18009.89       100     4.786258
Medicare    No exposure  Cardiac disease             Myocardial infarction                         13275        388    18709.15       100     2.073852
Medicare    No exposure  Infection                   Hospitalized infection                        13275       3563    14737.93       100     24.17571
Medicare    No exposure  Infection                   Opportunistic infection                       13275        312    18759.41       100     1.663166
Medicare    No exposure  Inflammatory bowel disease  Crohn’s Disease                               13275        578    18173.54       100     3.180447
Medicare    No exposure  Inflammatory bowel disease  Ulcerative Colitis                            13275        331    18587.95       100     1.780724
Medicare    No exposure  Kidney disease              Amyloidosis                                   13275         11     19107.3       100      0.05757
Medicare    No exposure  Kidney disease              IgA nephropathy                               13275         41    19083.67       100     0.214843
Medicare    No exposure  Kidney disease              Nephrotic syndrome                            13275         21    19094.44       100      0.10998
Medicare    No exposure  Lung disease                Apical Pulmonary fibrosis                     13275          2    19128.53       100     0.010456
Medicare    No exposure  Lung disease                Interstitial lung disease                     13275        113    18972.33       100     0.595604
Medicare    No exposure  Lung disease                Restrictive lung disease                      13275        559    18264.42       100     3.060595
Medicare    No exposure  Neurological Disease        Cauda Equina syndrome                         13275         27    19093.57       100     0.141409
Medicare    No exposure  Neurological Disease        Spinal Cord compression                       13275         97    18973.28       100     0.511245
Medicare    No exposure  Osteoporotic fracture       Clinical vertebral fracture                   13275       1026    17849.17       100     5.748168
Medicare    No exposure  Osteoporotic fracture       Non-vertebral osteoporotic fracture           13275        731    18094.04       100     4.040004
Medicare    No exposure  PsO/PsA                     Psoriasis                                     13275        418    18434.04       100     2.267545
Medicare    No exposure  PsO/PsA                     Psoriatic arthritis                           13275        389    18606.39       100      2.09068
Medicare    No exposure  Uveitis                     Uveitis                                       13275        397    18471.44       100     2.149264
Medicare    TNF          Cancer                      Hematologic Cancer                             5929         54    13442.55       100      0.40171
Medicare    TNF          Cancer                      Non Melanoma Skin Cancer                       5929        244    13097.43       100     1.862961
Medicare    TNF          Cancer                      Solid Cancer                                   5929        364    12475.49       100     2.917722
Medicare    TNF          Cardiac disease             Aortic Insufficiency/Aortic Regurgitation      5929        219    13006.89       100     1.683723
Medicare    TNF          Cardiac disease             Conduction Block                               5929        231    13098.72       100     1.763531
Medicare    TNF          Cardiac disease             Myocardial infarction                          5929         92    13395.21       100     0.686813
Medicare    TNF          Infection                   Hospitalized infection                         5929       1267    11276.34       100     11.23591
Medicare    TNF          Infection                   Opportunistic infection                        5929        158    13227.19       100     1.194509
Medicare    TNF          Inflammatory bowel disease  Crohn’s Disease                                5929        305    12301.19       100     2.479436
Medicare    TNF          Inflammatory bowel disease  Ulcerative Colitis                             5929        205    12829.28       100     1.597908
Medicare    TNF          Kidney disease              Amyloidosis                                    5929          7     13547.7       100     0.051669
Medicare    TNF          Kidney disease              IgA nephropathy                                5929         21    13510.23       100     0.155438
Medicare    TNF          Kidney disease              Nephrotic syndrome                             5929         18    13529.74       100      0.13304
Medicare    TNF          Lung disease                Apical Pulmonary fibrosis                      5929          0    13568.65       100            0
Medicare    TNF          Lung disease                Interstitial lung disease                      5929         48    13446.41       100     0.356972
 
                                                              queryIncidenceOutcomes.sas
                                                                  --- AS project ---                              13:40 Wednesday, October 4, 2017  10

                                                                                                                         person              incidence
database    exposure     Disease Category            Disease                                           n  incidence       Years     scale         Rate
------------------------------------------------------------------------------------------------------------------------------------------------------
Medicare    TNF          Lung disease                Restrictive lung disease                       5929        245    12917.18       100     1.896698
Medicare    TNF          Neurological Disease        Cauda Equina syndrome                          5929         11    13538.79       100     0.081248
Medicare    TNF          Neurological Disease        Spinal Cord compression                        5929         27    13494.78       100     0.200077
Medicare    TNF          Osteoporotic fracture       Clinical vertebral fracture                    5929        213     13058.4       100     1.631134
Medicare    TNF          Osteoporotic fracture       Non-vertebral osteoporotic fracture            5929        318    12752.53       100     2.493624
Medicare    TNF          PsO/PsA                     Psoriasis                                      5929        380    12466.54       100      3.04816
Medicare    TNF          PsO/PsA                     Psoriatic arthritis                            5929        461     12101.4       100     3.809477
Medicare    TNF          Uveitis                     Uveitis                                        5929        381    12289.39       100     3.100236
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                              queryIncidenceOutcomes.sas
505        quit;
NOTE: The PROCEDURE SQL printed pages 6-10.
NOTE: PROCEDURE SQL used (Total process time):
      real time           8.08 seconds
      cpu time            11.34 seconds
      

506        
507        
508        proc export
10                                                                  The SAS System                                    13:40 Wednesday, October 4, 2017

509          data = Work.incidence
510          outfile = "data\processed\&cmt..csv"
511          dbms = csv
512          replace;
513          delimiter = ",";
514        run;

515         /**********************************************************************
516         *   PRODUCT:   SAS
517         *   VERSION:   9.4
518         *   CREATOR:   External File Interface
519         *   DATE:      04OCT17
520         *   DESC:      Generated SAS Datastep Code
521         *   TEMPLATE SOURCE:  (None Specified.)
522         ***********************************************************************/
523            data _null_;
524            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
525            %let _EFIREC_ = 0;     /* clear export record count macro variable */
526            file 'data\processed\queryIncidenceOutcomes.csv' delimiter=',' DSD DROPOVER lrecl=32767;
527            if _n_ = 1 then        /* write column names or labels */
528             do;
529               put
530                  "database"
531               ','
532                  "exposure"
533               ','
534                  "outcomeCategory"
535               ','
536                  "Disease"
537               ','
538                  "n"
539               ','
540                  "incidence"
541               ','
542                  "personYears"
543               ','
544                  "scale"
545               ','
546                  "incidenceRate"
547               ;
548             end;
549           set  WORK.INCIDENCE   end=EFIEOD;
550               format database $10. ;
551               format exposure $11. ;
552               format outcomeCategory $26. ;
553               format Disease $41. ;
554               format n best12. ;
555               format incidence best12. ;
556               format personYears best12. ;
557               format scale best12. ;
558               format incidenceRate best12. ;
559             do;
560               EFIOUT + 1;
561               put database $ @;
562               put exposure $ @;
563               put outcomeCategory $ @;
564               put Disease $ @;
565               put n @;
566               put incidence @;
567               put personYears @;
568               put scale @;
569               put incidenceRate ;
570               ;
571             end;
572            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
573            if EFIEOD then call symputx('_EFIREC_',EFIOUT);
574            run;

NOTE: The file 'data\processed\queryIncidenceOutcomes.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\processed\queryIncidenceOutcomes.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=04Oct2017:13:41:02,
11                                                                  The SAS System                                    13:40 Wednesday, October 4, 2017

      Create Time=04Oct2017:13:41:02

NOTE: 277 records were written to the file 'data\processed\queryIncidenceOutcomes.csv'.
      The minimum record length was 61.
      The maximum record length was 118.
NOTE: There were 276 observations read from the data set WORK.INCIDENCE.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

276 records created in data\processed\queryIncidenceOutcomes.csv from WORK.INCIDENCE.
  
  
NOTE: "data\processed\queryIncidenceOutcomes.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

575        
576        
577        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           22.30 seconds
      cpu time            23.32 seconds
      
