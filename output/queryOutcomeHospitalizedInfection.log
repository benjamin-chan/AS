1                                          The SAS System                 18:21 Monday, May 21, 2018

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           0.38 seconds
      cpu time            0.38 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          
4          Programmer Lang Chen @UAB
5          created: 8/24/2016
6          modiflied :
7          Project:
8          Task: define outcome for Pfizer Tofacitinib 2016 with PECORI common data model data
9          Output: Dataset outcome
10         
11         NOTE RUN queryOutcomeOpportunisticInfection.sas AFTER
12         
13         TODO:
14         **********************************************************************;
15         options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
16         * Programmer    : Benjamin Chan <chanb@ohsu.edu>
17         * Creation date :
18         * Modify date   :
19         ;
20         %let cmt=queryOutcomeHospitalizedInfection; * type the name of your program here (without the filename extension);
21         %let pgm=&cmt..sas;
22         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
2                                                                   The SAS System                                          18:21 Monday, May 21, 2018

      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
139        footnote "&pgm.";
140        * footnote2 "%sysfunc(datetime(),datetime14.)";
141        title1 '--- AS project ---';
142        **********************************************************************;
143        options macrogen mlogic mprint symbolgen;
144        options nomacrogen nomlogic nomprint nosymbolgen;
145        
146        
147        ods html
148          body = "output\&cmt..html"
149          style = Statistical;
NOTE: Writing HTML Body file: output\queryOutcomeHospitalizedInfection.html
150        
151        
152        /*
153        TO-DO
154        
155        Kevin's request 4/25/2018:
156        Exclude OI's from hospitalized infection capture
157         */
158        
159        
160        *To edit the following two lines only;
161        
162        %let indxdat = UCB.tempIncDxAll;
163        %let inpxdat = UCB.tempIncPxAll;
164        %let inrxdat = UCB.tempIncRxAll;
165        proc sort data = &indxdat; by database exposure patid exposureStart exposureEnd exposureID begin_date;
166        run;

NOTE: There were 5928438 observations read from the data set UCB.TEMPINCDXALL.
NOTE: The data set UCB.TEMPINCDXALL has 5928438 observations and 23 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           8.45 seconds
      cpu time            14.49 seconds
      

167        proc sort data = &inpxdat; by database exposure patid exposureStart exposureEnd exposureID px_date;
168        run;

NOTE: There were 8264248 observations read from the data set UCB.TEMPINCPXALL.
NOTE: The data set UCB.TEMPINCPXALL has 8264248 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           13.71 seconds
      cpu time            25.55 seconds
      

169        proc sort data = &inrxdat; by database exposure patid exposureStart exposureEnd exposureID dispense_date;
170        run;

NOTE: There were 4273219 observations read from the data set UCB.TEMPINCRXALL.
NOTE: The data set UCB.TEMPINCRXALL has 4273219 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           4.83 seconds
      cpu time            8.97 seconds
      

171        
172        /*
173        Keep only the HCPCS codes
174        Re-length the px variable
175         */
176        data Work.tempIncPxAll;
177          length px $5;
178          set &inpxdat.;
179          if px_type = "H1" then output;
180        run;

WARNING: Multiple lengths were specified for the variable px by input data set(s). This can cause truncation of data.
NOTE: There were 8264248 observations read from the data set UCB.TEMPINCPXALL.
3                                                                   The SAS System                                          18:21 Monday, May 21, 2018

NOTE: The data set WORK.TEMPINCPXALL has 1987380 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           1.63 seconds
      cpu time            1.60 seconds
      

181        proc sql;
182          select "Check length of px variable in Work.tempIncPxAll" as table,  px_type, length(px) as lengthPx, count(*) as n
183          from Work.tempIncPxAll
184          group by px_type, calculated lengthPx;
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   1

                                                                                     Procedure
                                   table                                             Code Type  lengthPx         n
                                   -------------------------------------------------------------------------------
                                   Check length of px variable in Work.tempIncPxAll  H1                5   1987380
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
185        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.09 seconds
      cpu time            1.79 seconds
      

186        %let inpxdat = Work.tempIncPxAll;
187        
188        /*
189        proc datasets nolist; delete
190        icd9_infection
191        icd9_inf
192        outcome_infection_dx
193        outcome_rx_TB
194        NDC_PYRAZINAMIDE
195        outcome_infection_px
196        outcome_infection_rx
197        outcome_infection_trt
198        outcome_infection
199        ;
200        quit;
201         */
202        proc import datafile='U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv'
203            out=icd9_infection dbms = csv replace;
204            guessingrows = 1000;
205        run;

Number of names found is less than number of variables found. 
Number of names found is less than number of variables found. 
206         /**********************************************************************
207         *   PRODUCT:   SAS
208         *   VERSION:   9.4
209         *   CREATOR:   External File Interface
210         *   DATE:      21MAY18
211         *   DESC:      Generated SAS Datastep Code
212         *   TEMPLATE SOURCE:  (None Specified.)
213         ***********************************************************************/
214            data WORK.ICD9_INFECTION    ;
215            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
216            infile 'U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
217               informat ICD_9_CM_CODE $5. ;
218               informat CCS_CATEGORY best32. ;
219               informat CCS_CATEGORY_DESCRIPTION $12. ;
220               informat ICD_9_CM_CODE_DESCRIPTION $64. ;
221               informat OPTIONAL_CCS_CATEGORY $1. ;
222               informat OPTIONAL_CCS_CATEGORY_DESCRIPTI $1. ;
223               informat description $146. ;
224               informat UABlist $1. ;
225               informat Infection $1. ;
226               informat UABgroup $36. ;
227               informat Infection_Category $36. ;
228               informat Infection_Location $1. ;
229               informat Infectious_Organism $1. ;
230               informat OI $2. ;
231               informat Viral $5. ;
232               informat Fungal $1. ;
233               informat bacterial_infection $1. ;
234               informat other_types_of_infection $1. ;
235               informat VAR19 $26. ;
236               format ICD_9_CM_CODE $5. ;
237               format CCS_CATEGORY best12. ;
4                                                                   The SAS System                                          18:21 Monday, May 21, 2018

238               format CCS_CATEGORY_DESCRIPTION $12. ;
239               format ICD_9_CM_CODE_DESCRIPTION $64. ;
240               format OPTIONAL_CCS_CATEGORY $1. ;
241               format OPTIONAL_CCS_CATEGORY_DESCRIPTI $1. ;
242               format description $146. ;
243               format UABlist $1. ;
244               format Infection $1. ;
245               format UABgroup $36. ;
246               format Infection_Category $36. ;
247               format Infection_Location $1. ;
248               format Infectious_Organism $1. ;
249               format OI $2. ;
250               format Viral $5. ;
251               format Fungal $1. ;
252               format bacterial_infection $1. ;
253               format other_types_of_infection $1. ;
254               format VAR19 $26. ;
255            input
256                        ICD_9_CM_CODE  $
257                        CCS_CATEGORY
258                        CCS_CATEGORY_DESCRIPTION  $
259                        ICD_9_CM_CODE_DESCRIPTION  $
260                        OPTIONAL_CCS_CATEGORY  $
261                        OPTIONAL_CCS_CATEGORY_DESCRIPTI  $
262                        description  $
263                        UABlist  $
264                        Infection  $
265                        UABgroup  $
266                        Infection_Category  $
267                        Infection_Location  $
268                        Infectious_Organism  $
269                        OI  $
270                        Viral  $
271                        Fungal  $
272                        bacterial_infection  $
273                        other_types_of_infection  $
274                        VAR19  $
275            ;
276            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
277            run;

NOTE: The infile 'U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=291233,
      Last Modified=03Apr2018:14:33:55,
      Create Time=03Apr2018:14:33:36

NOTE: 2230 records were read from the infile 'U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv'.
      The minimum record length was 44.
      The maximum record length was 266.
NOTE: The data set WORK.ICD9_INFECTION has 2230 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

2230 rows created in WORK.ICD9_INFECTION from U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv.
  
  
  
NOTE: WORK.ICD9_INFECTION data set was successfully created.
NOTE: The data set WORK.ICD9_INFECTION has 2230 observations and 19 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.91 seconds
      cpu time            0.70 seconds
      

278        data icd9_infection;
279        set icd9_infection;
280          where upcase(oi) ^= "OI";
281        Infection=upcase(Infection);
282        run;
5                                                                   The SAS System                                          18:21 Monday, May 21, 2018


NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
      WHERE UPCASE(oi) not = 'OI';
NOTE: The data set WORK.ICD9_INFECTION has 1725 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

283        proc freq data = Work.icd9_infection;
284          table oi / missprint;
285        run;

                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   2

                                                                  The FREQ Procedure

                                                                              Cumulative    Cumulative
                                               OI    Frequency     Percent     Frequency      Percent
                                               -------------------------------------------------------
                                                         1725                                         

                                                              Frequency Missing = 1725
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE FREQ printed page 2.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.07 seconds
      cpu time            0.03 seconds
      

286        proc print data=icd9_infection (obs=10);run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   3

                                                                                                                                     OPTIONAL_CCS_
     ICD_9_                     CCS_CATEGORY_                                                                         OPTIONAL_        CATEGORY_
 Obs CM_CODE    CCS_CATEGORY     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION                                           CCS_CATEGORY      DESCRIPTI

   1  1371                 1    Tuberculosis     LATE EFFECT CNS TB                                                                               
   2  1372                 1    Tuberculosis     LATE EFFECT GU TB                                                                                
   3  1373                 1    Tuberculosis     LATE EFF BONE & JOINT TB                                                                         
   4  1374                 1    Tuberculosis     LATE EFFECT TB NEC                                                                               
   5  V1201                1    Tuberculosis     HX TUBERCULOSIS (Begin 1                                                                         
   6  0203               122    Pneumonia        PRIMARY PNEUMONIC PLAGUE                                                                         
   7  0204               122    Pneumonia        SECONDARY PNEUMON PLAGUE                                                                         
   8  0205               122    Pneumonia        PNEUMONIC PLAGUE NOS                                                                             
   9  0212               122    Pneumonia        PULMONARY TULAREMIA                                                                              
  10  0221               122    Pneumonia        PULMONARY ANTHRAX                                                                                

 
 
 Obs description

   1 Late effects of central nervous system tuberculosis                                                                                              
   2 Late effects of genitourinary tuberculosis                                                                                                       
   3 Late effects of tuberculosis of bones and joints                                                                                                 
   4 Late effects of tuberculosis of other specified organs                                                                                           
   5 Personal history of tuberculosis                                                                                                                 
   6 Primary pneumonic plague                                                                                                                         
   7 Secondary pneumonic plague                                                                                                                       
   8 Pneumonic plague, unspecified                                                                                                                    
   9 Pulmonary tularemia                                                                                                                              
  10 Pulmonary anthrax                                                                                                                                

 
                                                                                                     Infection_  Infectious_
 Obs UABlist  Infection  UABgroup                              Infection_Category                     Location    Organism    OI  Viral  Fungal

   1                                                                                                                                           
   2                                                                                                                                           
   3                                                                                                                                           
   4                                                                                                                                           
   5                                                                                                                                           
   6              Y                                            plague                                                                          
   7              Y                                            plague                                                                          
   8              Y                                            plague                                                                          
   9    Y         Y      tularemia                             tularemia                                                                       
  10              Y                                            anthrax                                                                         

 
     bacterial_    other_types_
 Obs infection     of_infection    VAR19

   1                                                         
   2                                                         
   3                                                         
   4                                                         
   5                                                         
   6                                                         
   7                                                         
   8                                                         
   9                                                         
  10                                                         
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 10 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
      

287        
288        proc print data=icd9_infection ;
289          where ICD_9_CM_CODE=:"003";
290        run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   4

                                                                                                                                     OPTIONAL_CCS_
     ICD_9_                     CCS_CATEGORY_                                                                         OPTIONAL_        CATEGORY_
 Obs CM_CODE    CCS_CATEGORY     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION                                           CCS_CATEGORY      DESCRIPTI

 145  0030               135    Intest infct     SALMONELLA ENTERITIS                                                                             
 146  00320              135    Intest infct     LOCAL SALMONELLA INF NOS                                                                         
 147  00329              135    Intest infct     LOCAL SALMONELLA INF NEC                                                                         
 148  0038               135    Intest infct     SALMONELLA INFECTION NEC                                                                         
 149  0039               135    Intest infct     SALMONELLA INFECTION NOS                                                                         

 
 
 Obs description

 145 Salmonella gastroenteritis                                                                                                                       
 146 Localized salmonella infection, unspecified                                                                                                      
 147 Other localized salmonella infections                                                                                                            
 148 Other specified salmonella infections                                                                                                            
 149 Salmonella infection, unspecified                                                                                                                

 
                                                                                                     Infection_  Infectious_
 Obs UABlist  Infection  UABgroup                              Infection_Category                     Location    Organism    OI  Viral  Fungal

 145    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 146    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 147    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 148    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 149    Y         Y      gastroenteritis                       gastroenteritis                                                                 

 
     bacterial_    other_types_
 Obs infection     of_infection    VAR19

 145                                                         
 146                                                         
 147                                                         
 148                                                         
 149                                                         
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 5 observations read from the data set WORK.ICD9_INFECTION.
      WHERE ICD_9_CM_CODE=:'003';
NOTE: The PROCEDURE PRINT printed page 4.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

291        
292        proc freq data=icd9_infection; tables Infection_Category Infection_Location;
293        run;

                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   5

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              GI abscess                                     8        1.06             8         1.06  
                              HSV                                            6        0.79            14         1.85  
                              Plague                                         1        0.13            15         1.98  
                              Q fever                                        1        0.13            16         2.12  
                              UTI                                            1        0.13            17         2.25  
                              abdominal abscess                             19        2.51            36         4.76  
                              actinomycosis                                  7        0.93            43         5.69  
                              anthrax                                        3        0.40            46         6.08  
                              bacteremia                                     3        0.40            49         6.48  
                              bacteremia septicemia                         20        2.65            69         9.13  
                              borrelia                                       5        0.66            74         9.79  
                              brain abscess                                  3        0.40            77        10.19  
                              brucella                                       6        0.79            83        10.98  
                              candidiasis                                    1        0.13            84        11.11  
                              cat-scratch                                    1        0.13            85        11.24  
                              cjd                                            2        0.26            87        11.51  
                              cowpox                                         1        0.13            88        11.64  
                              device associated infections                  11        1.46            99        13.10  
                              encephalitis                                  36        4.76           135        17.86  
                              endocarditis                                  12        1.59           147        19.44  
                              endophthalmitis                                5        0.66           152        20.11  
                              filarial or other parasitis                   67        8.86           219        28.97  
                              gastroenteritis                               70        9.26           289        38.23  
                              hepatitis                                      1        0.13           290        38.36  
                              herpes                                        11        1.46           301        39.81  
                              histoplasmosis                                 3        0.40           304        40.21  
                              infectious conjunctivitis                      7        0.93           311        41.14  
                              leprosy                                        8        1.06           319        42.20  
                              leptospirosis                                  4        0.53           323        42.72  
                              leshmaniasis                                   6        0.79           329        43.52  
                              malaria                                       10        1.32           339        44.84  
                              measles                                        1        0.13           340        44.97  
                              meningitis                                    21        2.78           361        47.75  
                              myocarditis                                    5        0.66           366        48.41  
                              ocular infection                               3        0.40           369        48.81  
                              osteomyelitis                                 51        6.75           420        55.56  
                              pericarditis                                   2        0.26           422        55.82  
                              plague                                         6        0.79           428        56.61  
                              pneumonia                                     47        6.22           475        62.83  
                              pneumonitis                                    1        0.13           476        62.96  
                              prostate infections                            2        0.26           478        63.23  
                              pyelonephritis urine tract infection           9        1.19           487        64.42  
                              rickettsia                                    18        2.38           505        66.80  
                              septic arthritis                              27        3.57           532        70.37  
                              skin and soft tissue                           4        0.53           536        70.90  
                              skin and soft tissue infection                52        6.88           588        77.78  
                              syphilis and other venereal disease,          94       12.43           682        90.21  
                              toxoplasmosis                                  2        0.26           684        90.48  
                              trypanosomiasis                                5        0.66           689        91.14  
                              tularemia                                      6        0.79           695        91.93  
                              upper respiratory tract infection             45        5.95           740        97.88  
                              viral hepatitis                                1        0.13           741        98.02  
                              viremia                                        1        0.13           742        98.15  
                              zoster                                        14        1.85           756       100.00  

                                                               Frequency Missing = 969


                                           Infection_                             Cumulative    Cumulative
                                           Location      Frequency     Percent     Frequency      Percent
                                           ---------------------------------------------------------------
                                                                                                          

                                                              Frequency Missing = 1725
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE FREQ printed page 5.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      

294        proc freq data=icd9_infection; tables Infection_Category Infection_Location;
295        where not missing(oi) and Infection^=" " and  Infection_Category not in ("zoster" "tuberculosis");
296        run;

NOTE: No observations were selected from data set WORK.ICD9_INFECTION.
NOTE: There were 0 observations read from the data set WORK.ICD9_INFECTION.
      WHERE (not MISSING(oi)) and (Infection not = ' ') and Infection_Category not in ('tuberculosis', 'zoster');
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

297        proc print data=icd9_infection;
298        var ICD_9_CM_CODE CCS_CATEGORY_DESCRIPTION ICD_9_CM_CODE_DESCRIPTION
299        description Infection UABgroup Infection_Category Infection_Location Infectious_Organism OI Viral Fungal bacterial_infection
299      ! other_types_of_infection;
300        
6                                                                   The SAS System                                          18:21 Monday, May 21, 2018

301        where Infection_Category in ("zoster" "herpes");
302        run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   6

     ICD_9_     CCS_CATEGORY_
 Obs CM_CODE     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION

 983  05310     Viral infect     H ZOSTER NERV SYST NOS                                          
 984  05311     Viral infect     GENICULATE HERPES ZOSTER                                        
 985  05312     Viral infect     POSTHERPES TRIGEM NEURAL                                        
 986  05313     Viral infect     POSTHERPES POLYNEUROPATH                                        
 987  05314     Viral infect     HERPES ZOSTER MYELITIS (                                        
 988  05319     Viral infect     H ZOSTER NERV SYST NEC                                          
 989  05371     Viral infect     H ZOSTER OTITIS EXTERNA                                         
 990  05379     Viral infect     H ZOSTER COMPLICATED NEC                                        
 991  0538      Viral infect     H ZOSTER COMPLICATED NOS                                        
 992  0539      Viral infect     HERPES ZOSTER NOS                                               
 994  05410     Viral infect     GENITAL HERPES NOS                                              
 995  05411     Viral infect     HERPETIC VULVOVAGINITIS                                         
 996  05412     Viral infect     HERPETIC ULCER OF VULVA                                         

 
 Obs description

 983 Herpes zoster with unspecified nervous system complication                                                                                       
 984 Geniculate herpes zoster                                                                                                                         
 985 Postherpetic trigeminal neuralgia                                                                                                                
 986 Postherpetic polyneuropathy                                                                                                                      
 987 Herpes zoster myelitis                                                                                                                           
 988 Herpes zoster with other nervous system complications                                                                                            
 989 Otitis externa due to herpes zoster                                                                                                              
 990 Herpes zoster with other specified complications                                                                                                 
 991 Herpes zoster with unspecified complication                                                                                                      
 992 Herpes zoster without mention of complication                                                                                                    
 994 Genital herpes, unspecified                                                                                                                      
 995 Herpetic vulvovaginitis                                                                                                                          
 996 Herpetic ulceration of vulva                                                                                                                     

                                                                                                  Infection_
 Obs Infection    UABgroup                                Infection_Category                       Location

 983     Y        zoster                                  zoster                                            
 984     Y        zoster                                  zoster                                            
 985     Y        zoster                                  zoster                                            
 986     Y        zoster                                  zoster                                            
 987     Y        zoster                                  zoster                                            
 988     Y        zoster                                  zoster                                            
 989     Y        zoster                                  zoster                                            
 990     Y        zoster                                  zoster                                            
 991     Y        zoster                                  zoster                                            
 992     Y        zoster                                  zoster                                            
 994     Y                                                herpes                                            
 995     Y                                                herpes                                            
 996     Y                                                herpes                                            

     Infectious_                             bacterial_    other_types_
 Obs  Organism      OI    Viral    Fungal    infection     of_infection

 983                      viral                                        
 984                      viral                                        
 985                      viral                                        
 986                      viral                                        
 987                      viral                                        
 988                      viral                                        
 989                      viral                                        
 990                      viral                                        
 991                      viral                                        
 992                      viral                                        
 994                      viral                                        
 995                      viral                                        
 996                      viral                                        
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   7

     ICD_9_     CCS_CATEGORY_
 Obs CM_CODE     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION

 997  05413     Viral infect     HERPETIC INFECT OF PENIS                                        
 998  05419     Viral infect     GENITAL HERPES NEC                                              
 999  0542      Viral infect     HERPETIC GINGIVOSTOMAT                                          
1000  0546      Viral infect     HERPETIC WHITLOW                                                
1001  05473     Viral infect     H SIMPLEX OTITIS EXTERNA                                        
1002  05479     Viral infect     H SIMPLEX COMPLICAT NEC                                         
1003  0548      Viral infect     H SIMPLEX COMPLICAT NOS                                         
1004  0549      Viral infect     HERPES SIMPLEX NOS                                              
1514  05320     Eye infectn      HERPES ZOSTER OF EYELID                                         
1515  05321     Eye infectn      H ZOSTER KERATOCONJUNCT                                         
1516  05322     Eye infectn      H ZOSTER IRIDOCYCLITIS                                          
1517  05329     Eye infectn      HERPES ZOSTER OF EYE NEC                                        

 
 Obs description

 997 Herpetic infection of penis                                                                                                                      
 998 Other genital herpes                                                                                                                             
 999 Herpetic gingivostomatitis                                                                                                                       
1000 Herpetic whitlow                                                                                                                                 
1001 Herpes simplex otitis externa                                                                                                                    
1002 Herpes simplex with other specified complications                                                                                                
1003 Herpes simplex with unspecified complication                                                                                                     
1004 Herpes simplex without mention of complication                                                                                                   
1514 Herpes zoster dermatitis of eyelid                                                                                                               
1515 Herpes zoster keratoconjunctivitis                                                                                                               
1516 Herpes zoster iridocyclitis                                                                                                                      
1517 Herpes zoster with other ophthalmic complications                                                                                                

                                                                                                  Infection_
 Obs Infection    UABgroup                                Infection_Category                       Location

 997     Y                                                herpes                                            
 998     Y                                                herpes                                            
 999     Y                                                herpes                                            
1000     Y                                                herpes                                            
1001     Y                                                herpes                                            
1002     Y                                                herpes                                            
1003     Y                                                herpes                                            
1004     Y                                                herpes                                            
1514     Y        zoster                                  zoster                                            
1515     Y        zoster                                  zoster                                            
1516     Y        zoster                                  zoster                                            
1517     Y        zoster                                  zoster                                            

     Infectious_                             bacterial_    other_types_
 Obs  Organism      OI    Viral    Fungal    infection     of_infection

 997                      viral                                        
 998                      viral                                        
 999                      viral                                        
1000                      viral                                        
1001                      viral                                        
1002                      viral                                        
1003                      viral                                        
1004                      viral                                        
1514                      viral                                        
1515                      viral                                        
1516                      viral                                        
1517                      viral                                        
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 25 observations read from the data set WORK.ICD9_INFECTION.
      WHERE Infection_Category in ('herpes', 'zoster');
NOTE: The PROCEDURE PRINT printed pages 6-7.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
      

303        
304        proc print data=icd9_infection;
305        var ICD_9_CM_CODE CCS_CATEGORY_DESCRIPTION ICD_9_CM_CODE_DESCRIPTION
306        description Infection UABgroup Infection_Category Infection_Location Infectious_Organism OI Viral Fungal bacterial_infection
306      ! other_types_of_infection;
307        
308        where not missing(oi) and Infection^=" " and  Infection_Category not in ("zoster" "tuberculosis");
309        run;

NOTE: No observations were selected from data set WORK.ICD9_INFECTION.
NOTE: There were 0 observations read from the data set WORK.ICD9_INFECTION.
      WHERE (not MISSING(oi)) and (Infection not = ' ') and Infection_Category not in ('tuberculosis', 'zoster');
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

310        
311        
312        data icd9_inf;
313        length ICD_9_CM_CODE $18;
314        set icd9_infection;
315        keep
316        ICD_9_CM_CODE ICD_9_CM_CODE_DESCRIPTION Infection Infection_Category Infection_Location Infectious_Organism OI Viral Fungal
316      ! bacterial_infection other_types_of_infection;
317        where Infection^=" ";
318        run;

NOTE: There were 896 observations read from the data set WORK.ICD9_INFECTION.
      WHERE Infection not = ' ';
NOTE: The data set WORK.ICD9_INF has 896 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

319        
320        proc print data=icd9_infection (obs=10);run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   8

                                                                                                                                     OPTIONAL_CCS_
     ICD_9_                     CCS_CATEGORY_                                                                         OPTIONAL_        CATEGORY_
 Obs CM_CODE    CCS_CATEGORY     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION                                           CCS_CATEGORY      DESCRIPTI

   1  1371                 1    Tuberculosis     LATE EFFECT CNS TB                                                                               
   2  1372                 1    Tuberculosis     LATE EFFECT GU TB                                                                                
   3  1373                 1    Tuberculosis     LATE EFF BONE & JOINT TB                                                                         
   4  1374                 1    Tuberculosis     LATE EFFECT TB NEC                                                                               
   5  V1201                1    Tuberculosis     HX TUBERCULOSIS (Begin 1                                                                         
   6  0203               122    Pneumonia        PRIMARY PNEUMONIC PLAGUE                                                                         
   7  0204               122    Pneumonia        SECONDARY PNEUMON PLAGUE                                                                         
   8  0205               122    Pneumonia        PNEUMONIC PLAGUE NOS                                                                             
   9  0212               122    Pneumonia        PULMONARY TULAREMIA                                                                              
  10  0221               122    Pneumonia        PULMONARY ANTHRAX                                                                                

 
 
 Obs description

   1 Late effects of central nervous system tuberculosis                                                                                              
   2 Late effects of genitourinary tuberculosis                                                                                                       
   3 Late effects of tuberculosis of bones and joints                                                                                                 
   4 Late effects of tuberculosis of other specified organs                                                                                           
   5 Personal history of tuberculosis                                                                                                                 
   6 Primary pneumonic plague                                                                                                                         
   7 Secondary pneumonic plague                                                                                                                       
   8 Pneumonic plague, unspecified                                                                                                                    
   9 Pulmonary tularemia                                                                                                                              
  10 Pulmonary anthrax                                                                                                                                

 
                                                                                                     Infection_  Infectious_
 Obs UABlist  Infection  UABgroup                              Infection_Category                     Location    Organism    OI  Viral  Fungal

   1                                                                                                                                           
   2                                                                                                                                           
   3                                                                                                                                           
   4                                                                                                                                           
   5                                                                                                                                           
   6              Y                                            plague                                                                          
   7              Y                                            plague                                                                          
   8              Y                                            plague                                                                          
   9    Y         Y      tularemia                             tularemia                                                                       
  10              Y                                            anthrax                                                                         

 
     bacterial_    other_types_
 Obs infection     of_infection    VAR19

   1                                                         
   2                                                         
   3                                                         
   4                                                         
   5                                                         
   6                                                         
   7                                                         
   8                                                         
   9                                                         
  10                                                         
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 10 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE PRINT printed page 8.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

321        proc freq data=icd9_inf ; tables Infection_Category Infection;run;

                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018   9

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              GI abscess                                     8        1.07             8         1.07  
                              HSV                                            6        0.80            14         1.87  
                              Plague                                         1        0.13            15         2.00  
                              Q fever                                        1        0.13            16         2.14  
                              UTI                                            1        0.13            17         2.27  
                              abdominal abscess                             19        2.54            36         4.81  
                              actinomycosis                                  7        0.93            43         5.74  
                              anthrax                                        3        0.40            46         6.14  
                              bacteremia                                     3        0.40            49         6.54  
                              bacteremia septicemia                         20        2.67            69         9.21  
                              borrelia                                       5        0.67            74         9.88  
                              brain abscess                                  3        0.40            77        10.28  
                              brucella                                       6        0.80            83        11.08  
                              candidiasis                                    1        0.13            84        11.21  
                              cat-scratch                                    1        0.13            85        11.35  
                              cjd                                            2        0.27            87        11.62  
                              cowpox                                         1        0.13            88        11.75  
                              device associated infections                  11        1.47            99        13.22  
                              encephalitis                                  36        4.81           135        18.02  
                              endocarditis                                  12        1.60           147        19.63  
                              endophthalmitis                                5        0.67           152        20.29  
                              filarial or other parasitis                   66        8.81           218        29.11  
                              gastroenteritis                               70        9.35           288        38.45  
                              hepatitis                                      1        0.13           289        38.58  
                              herpes                                        11        1.47           300        40.05  
                              infectious conjunctivitis                      7        0.93           307        40.99  
                              leprosy                                        8        1.07           315        42.06  
                              leptospirosis                                  4        0.53           319        42.59  
                              leshmaniasis                                   6        0.80           325        43.39  
                              malaria                                       10        1.34           335        44.73  
                              measles                                        1        0.13           336        44.86  
                              meningitis                                    20        2.67           356        47.53  
                              myocarditis                                    5        0.67           361        48.20  
                              ocular infection                               3        0.40           364        48.60  
                              osteomyelitis                                 51        6.81           415        55.41  
                              pericarditis                                   2        0.27           417        55.67  
                              plague                                         6        0.80           423        56.48  
                              pneumonia                                     47        6.28           470        62.75  
                              pneumonitis                                    1        0.13           471        62.88  
                              prostate infections                            2        0.27           473        63.15  
                              pyelonephritis urine tract infection           9        1.20           482        64.35  
                              rickettsia                                    18        2.40           500        66.76  
                              septic arthritis                              27        3.60           527        70.36  
                              skin and soft tissue                           4        0.53           531        70.89  
                              skin and soft tissue infection                52        6.94           583        77.84  
                              syphilis and other venereal disease,          94       12.55           677        90.39  
                              trypanosomiasis                                5        0.67           682        91.05  
                              tularemia                                      6        0.80           688        91.86  
                              upper respiratory tract infection             45        6.01           733        97.86  
                              viral hepatitis                                1        0.13           734        98.00  
                              viremia                                        1        0.13           735        98.13  
                              zoster                                        14        1.87           749       100.00  

                                                               Frequency Missing = 147


                                                                                  Cumulative    Cumulative
                                            Infection    Frequency     Percent     Frequency      Percent
                                            --------------------------------------------------------------
                                            T                  28        3.13            28         3.13  
                                            Y                 868       96.88           896       100.00  
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 896 observations read from the data set WORK.ICD9_INF.
NOTE: The PROCEDURE FREQ printed page 9.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      

322        
323        
324        /*Infection_Category="tuberculosis";*/
325        
7                                                                   The SAS System                                          18:21 Monday, May 21, 2018

326        data outcome_infection_dx(drop=rc);
327            if _N_=1 then do;
328                declare hash HDX(dataset:"icd9_inf");
329                rc = HDX.definekey("ICD_9_CM_CODE");
330                rc = HDX.definedata(ALL:"YES");
331                rc=HDX.definedone();
332            end;
333        if 0 then set icd9_inf;
334        set &indxdat. ;
335        by database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE;
336        /*length outcome $20 outcome_date 4;*/
337        /*format outcome_date mmddyy10.;*/
338                rc =HDX.find(key:DX);
339                if rc=0 then output outcome_infection_dx;
340        where ENC_TYPE in ('IP' 'ER' 'AV' 'NH' 'HH' 'ED');
341        run;

NOTE: There were 896 observations read from the data set WORK.ICD9_INF.
NOTE: There were 5928438 observations read from the data set UCB.TEMPINCDXALL.
      WHERE ENC_TYPE in ('AV', 'ED', 'ER', 'HH', 'IP', 'NH');
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: The data set WORK.OUTCOME_INFECTION_DX has 269203 observations and 34 variables.
NOTE: DATA statement used (Total process time):
      real time           2.74 seconds
      cpu time            4.13 seconds
      

342        proc sort data=outcome_infection_dx nodupkey; by database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE DX ENC_TYPE;run;

NOTE: There were 269203 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: 103972 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_INFECTION_DX has 165231 observations and 34 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.53 seconds
      cpu time            0.81 seconds
      

343        
344        proc freq data=outcome_infection_dx; tables Infection_Category Infection;run;

                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018  10

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              GI abscess                                  2615        1.70          2615         1.70  
                              HSV                                          200        0.13          2815         1.83  
                              Q fever                                        2        0.00          2817         1.83  
                              UTI                                         1259        0.82          4076         2.65  
                              abdominal abscess                           2294        1.49          6370         4.14  
                              actinomycosis                                 68        0.04          6438         4.18  
                              bacteremia septicemia                       5896        3.83         12334         8.02  
                              borrelia                                     673        0.44         13007         8.45  
                              brain abscess                                154        0.10         13161         8.55  
                              brucella                                       1        0.00         13162         8.55  
                              candidiasis                                   17        0.01         13179         8.56  
                              cat-scratch                                    7        0.00         13186         8.57  
                              cjd                                            1        0.00         13187         8.57  
                              device associated infections                1812        1.18         14999         9.75  
                              encephalitis                                  13        0.01         15012         9.76  
                              endocarditis                                 222        0.14         15234         9.90  
                              endophthalmitis                               44        0.03         15278         9.93  
                              filarial or other parasitis                   48        0.03         15326         9.96  
                              gastroenteritis                             4980        3.24         20306        13.20  
                              herpes                                      1036        0.67         21342        13.87  
                              infectious conjunctivitis                     36        0.02         21378        13.89  
                              leprosy                                        1        0.00         21379        13.89  
                              leptospirosis                                  1        0.00         21380        13.89  
                              leshmaniasis                                   2        0.00         21382        13.90  
                              meningitis                                    73        0.05         21455        13.94  
                              myocarditis                                    3        0.00         21458        13.94  
                              ocular infection                              76        0.05         21534        13.99  
                              osteomyelitis                               3460        2.25         24994        16.24  
                              plague                                         1        0.00         24995        16.24  
                              pneumonia                                  17847       11.60         42842        27.84  
                              pneumonitis                                    1        0.00         42843        27.84  
                              prostate infections                            3        0.00         42846        27.84  
                              pyelonephritis urine tract infection       27345       17.77         70191        45.62  
                              rickettsia                                    38        0.02         70229        45.64  
                              septic arthritis                             899        0.58         71128        46.22  
                              skin and soft tissue                         112        0.07         71240        46.30  
                              skin and soft tissue infection             25267       16.42         96507        62.72  
                              syphilis and other venereal disease,        1792        1.16         98299        63.88  
                              upper respiratory tract infection          52613       34.19        150912        98.07  
                              viremia                                       26        0.02        150938        98.09  
                              zoster                                      2938        1.91        153876       100.00  

                                                              Frequency Missing = 11355


                                                                                  Cumulative    Cumulative
                                            Infection    Frequency     Percent     Frequency      Percent
                                            --------------------------------------------------------------
                                            T                 379        0.23           379         0.23  
                                            Y              164852       99.77        165231       100.00  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 165231 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: The PROCEDURE FREQ printed page 10.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.20 seconds
      cpu time            0.14 seconds
      

345        
346        data NDC_PYRAZINAMIDE;
347        set NDC.TB_ALL_2016;
348        /*NDC=code;*/
349        where gnn="PYRAZINAMIDE";
350        run;

NOTE: There were 32 observations read from the data set NDC.TB_ALL_2016.
      WHERE gnn='PYRAZINAMIDE';
NOTE: The data set WORK.NDC_PYRAZINAMIDE has 32 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
      

351        
352        data outcome_infection_rx(drop=rc:)  outcome_rx_TB(drop=rc:);
353            if _N_=1 then do;
354                declare hash HRX(dataset:"NDC.Antibiotics_parenteral_ndc");
355                rc = HRX.definekey("NDC");
356        /*        rc = HRX.definedata(ALL:"YES");*/
357                rc=HRX.definedone();
358        
359                declare hash HTB(dataset:"NDC_PYRAZINAMIDE");
360                rc = HTB.definekey("code");
8                                                                   The SAS System                                          18:21 Monday, May 21, 2018

361        /*        rc = HTB.definedata(all:"YES");*/
362                rc=HTB.definedone();
363        
364            end;
365        if 0 then set NDC.Antibiotics_parenteral_ndc(keep=NDC) NDC_PYRAZINAMIDE(keep=code);
366        set &inrxdat. ;
367        by database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE;
368        /*length outcome $20 outcome_date 4;*/
369        /*format outcome_date mmddyy10.;*/
370                rc1 =HRX.find(key:NDC);
371                rc2 =HTB.find(key:NDC);
372        
373                if rc1=0 then output outcome_infection_rx;
374                if rc2=0 then output outcome_rx_TB;
375        run;

NOTE: There were 3057 observations read from the data set NDC.ANTIBIOTICS_PARENTERAL_NDC.
NOTE: There were 32 observations read from the data set WORK.NDC_PYRAZINAMIDE.
NOTE: There were 4273219 observations read from the data set UCB.TEMPINCRXALL.
NOTE: The data set WORK.OUTCOME_INFECTION_RX has 4940 observations and 16 variables.
NOTE: The data set WORK.OUTCOME_RX_TB has 36 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           2.49 seconds
      cpu time            2.35 seconds
      

376        
377        
378        data outcome_infection_px(drop=rc:);
379            if _N_=1 then do;
380                declare hash HPX(dataset:"NDC.Antibiotics_parenteral_hcpcs");
381                rc = HPX.definekey("HCPCS_CD");
382                rc = HPX.definedata(ALL:"YES");
383                rc=HPX.definedone();
384            end;
385        if 0 then set NDC.Antibiotics_parenteral_hcpcs;
386        set &inpxdat. ;
387        by database exposure patid exposureStart exposureEnd exposureID PX_DATE;
388        /*length outcome $20 outcome_date 4;*/
389        /*format outcome_date mmddyy10.;*/
390                rc1 =HPX.find(key:PX);
391        
392                if rc1=0 then output outcome_infection_Px;
393        run;

NOTE: There were 69 observations read from the data set NDC.ANTIBIOTICS_PARENTERAL_HCPCS.
NOTE: There were 1987380 observations read from the data set WORK.TEMPINCPXALL.
NOTE: The data set WORK.OUTCOME_INFECTION_PX has 11367 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           1.06 seconds
      cpu time            0.99 seconds
      

394        
395        
396        data outcome_infection_trt(label="parenteral antibiotics(PX+RX) for Infection");
397        set outcome_infection_px outcome_infection_rx;
398        length trt_date 4;
399        format trt_date mmddyy10.;
400        trt_date=coalesce(PX_DATE , DISPENSE_DATE);
401        run;

NOTE: There were 11367 observations read from the data set WORK.OUTCOME_INFECTION_PX.
NOTE: There were 4940 observations read from the data set WORK.OUTCOME_INFECTION_RX.
NOTE: The data set WORK.OUTCOME_INFECTION_TRT has 16307 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

402        
403        
9                                                                   The SAS System                                          18:21 Monday, May 21, 2018

404        
405        data outcome_infection(keep=database exposure patid exposureStart exposureEnd exposureID outcome_date dx TRT_DATE BEGIN_DATE ADMIT_DATE
405      ! ENC_TYPE Infection_Category Infection outcome_start_date PDX) ;
406        if _N_=1 then do;
407                declare hash HTRT(dataset:"outcome_infection_trt");
408                rc = HTRT.definekey("database", "exposure", "PATID", "exposureStart", "exposureEnd", "exposureID", "TRT_DATE");
409        /*        rc = HTRT.definedata(ALL:"YES");*/
410                rc=HTRT.definedone();
411            end;
412        if 0 then set outcome_infection_trt(keep=database exposure patid exposureStart exposureEnd exposureID TRT_DATE);
413        set outcome_infection_dx;
414        length outcome_date outcome_start_date 4;
415        format outcome_date outcome_start_date mmddyy10.;
416                rc=HTRT.find(key:database, key:exposure, key:patid, key:exposureStart, key:exposureEnd, key:exposureID, key:BEGIN_DATE);
417                outcome_date=BEGIN_DATE;
418                outcome_start_date=outcome_date;
419                if rc=0  then do;
420                    output;
421                end; else do;
422                TRT_DATE=.;
423                if ENC_TYPE in ( 'IP') then output;
424                end;
425        run;

NOTE: There were 16307 observations read from the data set WORK.OUTCOME_INFECTION_TRT.
NOTE: There were 165231 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: The data set WORK.OUTCOME_INFECTION has 38232 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.28 seconds
      cpu time            0.24 seconds
      

426        
427        proc sort data=outcome_infection nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date dx pdx;run;

NOTE: There were 38232 observations read from the data set WORK.OUTCOME_INFECTION.
NOTE: 69 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_INFECTION has 38163 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      

428        data outcome_infection ; set outcome_infection; by database exposure patid exposureStart exposureEnd exposureID outcome_date dx;  /* format
428      !  dx $Icd9fmt.; */  run;

NOTE: There were 38163 observations read from the data set WORK.OUTCOME_INFECTION.
NOTE: The data set WORK.OUTCOME_INFECTION has 38163 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

429        
430        proc sort data=outcome_infection nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date ;run;

NOTE: There were 38163 observations read from the data set WORK.OUTCOME_INFECTION.
NOTE: 16600 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_INFECTION has 21563 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      

431        
432        proc datasets nolist; delete
433        /* icd9_infection */
434        icd9_inf
435        /* outcome_infection_dx */
436        outcome_rx_TB
437        NDC_PYRAZINAMIDE
438        outcome_infection_px
10                                                                  The SAS System                                          18:21 Monday, May 21, 2018

439        outcome_infection_rx
440        outcome_infection_trt
441        ;
442        quit;

NOTE: Deleting WORK.ICD9_INF (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_RX_TB (memtype=DATA).
NOTE: Deleting WORK.NDC_PYRAZINAMIDE (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_INFECTION_PX (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_INFECTION_RX (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_INFECTION_TRT (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
      

443        
444        
445        /*
446        Write to permanent SAS library
447         */
448        proc sql;
449          create table DT.hospitalizedInfectionEpisodesInc as
450            select * from Work.outcome_infection;
NOTE: Table DT.HOSPITALIZEDINFECTIONEPISODESINC created, with 21563 rows and 16 columns.

451        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

452        
453        
454        /*
455        Data checks
456         */
457        proc contents data = DT.hospitalizedInfectionEpisodesInc order = varnum;
458        run;

                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018  11

                                                                The CONTENTS Procedure

                               Data Set Name        DT.HOSPITALIZEDINFECTIONEPISODESINC    Observations          21563
                               Member Type          DATA                                   Variables             16   
                               Engine               V9                                     Indexes               0    
                               Created              05/21/2018 18:22:36                    Observation Length    152  
                               Last Modified        05/21/2018 18:22:36                    Deleted Observations  0    
                               Protection                                                  Compressed            NO   
                               Data Set Type                                               Sorted                YES  
                               Label                                                                                  
                               Data Representation  WINDOWS_64                                                        
                               Encoding             wlatin1  Western (Windows)                                        


                                                          Engine/Host Dependent Information

                               Data Set Page Size          65536                                                       
                               Number of Data Set Pages    51                                                          
                               First Data Page             1                                                           
                               Max Obs per Page            430                                                         
                               Obs in First Data Page      412                                                         
                               Number of Data Set Repairs  0                                                           
                               ExtendObsCounter            YES                                                         
                               Filename                    V:\studies\AS\data\hospitalizedinfectionepisodesinc.sas7bdat
                               Release Created             9.0401M5                                                    
                               Host Created                X64_DS08R2                                                  
                               Owner Name                  AD\benjaminchan                                             
                               File Size                   3MB                                                         
                               File Size (bytes)           3407872                                                     


                                                              Variables in Creation Order
 
                        #    Variable              Type    Len    Format       Informat    Label

                        1    database              Char     10                                                                 
                        2    PATID                 Char     20                             Unique Patient Identification Number
                        3    exposure              Char     11                                                                 
                        4    exposureStart         Num       8    MMDDYY10.                                                    
                        5    exposureEnd           Num       8    MMDDYY10.                                                    
                        6    exposureID            Num       8                                                                 
                        7    trt_date              Num       4    MMDDYY10.                                                    
                        8    Infection             Char      1    $1.          $1.                                             
                        9    Infection_Category    Char     36    $36.         $36.                                            
                       10    ENC_TYPE              Char      2                             Encounter Type                      
                       11    ADMIT_DATE            Num       8    MMDDYY10.                Admission Date                      
                       12    BEGIN_DATE            Num       8    MMDDYY10.                Beginning Date of Service           
                       13    DX                    Char     18                             Diagnosis Code                      
                       14    PDX                   Char      2                             Primary Diagnosis                   
                       15    outcome_date          Num       4    MMDDYY10.                                                    
                       16    outcome_start_date    Num       4    MMDDYY10.                                                    


                                                                   Sort Information

                               Sortedby       database exposure PATID exposureStart exposureEnd exposureID outcome_date
                               Validated      YES                                                                      
                               Character Set  ANSI                                                                     
                               Sort Option    NODUPKEY                                                                 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 11.

459        proc sql;
460          select "Summary of DT.hospitalizedInfectionEpisodesInc" as table,
461                 database,
462                 count(*) as denom
463            from DT.hospitalizedInfectionEpisodesInc
464            group by database;
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018  12

                                         table                                           database       denom
                                         --------------------------------------------------------------------
                                         Summary of DT.hospitalizedInfectionEpisodesInc  MPCD             417
                                         Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan      2191
                                         Summary of DT.hospitalizedInfectionEpisodesInc  Medicare       18955
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
465          select "Summary of DT.hospitalizedInfectionEpisodesInc" as table,
466                 A.database,
467                 A.infection_category,
468                 count(distinct A.patid) as countDistinctPatid,
469                 count(*) as countRows,
470                 count(*) / denom format = percent8.1 as pctWithinDatabase
471            from DT.hospitalizedInfectionEpisodesInc A inner join
472                 (select database, count(*) as denom from Work.outcome_infection group by database) B  on (A.database = B.database)
473            group by A.database, A.infection_category;
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018  13

                                                                                                                count
                                                                                                             Distinct                pctWithin
       table                                           database    Infection_Category                           Patid  countRows      Database
       ---------------------------------------------------------------------------------------------------------------------------------------
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD                                                        35         43        10.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        GI abscess                                       7          7         1.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        UTI                                              2          2         0.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        abdominal abscess                                3          3         0.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        bacteremia septicemia                           33         48        11.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        borrelia                                         1          1         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        brain abscess                                    1          1         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        device associated infections                     1          1         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        endocarditis                                     1          1         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        gastroenteritis                                 24         33         7.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        meningitis                                       1          1         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        osteomyelitis                                    6          7         1.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        pneumonia                                       65         83        19.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        pyelonephritis urine tract infection            48         64        15.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        septic arthritis                                 1          2         0.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        skin and soft tissue infection                  47         56        13.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        upper respiratory tract infection               48         63        15.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        zoster                                           1          1         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan                                                 134        156         7.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  GI abscess                                      53         69         3.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  UTI                                             10         10         0.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  abdominal abscess                               32         38         1.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  actinomycosis                                    2          4         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  bacteremia septicemia                          172        263        12.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  borrelia                                         6         20         0.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  brain abscess                                    4          8         0.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  device associated infections                    17         25         1.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  endocarditis                                     3          3         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  gastroenteritis                                121        172         7.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  herpes                                          10         12         0.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  leptospirosis                                    1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  meningitis                                       5          7         0.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  myocarditis                                      1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  osteomyelitis                                    9         14         0.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  pneumonia                                      224        296        13.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  pyelonephritis urine tract infection           200        277        12.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  rickettsia                                       1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  septic arthritis                                 9         20         0.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  skin and soft tissue                             1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  skin and soft tissue infection                 168        271        12.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  syphilis and other venereal disease,            12         12         0.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  upper respiratory tract infection              322        500        22.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  zoster                                           9         10         0.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare                                                  1560       2330        12.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    GI abscess                                     302        377         2.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    HSV                                              3          9         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    Q fever                                          1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    UTI                                             48         72         0.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    abdominal abscess                              174        215         1.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    actinomycosis                                    4          6         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    bacteremia septicemia                         1935       2906        15.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    borrelia                                        13        129         0.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    brain abscess                                   17         19         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    candidiasis                                      3          4         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    device associated infections                   125        165         0.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    encephalitis                                     2          2         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    endocarditis                                    16         18         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    endophthalmitis                                  2          2         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    filarial or other parasitis                      1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    gastroenteritis                               1168       1650         8.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    herpes                                          61         66         0.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    infectious conjunctivitis                        1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    meningitis                                      14         14         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    osteomyelitis                                  171        249         1.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    pneumonia                                     2251       3541        18.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    pneumonitis                                      1          1         0.0% 
 
                                                        queryOutcomeHospitalizedInfection.sas
                                                                  --- AS project ---                                    18:21 Monday, May 21, 2018  14

                                                                                                                count
                                                                                                             Distinct                pctWithin
       table                                           database    Infection_Category                           Patid  countRows      Database
       ---------------------------------------------------------------------------------------------------------------------------------------
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    pyelonephritis urine tract infection          1689       2575        13.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    rickettsia                                       2          2         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    septic arthritis                                59         70         0.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    skin and soft tissue                            13         13         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    skin and soft tissue infection                1180       1826         9.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    syphilis and other venereal disease,            78        118         0.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    upper respiratory tract infection             1339       2429        12.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    viremia                                          1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    zoster                                         117        143         0.8% 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
474        quit;
NOTE: The PROCEDURE SQL printed pages 12-14.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.23 seconds
      cpu time            0.15 seconds
      

475        
476        
477        /*
478        Copy data sets to permanent library for use later
11                                                                  The SAS System                                          18:21 Monday, May 21, 2018

479         */
480        proc copy out = DT in = Work;
481          select icd9_infection outcome_infection_dx;
482        run;

NOTE: Copying WORK.ICD9_INFECTION to DT.ICD9_INFECTION (memtype=DATA).
NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The data set DT.ICD9_INFECTION has 1725 observations and 19 variables.
NOTE: Copying WORK.OUTCOME_INFECTION_DX to DT.OUTCOME_INFECTION_DX (memtype=DATA).
NOTE: There were 165231 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: The data set DT.OUTCOME_INFECTION_DX has 165231 observations and 34 variables.
NOTE: PROCEDURE COPY used (Total process time):
      real time           0.24 seconds
      cpu time            0.17 seconds
      

483        
484        
485        
486        
487        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           40.93 seconds
      cpu time            1:03.89
      
