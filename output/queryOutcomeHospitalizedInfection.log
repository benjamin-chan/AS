1                                                                                           The SAS System                                                               10:43 Monday, November 5, 2018

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           4.02 seconds
      cpu time            0.31 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          
4          Programmer Lang Chen @UAB
5          created: 8/24/2016
6          modiflied :
7          Project:
8          Task: define outcome for Pfizer Tofacitinib 2016 with PECORI common data model data
9          Output: Dataset outcome
10         
11         NOTE RUN queryOutcomeOpportunisticInfection.sas AFTER
12         
2                                                                                           The SAS System                                                               10:43 Monday, November 5, 2018

13         TODO:
14         **********************************************************************;
15         options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
16         * Programmer    : Benjamin Chan <chanb@ohsu.edu>
17         * Creation date :
18         * Modify date   :
19         ;
20         %let cmt=queryOutcomeHospitalizedInfection; * type the name of your program here (without the filename extension);
21         %let pgm=&cmt..sas;
22         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref UCB64 was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB64\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
154        footnote "&pgm.";
155        * footnote2 "%sysfunc(datetime(),datetime14.)";
156        title1 '--- AS project ---';
157        **********************************************************************;
158        options macrogen mlogic mprint symbolgen;
159        options nomacrogen nomlogic nomprint nosymbolgen;
160        
161        
162        ods html
163          body = "output\&cmt..html"
164          style = Statistical;
NOTE: Writing HTML Body file: output\queryOutcomeHospitalizedInfection.html
165        
166        
167        /*
168        Kevin's request 4/25/2018:
169        Exclude OI's from hospitalized infection capture
170         */
171        
172        
173        *To edit the following two lines only;
174        
175        %let indxdat = UCB64.tempIncDxAll;
176        %let inpxdat = UCB64.tempIncPxAll;
177        %let inrxdat = UCB64.tempIncRxAll;
178        proc sort data = &indxdat; by database exposure patid exposureStart exposureEnd exposureID begin_date;
179        run;

NOTE: There were 2978141 observations read from the data set UCB64.TEMPINCDXALL.
NOTE: The data set UCB64.TEMPINCDXALL has 2978141 observations and 25 variables.
NOTE: Compressing data set UCB64.TEMPINCDXALL decreased size by 91.80 percent.
NOTE: PROCEDURE SORT used (Total process time):
      real time           4.11 seconds
      cpu time            7.89 seconds
      

180        proc sort data = &inpxdat; by database exposure patid exposureStart exposureEnd exposureID px_date;
181        run;
3                                                                   The SAS System                                      10:43 Monday, November 5, 2018


NOTE: There were 4293010 observations read from the data set UCB64.TEMPINCPXALL.
NOTE: The data set UCB64.TEMPINCPXALL has 4293010 observations and 23 variables.
NOTE: Compressing data set UCB64.TEMPINCPXALL decreased size by 90.42 percent.
NOTE: PROCEDURE SORT used (Total process time):
      real time           7.44 seconds
      cpu time            12.44 seconds
      

182        proc sort data = &inrxdat; by database exposure patid exposureStart exposureEnd exposureID dispense_date;
183        run;

NOTE: There were 2132051 observations read from the data set UCB64.TEMPINCRXALL.
NOTE: The data set UCB64.TEMPINCRXALL has 2132051 observations and 17 variables.
NOTE: Compressing data set UCB64.TEMPINCRXALL decreased size by 90.52 percent.
NOTE: PROCEDURE SORT used (Total process time):
      real time           3.94 seconds
      cpu time            6.52 seconds
      

184        
185        /*
186        Keep only the HCPCS codes
187        Re-length the px variable
188         */
189        data Work.tempIncPxAll;
190          length px $5;
191          set &inpxdat.;
192          if px_type = "H1" then output;
193        run;

WARNING: Multiple lengths were specified for the variable px by input data set(s). This can cause truncation of data.
NOTE: There were 4293010 observations read from the data set UCB64.TEMPINCPXALL.
NOTE: The data set WORK.TEMPINCPXALL has 994051 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           1.73 seconds
      cpu time            1.71 seconds
      

194        proc sql;
195          select "Check length of px variable in Work.tempIncPxAll" as table,  px_type, length(px) as lengthPx, count(*) as n
196          from Work.tempIncPxAll
197          group by px_type, calculated lengthPx;
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   1

                                                                                     Procedure
                                   table                                             Code Type  lengthPx         n
                                   -------------------------------------------------------------------------------
                                   Check length of px variable in Work.tempIncPxAll  H1                5    994051
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
198        quit;
NOTE: The PROCEDURE SQL printed page 1.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.63 seconds
      cpu time            0.95 seconds
      

199        %let inpxdat = Work.tempIncPxAll;
200        
201        /*
202        proc datasets nolist; delete
203        icd9_infection
204        icd9_inf
205        outcome_infection_dx
206        outcome_rx_TB
207        NDC_PYRAZINAMIDE
208        outcome_infection_px
209        outcome_infection_rx
210        outcome_infection_trt
211        outcome_infection
212        ;
213        quit;
214         */
215        proc import datafile='U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv'
216            out=icd9_infection dbms = csv replace;
217            guessingrows = 1000;
218        run;

Number of names found is less than number of variables found. 
4                                                                   The SAS System                                      10:43 Monday, November 5, 2018

Number of names found is less than number of variables found. 
219         /**********************************************************************
220         *   PRODUCT:   SAS
221         *   VERSION:   9.4
222         *   CREATOR:   External File Interface
223         *   DATE:      05NOV18
224         *   DESC:      Generated SAS Datastep Code
225         *   TEMPLATE SOURCE:  (None Specified.)
226         ***********************************************************************/
227            data WORK.ICD9_INFECTION    ;
228            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
229            infile 'U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
230               informat ICD_9_CM_CODE $5. ;
231               informat CCS_CATEGORY best32. ;
232               informat CCS_CATEGORY_DESCRIPTION $12. ;
233               informat ICD_9_CM_CODE_DESCRIPTION $64. ;
234               informat OPTIONAL_CCS_CATEGORY $1. ;
235               informat OPTIONAL_CCS_CATEGORY_DESCRIPTI $1. ;
236               informat description $146. ;
237               informat UABlist $1. ;
238               informat Infection $1. ;
239               informat UABgroup $36. ;
240               informat Infection_Category $36. ;
241               informat Infection_Location $1. ;
242               informat Infectious_Organism $1. ;
243               informat OI $2. ;
244               informat Viral $5. ;
245               informat Fungal $1. ;
246               informat bacterial_infection $1. ;
247               informat other_types_of_infection $1. ;
248               informat VAR19 $26. ;
249               format ICD_9_CM_CODE $5. ;
250               format CCS_CATEGORY best12. ;
251               format CCS_CATEGORY_DESCRIPTION $12. ;
252               format ICD_9_CM_CODE_DESCRIPTION $64. ;
253               format OPTIONAL_CCS_CATEGORY $1. ;
254               format OPTIONAL_CCS_CATEGORY_DESCRIPTI $1. ;
255               format description $146. ;
256               format UABlist $1. ;
257               format Infection $1. ;
258               format UABgroup $36. ;
259               format Infection_Category $36. ;
260               format Infection_Location $1. ;
261               format Infectious_Organism $1. ;
262               format OI $2. ;
263               format Viral $5. ;
264               format Fungal $1. ;
265               format bacterial_infection $1. ;
266               format other_types_of_infection $1. ;
267               format VAR19 $26. ;
268            input
269                        ICD_9_CM_CODE  $
270                        CCS_CATEGORY
271                        CCS_CATEGORY_DESCRIPTION  $
272                        ICD_9_CM_CODE_DESCRIPTION  $
273                        OPTIONAL_CCS_CATEGORY  $
274                        OPTIONAL_CCS_CATEGORY_DESCRIPTI  $
275                        description  $
276                        UABlist  $
277                        Infection  $
278                        UABgroup  $
279                        Infection_Category  $
280                        Infection_Location  $
281                        Infectious_Organism  $
282                        OI  $
283                        Viral  $
284                        Fungal  $
285                        bacterial_infection  $
286                        other_types_of_infection  $
287                        VAR19  $
288            ;
289            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
5                                                                   The SAS System                                      10:43 Monday, November 5, 2018

290            run;

NOTE: The infile 'U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=291233,
      Last Modified=03Apr2018:14:33:55,
      Create Time=03Apr2018:14:33:36

NOTE: 2230 records were read from the infile 'U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv'.
      The minimum record length was 44.
      The maximum record length was 266.
NOTE: The data set WORK.ICD9_INFECTION has 2230 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

2230 rows created in WORK.ICD9_INFECTION from U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv.
  
  
  
NOTE: WORK.ICD9_INFECTION data set was successfully created.
NOTE: The data set WORK.ICD9_INFECTION has 2230 observations and 19 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.81 seconds
      cpu time            0.71 seconds
      

291        data icd9_infection;
292        set icd9_infection;
293          where upcase(oi) ^= "OI";
294        Infection=upcase(Infection);
295        run;

NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
      WHERE UPCASE(oi) not = 'OI';
NOTE: The data set WORK.ICD9_INFECTION has 1725 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

296        proc freq data = Work.icd9_infection;
297          table oi / missprint;
298        run;

                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   2

                                                                  The FREQ Procedure

                                                                              Cumulative    Cumulative
                                               OI    Frequency     Percent     Frequency      Percent
                                               -------------------------------------------------------
                                                         1725                                         

                                                              Frequency Missing = 1725
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE FREQ printed page 2.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

299        proc print data=icd9_infection (obs=10);run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   3

                                                                                                                                     OPTIONAL_CCS_
     ICD_9_                     CCS_CATEGORY_                                                                         OPTIONAL_        CATEGORY_
 Obs CM_CODE    CCS_CATEGORY     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION                                           CCS_CATEGORY      DESCRIPTI

   1  1371                 1    Tuberculosis     LATE EFFECT CNS TB                                                                               
   2  1372                 1    Tuberculosis     LATE EFFECT GU TB                                                                                
   3  1373                 1    Tuberculosis     LATE EFF BONE & JOINT TB                                                                         
   4  1374                 1    Tuberculosis     LATE EFFECT TB NEC                                                                               
   5  V1201                1    Tuberculosis     HX TUBERCULOSIS (Begin 1                                                                         
   6  0203               122    Pneumonia        PRIMARY PNEUMONIC PLAGUE                                                                         
   7  0204               122    Pneumonia        SECONDARY PNEUMON PLAGUE                                                                         
   8  0205               122    Pneumonia        PNEUMONIC PLAGUE NOS                                                                             
   9  0212               122    Pneumonia        PULMONARY TULAREMIA                                                                              
  10  0221               122    Pneumonia        PULMONARY ANTHRAX                                                                                

 
 
 Obs description

   1 Late effects of central nervous system tuberculosis                                                                                              
   2 Late effects of genitourinary tuberculosis                                                                                                       
   3 Late effects of tuberculosis of bones and joints                                                                                                 
   4 Late effects of tuberculosis of other specified organs                                                                                           
   5 Personal history of tuberculosis                                                                                                                 
   6 Primary pneumonic plague                                                                                                                         
   7 Secondary pneumonic plague                                                                                                                       
   8 Pneumonic plague, unspecified                                                                                                                    
   9 Pulmonary tularemia                                                                                                                              
  10 Pulmonary anthrax                                                                                                                                

 
                                                                                                     Infection_  Infectious_
 Obs UABlist  Infection  UABgroup                              Infection_Category                     Location    Organism    OI  Viral  Fungal

   1                                                                                                                                           
   2                                                                                                                                           
   3                                                                                                                                           
   4                                                                                                                                           
   5                                                                                                                                           
   6              Y                                            plague                                                                          
   7              Y                                            plague                                                                          
   8              Y                                            plague                                                                          
   9    Y         Y      tularemia                             tularemia                                                                       
  10              Y                                            anthrax                                                                         

 
     bacterial_    other_types_
 Obs infection     of_infection    VAR19

   1                                                         
   2                                                         
   3                                                         
   4                                                         
   5                                                         
   6                                                         
   7                                                         
   8                                                         
   9                                                         
  10                                                         
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 10 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
      

300        
301        proc print data=icd9_infection ;
302          where ICD_9_CM_CODE=:"003";
303        run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   4

                                                                                                                                     OPTIONAL_CCS_
     ICD_9_                     CCS_CATEGORY_                                                                         OPTIONAL_        CATEGORY_
 Obs CM_CODE    CCS_CATEGORY     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION                                           CCS_CATEGORY      DESCRIPTI

 145  0030               135    Intest infct     SALMONELLA ENTERITIS                                                                             
 146  00320              135    Intest infct     LOCAL SALMONELLA INF NOS                                                                         
 147  00329              135    Intest infct     LOCAL SALMONELLA INF NEC                                                                         
 148  0038               135    Intest infct     SALMONELLA INFECTION NEC                                                                         
 149  0039               135    Intest infct     SALMONELLA INFECTION NOS                                                                         

 
 
 Obs description

 145 Salmonella gastroenteritis                                                                                                                       
 146 Localized salmonella infection, unspecified                                                                                                      
 147 Other localized salmonella infections                                                                                                            
 148 Other specified salmonella infections                                                                                                            
 149 Salmonella infection, unspecified                                                                                                                

 
                                                                                                     Infection_  Infectious_
 Obs UABlist  Infection  UABgroup                              Infection_Category                     Location    Organism    OI  Viral  Fungal

 145    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 146    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 147    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 148    Y         Y      gastroenteritis                       gastroenteritis                                                                 
 149    Y         Y      gastroenteritis                       gastroenteritis                                                                 

 
     bacterial_    other_types_
 Obs infection     of_infection    VAR19

 145                                                         
 146                                                         
 147                                                         
 148                                                         
 149                                                         
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 5 observations read from the data set WORK.ICD9_INFECTION.
      WHERE ICD_9_CM_CODE=:'003';
NOTE: The PROCEDURE PRINT printed page 4.
6                                                                   The SAS System                                      10:43 Monday, November 5, 2018

NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

304        
305        proc freq data=icd9_infection; tables Infection_Category Infection_Location;
306        run;

                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   5

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              GI abscess                                     8        1.06             8         1.06  
                              HSV                                            6        0.79            14         1.85  
                              Plague                                         1        0.13            15         1.98  
                              Q fever                                        1        0.13            16         2.12  
                              UTI                                            1        0.13            17         2.25  
                              abdominal abscess                             19        2.51            36         4.76  
                              actinomycosis                                  7        0.93            43         5.69  
                              anthrax                                        3        0.40            46         6.08  
                              bacteremia                                     3        0.40            49         6.48  
                              bacteremia septicemia                         20        2.65            69         9.13  
                              borrelia                                       5        0.66            74         9.79  
                              brain abscess                                  3        0.40            77        10.19  
                              brucella                                       6        0.79            83        10.98  
                              candidiasis                                    1        0.13            84        11.11  
                              cat-scratch                                    1        0.13            85        11.24  
                              cjd                                            2        0.26            87        11.51  
                              cowpox                                         1        0.13            88        11.64  
                              device associated infections                  11        1.46            99        13.10  
                              encephalitis                                  36        4.76           135        17.86  
                              endocarditis                                  12        1.59           147        19.44  
                              endophthalmitis                                5        0.66           152        20.11  
                              filarial or other parasitis                   67        8.86           219        28.97  
                              gastroenteritis                               70        9.26           289        38.23  
                              hepatitis                                      1        0.13           290        38.36  
                              herpes                                        11        1.46           301        39.81  
                              histoplasmosis                                 3        0.40           304        40.21  
                              infectious conjunctivitis                      7        0.93           311        41.14  
                              leprosy                                        8        1.06           319        42.20  
                              leptospirosis                                  4        0.53           323        42.72  
                              leshmaniasis                                   6        0.79           329        43.52  
                              malaria                                       10        1.32           339        44.84  
                              measles                                        1        0.13           340        44.97  
                              meningitis                                    21        2.78           361        47.75  
                              myocarditis                                    5        0.66           366        48.41  
                              ocular infection                               3        0.40           369        48.81  
                              osteomyelitis                                 51        6.75           420        55.56  
                              pericarditis                                   2        0.26           422        55.82  
                              plague                                         6        0.79           428        56.61  
                              pneumonia                                     47        6.22           475        62.83  
                              pneumonitis                                    1        0.13           476        62.96  
                              prostate infections                            2        0.26           478        63.23  
                              pyelonephritis urine tract infection           9        1.19           487        64.42  
                              rickettsia                                    18        2.38           505        66.80  
                              septic arthritis                              27        3.57           532        70.37  
                              skin and soft tissue                           4        0.53           536        70.90  
                              skin and soft tissue infection                52        6.88           588        77.78  
                              syphilis and other venereal disease,          94       12.43           682        90.21  
                              toxoplasmosis                                  2        0.26           684        90.48  
                              trypanosomiasis                                5        0.66           689        91.14  
                              tularemia                                      6        0.79           695        91.93  
                              upper respiratory tract infection             45        5.95           740        97.88  
                              viral hepatitis                                1        0.13           741        98.02  
                              viremia                                        1        0.13           742        98.15  
                              zoster                                        14        1.85           756       100.00  

                                                               Frequency Missing = 969


                                           Infection_                             Cumulative    Cumulative
                                           Location      Frequency     Percent     Frequency      Percent
                                           ---------------------------------------------------------------
                                                                                                          

                                                              Frequency Missing = 1725
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE FREQ printed page 5.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

307        proc freq data=icd9_infection; tables Infection_Category Infection_Location;
308        where not missing(oi) and Infection^=" " and  Infection_Category not in ("zoster" "tuberculosis");
309        run;

NOTE: No observations were selected from data set WORK.ICD9_INFECTION.
NOTE: There were 0 observations read from the data set WORK.ICD9_INFECTION.
      WHERE (not MISSING(oi)) and (Infection not = ' ') and Infection_Category not in ('tuberculosis', 'zoster');
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

310        proc print data=icd9_infection;
311        var ICD_9_CM_CODE CCS_CATEGORY_DESCRIPTION ICD_9_CM_CODE_DESCRIPTION
312        description Infection UABgroup Infection_Category Infection_Location Infectious_Organism OI Viral Fungal bacterial_infection
312      ! other_types_of_infection;
313        
314        where Infection_Category in ("zoster" "herpes");
315        run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   6

     ICD_9_     CCS_CATEGORY_
 Obs CM_CODE     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION

 983  05310     Viral infect     H ZOSTER NERV SYST NOS                                          
 984  05311     Viral infect     GENICULATE HERPES ZOSTER                                        
 985  05312     Viral infect     POSTHERPES TRIGEM NEURAL                                        
 986  05313     Viral infect     POSTHERPES POLYNEUROPATH                                        
 987  05314     Viral infect     HERPES ZOSTER MYELITIS (                                        
 988  05319     Viral infect     H ZOSTER NERV SYST NEC                                          
 989  05371     Viral infect     H ZOSTER OTITIS EXTERNA                                         
 990  05379     Viral infect     H ZOSTER COMPLICATED NEC                                        
 991  0538      Viral infect     H ZOSTER COMPLICATED NOS                                        
 992  0539      Viral infect     HERPES ZOSTER NOS                                               
 994  05410     Viral infect     GENITAL HERPES NOS                                              
 995  05411     Viral infect     HERPETIC VULVOVAGINITIS                                         
 996  05412     Viral infect     HERPETIC ULCER OF VULVA                                         

 
 Obs description

 983 Herpes zoster with unspecified nervous system complication                                                                                       
 984 Geniculate herpes zoster                                                                                                                         
 985 Postherpetic trigeminal neuralgia                                                                                                                
 986 Postherpetic polyneuropathy                                                                                                                      
 987 Herpes zoster myelitis                                                                                                                           
 988 Herpes zoster with other nervous system complications                                                                                            
 989 Otitis externa due to herpes zoster                                                                                                              
 990 Herpes zoster with other specified complications                                                                                                 
 991 Herpes zoster with unspecified complication                                                                                                      
 992 Herpes zoster without mention of complication                                                                                                    
 994 Genital herpes, unspecified                                                                                                                      
 995 Herpetic vulvovaginitis                                                                                                                          
 996 Herpetic ulceration of vulva                                                                                                                     

                                                                                                  Infection_
 Obs Infection    UABgroup                                Infection_Category                       Location

 983     Y        zoster                                  zoster                                            
 984     Y        zoster                                  zoster                                            
 985     Y        zoster                                  zoster                                            
 986     Y        zoster                                  zoster                                            
 987     Y        zoster                                  zoster                                            
 988     Y        zoster                                  zoster                                            
 989     Y        zoster                                  zoster                                            
 990     Y        zoster                                  zoster                                            
 991     Y        zoster                                  zoster                                            
 992     Y        zoster                                  zoster                                            
 994     Y                                                herpes                                            
 995     Y                                                herpes                                            
 996     Y                                                herpes                                            

     Infectious_                             bacterial_    other_types_
 Obs  Organism      OI    Viral    Fungal    infection     of_infection

 983                      viral                                        
 984                      viral                                        
 985                      viral                                        
 986                      viral                                        
 987                      viral                                        
 988                      viral                                        
 989                      viral                                        
 990                      viral                                        
 991                      viral                                        
 992                      viral                                        
 994                      viral                                        
 995                      viral                                        
 996                      viral                                        
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   7

     ICD_9_     CCS_CATEGORY_
 Obs CM_CODE     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION

 997  05413     Viral infect     HERPETIC INFECT OF PENIS                                        
 998  05419     Viral infect     GENITAL HERPES NEC                                              
 999  0542      Viral infect     HERPETIC GINGIVOSTOMAT                                          
1000  0546      Viral infect     HERPETIC WHITLOW                                                
1001  05473     Viral infect     H SIMPLEX OTITIS EXTERNA                                        
1002  05479     Viral infect     H SIMPLEX COMPLICAT NEC                                         
1003  0548      Viral infect     H SIMPLEX COMPLICAT NOS                                         
1004  0549      Viral infect     HERPES SIMPLEX NOS                                              
1514  05320     Eye infectn      HERPES ZOSTER OF EYELID                                         
1515  05321     Eye infectn      H ZOSTER KERATOCONJUNCT                                         
1516  05322     Eye infectn      H ZOSTER IRIDOCYCLITIS                                          
1517  05329     Eye infectn      HERPES ZOSTER OF EYE NEC                                        

 
 Obs description

 997 Herpetic infection of penis                                                                                                                      
 998 Other genital herpes                                                                                                                             
 999 Herpetic gingivostomatitis                                                                                                                       
1000 Herpetic whitlow                                                                                                                                 
1001 Herpes simplex otitis externa                                                                                                                    
1002 Herpes simplex with other specified complications                                                                                                
1003 Herpes simplex with unspecified complication                                                                                                     
1004 Herpes simplex without mention of complication                                                                                                   
1514 Herpes zoster dermatitis of eyelid                                                                                                               
1515 Herpes zoster keratoconjunctivitis                                                                                                               
1516 Herpes zoster iridocyclitis                                                                                                                      
1517 Herpes zoster with other ophthalmic complications                                                                                                

                                                                                                  Infection_
 Obs Infection    UABgroup                                Infection_Category                       Location

 997     Y                                                herpes                                            
 998     Y                                                herpes                                            
 999     Y                                                herpes                                            
1000     Y                                                herpes                                            
1001     Y                                                herpes                                            
1002     Y                                                herpes                                            
1003     Y                                                herpes                                            
1004     Y                                                herpes                                            
1514     Y        zoster                                  zoster                                            
1515     Y        zoster                                  zoster                                            
1516     Y        zoster                                  zoster                                            
1517     Y        zoster                                  zoster                                            

     Infectious_                             bacterial_    other_types_
 Obs  Organism      OI    Viral    Fungal    infection     of_infection

 997                      viral                                        
 998                      viral                                        
 999                      viral                                        
1000                      viral                                        
1001                      viral                                        
1002                      viral                                        
1003                      viral                                        
1004                      viral                                        
1514                      viral                                        
1515                      viral                                        
1516                      viral                                        
1517                      viral                                        
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 25 observations read from the data set WORK.ICD9_INFECTION.
      WHERE Infection_Category in ('herpes', 'zoster');
NOTE: The PROCEDURE PRINT printed pages 6-7.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
      

316        
317        proc print data=icd9_infection;
318        var ICD_9_CM_CODE CCS_CATEGORY_DESCRIPTION ICD_9_CM_CODE_DESCRIPTION
319        description Infection UABgroup Infection_Category Infection_Location Infectious_Organism OI Viral Fungal bacterial_infection
319      ! other_types_of_infection;
320        
321        where not missing(oi) and Infection^=" " and  Infection_Category not in ("zoster" "tuberculosis");
322        run;

NOTE: No observations were selected from data set WORK.ICD9_INFECTION.
NOTE: There were 0 observations read from the data set WORK.ICD9_INFECTION.
      WHERE (not MISSING(oi)) and (Infection not = ' ') and Infection_Category not in ('tuberculosis', 'zoster');
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

323        
324        
325        data icd9_inf;
326        length ICD_9_CM_CODE $18;
327        set icd9_infection;
328        keep
329        ICD_9_CM_CODE ICD_9_CM_CODE_DESCRIPTION Infection Infection_Category Infection_Location Infectious_Organism OI Viral Fungal
329      ! bacterial_infection other_types_of_infection;
330        where Infection^=" ";
331        run;
7                                                                   The SAS System                                      10:43 Monday, November 5, 2018


NOTE: There were 896 observations read from the data set WORK.ICD9_INFECTION.
      WHERE Infection not = ' ';
NOTE: The data set WORK.ICD9_INF has 896 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

332        
333        proc print data=icd9_infection (obs=10);run;

WARNING: Data too long for column "description"; truncated to 145 characters to fit.
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   8

                                                                                                                                     OPTIONAL_CCS_
     ICD_9_                     CCS_CATEGORY_                                                                         OPTIONAL_        CATEGORY_
 Obs CM_CODE    CCS_CATEGORY     DESCRIPTION     ICD_9_CM_CODE_DESCRIPTION                                           CCS_CATEGORY      DESCRIPTI

   1  1371                 1    Tuberculosis     LATE EFFECT CNS TB                                                                               
   2  1372                 1    Tuberculosis     LATE EFFECT GU TB                                                                                
   3  1373                 1    Tuberculosis     LATE EFF BONE & JOINT TB                                                                         
   4  1374                 1    Tuberculosis     LATE EFFECT TB NEC                                                                               
   5  V1201                1    Tuberculosis     HX TUBERCULOSIS (Begin 1                                                                         
   6  0203               122    Pneumonia        PRIMARY PNEUMONIC PLAGUE                                                                         
   7  0204               122    Pneumonia        SECONDARY PNEUMON PLAGUE                                                                         
   8  0205               122    Pneumonia        PNEUMONIC PLAGUE NOS                                                                             
   9  0212               122    Pneumonia        PULMONARY TULAREMIA                                                                              
  10  0221               122    Pneumonia        PULMONARY ANTHRAX                                                                                

 
 
 Obs description

   1 Late effects of central nervous system tuberculosis                                                                                              
   2 Late effects of genitourinary tuberculosis                                                                                                       
   3 Late effects of tuberculosis of bones and joints                                                                                                 
   4 Late effects of tuberculosis of other specified organs                                                                                           
   5 Personal history of tuberculosis                                                                                                                 
   6 Primary pneumonic plague                                                                                                                         
   7 Secondary pneumonic plague                                                                                                                       
   8 Pneumonic plague, unspecified                                                                                                                    
   9 Pulmonary tularemia                                                                                                                              
  10 Pulmonary anthrax                                                                                                                                

 
                                                                                                     Infection_  Infectious_
 Obs UABlist  Infection  UABgroup                              Infection_Category                     Location    Organism    OI  Viral  Fungal

   1                                                                                                                                           
   2                                                                                                                                           
   3                                                                                                                                           
   4                                                                                                                                           
   5                                                                                                                                           
   6              Y                                            plague                                                                          
   7              Y                                            plague                                                                          
   8              Y                                            plague                                                                          
   9    Y         Y      tularemia                             tularemia                                                                       
  10              Y                                            anthrax                                                                         

 
     bacterial_    other_types_
 Obs infection     of_infection    VAR19

   1                                                         
   2                                                         
   3                                                         
   4                                                         
   5                                                         
   6                                                         
   7                                                         
   8                                                         
   9                                                         
  10                                                         
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 10 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The PROCEDURE PRINT printed page 8.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

334        proc freq data=icd9_inf ; tables Infection_Category Infection;run;

                                                                  --- AS project ---                                10:43 Monday, November 5, 2018   9

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              GI abscess                                     8        1.07             8         1.07  
                              HSV                                            6        0.80            14         1.87  
                              Plague                                         1        0.13            15         2.00  
                              Q fever                                        1        0.13            16         2.14  
                              UTI                                            1        0.13            17         2.27  
                              abdominal abscess                             19        2.54            36         4.81  
                              actinomycosis                                  7        0.93            43         5.74  
                              anthrax                                        3        0.40            46         6.14  
                              bacteremia                                     3        0.40            49         6.54  
                              bacteremia septicemia                         20        2.67            69         9.21  
                              borrelia                                       5        0.67            74         9.88  
                              brain abscess                                  3        0.40            77        10.28  
                              brucella                                       6        0.80            83        11.08  
                              candidiasis                                    1        0.13            84        11.21  
                              cat-scratch                                    1        0.13            85        11.35  
                              cjd                                            2        0.27            87        11.62  
                              cowpox                                         1        0.13            88        11.75  
                              device associated infections                  11        1.47            99        13.22  
                              encephalitis                                  36        4.81           135        18.02  
                              endocarditis                                  12        1.60           147        19.63  
                              endophthalmitis                                5        0.67           152        20.29  
                              filarial or other parasitis                   66        8.81           218        29.11  
                              gastroenteritis                               70        9.35           288        38.45  
                              hepatitis                                      1        0.13           289        38.58  
                              herpes                                        11        1.47           300        40.05  
                              infectious conjunctivitis                      7        0.93           307        40.99  
                              leprosy                                        8        1.07           315        42.06  
                              leptospirosis                                  4        0.53           319        42.59  
                              leshmaniasis                                   6        0.80           325        43.39  
                              malaria                                       10        1.34           335        44.73  
                              measles                                        1        0.13           336        44.86  
                              meningitis                                    20        2.67           356        47.53  
                              myocarditis                                    5        0.67           361        48.20  
                              ocular infection                               3        0.40           364        48.60  
                              osteomyelitis                                 51        6.81           415        55.41  
                              pericarditis                                   2        0.27           417        55.67  
                              plague                                         6        0.80           423        56.48  
                              pneumonia                                     47        6.28           470        62.75  
                              pneumonitis                                    1        0.13           471        62.88  
                              prostate infections                            2        0.27           473        63.15  
                              pyelonephritis urine tract infection           9        1.20           482        64.35  
                              rickettsia                                    18        2.40           500        66.76  
                              septic arthritis                              27        3.60           527        70.36  
                              skin and soft tissue                           4        0.53           531        70.89  
                              skin and soft tissue infection                52        6.94           583        77.84  
                              syphilis and other venereal disease,          94       12.55           677        90.39  
                              trypanosomiasis                                5        0.67           682        91.05  
                              tularemia                                      6        0.80           688        91.86  
                              upper respiratory tract infection             45        6.01           733        97.86  
                              viral hepatitis                                1        0.13           734        98.00  
                              viremia                                        1        0.13           735        98.13  
                              zoster                                        14        1.87           749       100.00  

                                                               Frequency Missing = 147


                                                                                  Cumulative    Cumulative
                                            Infection    Frequency     Percent     Frequency      Percent
                                            --------------------------------------------------------------
                                            T                  28        3.13            28         3.13  
                                            Y                 868       96.88           896       100.00  
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 896 observations read from the data set WORK.ICD9_INF.
NOTE: The PROCEDURE FREQ printed page 9.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      

335        
336        
337        /*Infection_Category="tuberculosis";*/
338        
339        data outcome_infection_dx(drop=rc);
340            if _N_=1 then do;
341                declare hash HDX(dataset:"icd9_inf");
342                rc = HDX.definekey("ICD_9_CM_CODE");
343                rc = HDX.definedata(ALL:"YES");
344                rc=HDX.definedone();
345            end;
346        if 0 then set icd9_inf;
347        set &indxdat. ;
348        by database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE;
349        /*length outcome $20 outcome_date 4;*/
350        /*format outcome_date mmddyy10.;*/
351                rc =HDX.find(key:DX);
352                if rc=0 then output outcome_infection_dx;
353        where ENC_TYPE in ('IP' 'ER' 'AV' 'NH' 'HH' 'ED');
354        run;

NOTE: There were 896 observations read from the data set WORK.ICD9_INF.
NOTE: There were 2978141 observations read from the data set UCB64.TEMPINCDXALL.
      WHERE ENC_TYPE in ('AV', 'ED', 'ER', 'HH', 'IP', 'NH');
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: The data set WORK.OUTCOME_INFECTION_DX has 121384 observations and 36 variables.
NOTE: DATA statement used (Total process time):
      real time           1.71 seconds
      cpu time            2.88 seconds
      

355        proc sort data=outcome_infection_dx nodupkey; by database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE DX ENC_TYPE;run;

NOTE: There were 121384 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: 46307 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_INFECTION_DX has 75077 observations and 36 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.29 seconds
      cpu time            0.24 seconds
      

356        
357        proc freq data=outcome_infection_dx; tables Infection_Category Infection;run;
8                                                                   The SAS System                                      10:43 Monday, November 5, 2018


                                                                  --- AS project ---                                10:43 Monday, November 5, 2018  10

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              GI abscess                                  1530        2.14          1530         2.14  
                              HSV                                          102        0.14          1632         2.28  
                              UTI                                          688        0.96          2320         3.24  
                              abdominal abscess                            650        0.91          2970         4.15  
                              actinomycosis                                 35        0.05          3005         4.20  
                              bacteremia septicemia                       1565        2.19          4570         6.38  
                              borrelia                                     268        0.37          4838         6.76  
                              brain abscess                                 22        0.03          4860         6.79  
                              brucella                                       1        0.00          4861         6.79  
                              candidiasis                                    3        0.00          4864         6.79  
                              cat-scratch                                    6        0.01          4870         6.80  
                              cjd                                            1        0.00          4871         6.80  
                              device associated infections                 400        0.56          5271         7.36  
                              encephalitis                                  11        0.02          5282         7.38  
                              endocarditis                                  57        0.08          5339         7.46  
                              endophthalmitis                               37        0.05          5376         7.51  
                              filarial or other parasitis                   29        0.04          5405         7.55  
                              gastroenteritis                             2005        2.80          7410        10.35  
                              herpes                                       548        0.77          7958        11.12  
                              infectious conjunctivitis                     13        0.02          7971        11.13  
                              leprosy                                        1        0.00          7972        11.14  
                              leshmaniasis                                   3        0.00          7975        11.14  
                              malaria                                        2        0.00          7977        11.14  
                              meningitis                                    37        0.05          8014        11.19  
                              ocular infection                              24        0.03          8038        11.23  
                              osteomyelitis                                816        1.14          8854        12.37  
                              pneumonia                                   6523        9.11         15377        21.48  
                              pneumonitis                                    1        0.00         15378        21.48  
                              pyelonephritis urine tract infection       13106       18.31         28484        39.79  
                              rickettsia                                    20        0.03         28504        39.82  
                              septic arthritis                             312        0.44         28816        40.25  
                              skin and soft tissue                          12        0.02         28828        40.27  
                              skin and soft tissue infection             11653       16.28         40481        56.54  
                              syphilis and other venereal disease,         754        1.05         41235        57.60  
                              upper respiratory tract infection          28794       40.22         70029        97.82  
                              viremia                                       12        0.02         70041        97.83  
                              zoster                                      1550        2.17         71591       100.00  

                                                              Frequency Missing = 3486


                                                                                  Cumulative    Cumulative
                                            Infection    Frequency     Percent     Frequency      Percent
                                            --------------------------------------------------------------
                                            T                 200        0.27           200         0.27  
                                            Y               74877       99.73         75077       100.00  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: There were 75077 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: The PROCEDURE FREQ printed page 10.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.15 seconds
      cpu time            0.10 seconds
      

358        
359        data NDC_PYRAZINAMIDE;
360        set NDC.TB_ALL_2016;
361        /*NDC=code;*/
362        where gnn="PYRAZINAMIDE";
363        run;

NOTE: There were 32 observations read from the data set NDC.TB_ALL_2016.
      WHERE gnn='PYRAZINAMIDE';
NOTE: The data set WORK.NDC_PYRAZINAMIDE has 32 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.01 seconds
      

364        
365        data outcome_infection_rx(drop=rc:)  outcome_rx_TB(drop=rc:);
366            if _N_=1 then do;
367                declare hash HRX(dataset:"NDC.Antibiotics_parenteral_ndc");
368                rc = HRX.definekey("NDC");
369        /*        rc = HRX.definedata(ALL:"YES");*/
370                rc=HRX.definedone();
371        
372                declare hash HTB(dataset:"NDC_PYRAZINAMIDE");
373                rc = HTB.definekey("code");
374        /*        rc = HTB.definedata(all:"YES");*/
375                rc=HTB.definedone();
376        
377            end;
378        if 0 then set NDC.Antibiotics_parenteral_ndc(keep=NDC) NDC_PYRAZINAMIDE(keep=code);
379        set &inrxdat. ;
380        by database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE;
381        /*length outcome $20 outcome_date 4;*/
382        /*format outcome_date mmddyy10.;*/
383                rc1 =HRX.find(key:NDC);
384                rc2 =HTB.find(key:NDC);
385        
386                if rc1=0 then output outcome_infection_rx;
387                if rc2=0 then output outcome_rx_TB;
388        run;

NOTE: There were 3057 observations read from the data set NDC.ANTIBIOTICS_PARENTERAL_NDC.
NOTE: There were 32 observations read from the data set WORK.NDC_PYRAZINAMIDE.
NOTE: There were 2132051 observations read from the data set UCB64.TEMPINCRXALL.
NOTE: The data set WORK.OUTCOME_INFECTION_RX has 1367 observations and 18 variables.
NOTE: The data set WORK.OUTCOME_RX_TB has 25 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           1.46 seconds
      cpu time            1.37 seconds
      

389        
390        
391        data outcome_infection_px(drop=rc:);
392            if _N_=1 then do;
393                declare hash HPX(dataset:"NDC.Antibiotics_parenteral_hcpcs");
394                rc = HPX.definekey("HCPCS_CD");
395                rc = HPX.definedata(ALL:"YES");
396                rc=HPX.definedone();
397            end;
398        if 0 then set NDC.Antibiotics_parenteral_hcpcs;
399        set &inpxdat. ;
400        by database exposure patid exposureStart exposureEnd exposureID PX_DATE;
401        /*length outcome $20 outcome_date 4;*/
9                                                                   The SAS System                                      10:43 Monday, November 5, 2018

402        /*format outcome_date mmddyy10.;*/
403                rc1 =HPX.find(key:PX);
404        
405                if rc1=0 then output outcome_infection_Px;
406        run;

NOTE: There were 69 observations read from the data set NDC.ANTIBIOTICS_PARENTERAL_HCPCS.
NOTE: There were 994051 observations read from the data set WORK.TEMPINCPXALL.
NOTE: The data set WORK.OUTCOME_INFECTION_PX has 5591 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.70 seconds
      cpu time            0.67 seconds
      

407        
408        
409        data outcome_infection_trt(label="parenteral antibiotics(PX+RX) for Infection");
410        set outcome_infection_px outcome_infection_rx;
411        length trt_date 4;
412        format trt_date mmddyy10.;
413        trt_date=coalesce(PX_DATE , DISPENSE_DATE);
414        run;

NOTE: There were 5591 observations read from the data set WORK.OUTCOME_INFECTION_PX.
NOTE: There were 1367 observations read from the data set WORK.OUTCOME_INFECTION_RX.
NOTE: The data set WORK.OUTCOME_INFECTION_TRT has 6958 observations and 30 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

415        
416        
417        
418        data outcome_infection(keep=database exposure patid exposureStart exposureEnd exposureID outcome_date dx TRT_DATE BEGIN_DATE ADMIT_DATE
418      ! ENC_TYPE Infection_Category Infection outcome_start_date PDX) ;
419        if _N_=1 then do;
420                declare hash HTRT(dataset:"outcome_infection_trt");
421                rc = HTRT.definekey("database", "exposure", "PATID", "exposureStart", "exposureEnd", "exposureID", "TRT_DATE");
422        /*        rc = HTRT.definedata(ALL:"YES");*/
423                rc=HTRT.definedone();
424            end;
425        if 0 then set outcome_infection_trt(keep=database exposure patid exposureStart exposureEnd exposureID TRT_DATE);
426        set outcome_infection_dx;
427        length outcome_date outcome_start_date 4;
428        format outcome_date outcome_start_date mmddyy10.;
429                rc=HTRT.find(key:database, key:exposure, key:patid, key:exposureStart, key:exposureEnd, key:exposureID, key:BEGIN_DATE);
430                outcome_date=BEGIN_DATE;
431                outcome_start_date=outcome_date;
432                if rc=0  then do;
433                    output;
434                end; else do;
435                TRT_DATE=.;
436                if ENC_TYPE in ( 'IP') then output;
437                end;
438        run;

NOTE: There were 6958 observations read from the data set WORK.OUTCOME_INFECTION_TRT.
NOTE: There were 75077 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: The data set WORK.OUTCOME_INFECTION has 12926 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.20 seconds
      cpu time            0.17 seconds
      

439        
440        proc sort data=outcome_infection nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date dx pdx;run;

NOTE: There were 12926 observations read from the data set WORK.OUTCOME_INFECTION.
NOTE: 13 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_INFECTION has 12913 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
10                                                                  The SAS System                                      10:43 Monday, November 5, 2018

      real time           0.04 seconds
      cpu time            0.03 seconds
      

441        data outcome_infection ; set outcome_infection; by database exposure patid exposureStart exposureEnd exposureID outcome_date dx;  /* format
441      !  dx $Icd9fmt.; */  run;

NOTE: There were 12913 observations read from the data set WORK.OUTCOME_INFECTION.
NOTE: The data set WORK.OUTCOME_INFECTION has 12913 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

442        
443        proc sort data=outcome_infection nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date ;run;

NOTE: There were 12913 observations read from the data set WORK.OUTCOME_INFECTION.
NOTE: 4964 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_INFECTION has 7949 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

444        
445        proc datasets nolist; delete
446        /* icd9_infection */
447        icd9_inf
448        /* outcome_infection_dx */
449        outcome_rx_TB
450        NDC_PYRAZINAMIDE
451        outcome_infection_px
452        outcome_infection_rx
453        outcome_infection_trt
454        ;
455        quit;

NOTE: Deleting WORK.ICD9_INF (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_RX_TB (memtype=DATA).
NOTE: Deleting WORK.NDC_PYRAZINAMIDE (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_INFECTION_PX (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_INFECTION_RX (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_INFECTION_TRT (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
      

456        
457        
458        /*
459        Write to permanent SAS library
460         */
461        proc sql;
462          create table DT.hospitalizedInfectionEpisodesInc as
463            select * from Work.outcome_infection;
NOTE: Table DT.HOSPITALIZEDINFECTIONEPISODESINC created, with 7949 rows and 16 columns.

464        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

465        
466        
467        /*
468        Data checks
469         */
470        proc contents data = DT.hospitalizedInfectionEpisodesInc order = varnum;
471        run;
11                                                                  The SAS System                                      10:43 Monday, November 5, 2018


                                                                  --- AS project ---                                10:43 Monday, November 5, 2018  11

                                                                The CONTENTS Procedure

                                Data Set Name        DT.HOSPITALIZEDINFECTIONEPISODESINC    Observations          7949
                                Member Type          DATA                                   Variables             16  
                                Engine               V9                                     Indexes               0   
                                Created              11/05/2018 10:44:09                    Observation Length    152 
                                Last Modified        11/05/2018 10:44:09                    Deleted Observations  0   
                                Protection                                                  Compressed            NO  
                                Data Set Type                                               Sorted                YES 
                                Label                                                                                 
                                Data Representation  WINDOWS_64                                                       
                                Encoding             wlatin1  Western (Windows)                                       


                                                          Engine/Host Dependent Information

                               Data Set Page Size          65536                                                       
                               Number of Data Set Pages    19                                                          
                               First Data Page             1                                                           
                               Max Obs per Page            430                                                         
                               Obs in First Data Page      412                                                         
                               Number of Data Set Repairs  0                                                           
                               ExtendObsCounter            YES                                                         
                               Filename                    V:\studies\AS\data\hospitalizedinfectionepisodesinc.sas7bdat
                               Release Created             9.0401M5                                                    
                               Host Created                X64_DS08R2                                                  
                               Owner Name                  AD\benjaminchan                                             
                               File Size                   1MB                                                         
                               File Size (bytes)           1310720                                                     


                                                             Variables in Creation Order
 
                             #    Variable              Type    Len    Format       Informat    Label

                             1    database              Char     10                                                      
                             2    PATID                 Char     20                                                      
                             3    exposure              Char     11                                                      
                             4    exposureStart         Num       8    MMDDYY10.                exposureStart            
                             5    exposureEnd           Num       8    MMDDYY10.                exposureEnd              
                             6    exposureID            Num       8                                                      
                             7    trt_date              Num       4    MMDDYY10.                                         
                             8    Infection             Char      1    $1.          $1.                                  
                             9    Infection_Category    Char     36    $36.         $36.                                 
                            10    ENC_TYPE              Char      2                             Encounter Type           
                            11    ADMIT_DATE            Num       8    MMDDYY10.                Admission Date           
                            12    BEGIN_DATE            Num       8    MMDDYY10.                Beginning Date of Service
                            13    DX                    Char     18                             Diagnosis Code           
                            14    PDX                   Char      2                             Primary Diagnosis        
                            15    outcome_date          Num       4    MMDDYY10.                                         
                            16    outcome_start_date    Num       4    MMDDYY10.                                         


                                                                   Sort Information

                               Sortedby       database exposure PATID exposureStart exposureEnd exposureID outcome_date
                               Validated      YES                                                                      
                               Character Set  ANSI                                                                     
                               Sort Option    NODUPKEY                                                                 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 11.

472        proc sql;
473          select "Summary of DT.hospitalizedInfectionEpisodesInc" as table,
474                 database,
475                 count(*) as denom
476            from DT.hospitalizedInfectionEpisodesInc
477            group by database;
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018  12

                                         table                                           database       denom
                                         --------------------------------------------------------------------
                                         Summary of DT.hospitalizedInfectionEpisodesInc  MPCD             138
                                         Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan       882
                                         Summary of DT.hospitalizedInfectionEpisodesInc  Medicare        6929
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
478          select "Summary of DT.hospitalizedInfectionEpisodesInc" as table,
479                 A.database,
480                 A.infection_category,
481                 count(distinct A.patid) as countDistinctPatid,
482                 count(*) as countRows,
483                 count(*) / denom format = percent8.1 as pctWithinDatabase
484            from DT.hospitalizedInfectionEpisodesInc A inner join
485                 (select database, count(*) as denom from Work.outcome_infection group by database) B  on (A.database = B.database)
486            group by A.database, A.infection_category;
                                                                  --- AS project ---                                10:43 Monday, November 5, 2018  13

                                                                                                                count
                                                                                                             Distinct                pctWithin
       table                                           database    Infection_Category                           Patid  countRows      Database
       ---------------------------------------------------------------------------------------------------------------------------------------
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD                                                        10         10         7.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        GI abscess                                       3          4         2.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        abdominal abscess                                1          1         0.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        bacteremia septicemia                            7          8         5.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        brain abscess                                    1          1         0.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        gastroenteritis                                  8         11         8.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        meningitis                                       2          2         1.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        pneumonia                                       15         21        15.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        pyelonephritis urine tract infection            17         20        14.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        skin and soft tissue infection                  13         15        10.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        syphilis and other venereal disease,             2          3         2.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        upper respiratory tract infection               29         40        29.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  MPCD        zoster                                           2          2         1.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan                                                  30         35         4.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  GI abscess                                      29         34         3.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  UTI                                              2          2         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  abdominal abscess                               12         17         1.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  bacteremia septicemia                           47         67         7.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  borrelia                                         6         17         1.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  device associated infections                     5          6         0.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  endocarditis                                     1          1         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  gastroenteritis                                 46         60         6.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  herpes                                           2          3         0.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  meningitis                                       4          7         0.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  osteomyelitis                                    4          5         0.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  pneumonia                                       76        106        12.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  pyelonephritis urine tract infection            66         93        10.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  rickettsia                                       1          1         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  septic arthritis                                 2          2         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  skin and soft tissue infection                  69        119        13.5% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  syphilis and other venereal disease,             5          5         0.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  upper respiratory tract infection              189        299        33.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Marketscan  zoster                                           3          3         0.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare                                                   527        744        10.7% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    GI abscess                                     164        216         3.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    HSV                                              1          3         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    UTI                                             16         18         0.3% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    abdominal abscess                               56         63         0.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    actinomycosis                                    2          5         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    bacteremia septicemia                          619        823        11.9% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    borrelia                                         2          8         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    brain abscess                                    3          3         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    cjd                                              1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    device associated infections                    25         27         0.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    endocarditis                                     6          8         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    endophthalmitis                                  4          4         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    gastroenteritis                                452        580         8.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    herpes                                          26         27         0.4% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    malaria                                          1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    meningitis                                       8          8         0.1% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    osteomyelitis                                   31         67         1.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    pneumonia                                      880       1244        18.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    pneumonitis                                      1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    pyelonephritis urine tract infection           775       1096        15.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    septic arthritis                                16         16         0.2% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    skin and soft tissue                             1          1         0.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    skin and soft tissue infection                 490        737        10.6% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    syphilis and other venereal disease,            29         52         0.8% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    upper respiratory tract infection              686       1107        16.0% 
       Summary of DT.hospitalizedInfectionEpisodesInc  Medicare    zoster                                          57         69         1.0% 
 
 
 
 
 
 
 
                                                        queryOutcomeHospitalizedInfection.sas
487        quit;
NOTE: The PROCEDURE SQL printed pages 12-13.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.17 seconds
      cpu time            0.10 seconds
      

488        
489        
490        /*
491        Copy data sets to permanent library for use later
492         */
493        proc copy out = DT in = Work;
494          select icd9_infection outcome_infection_dx;
495        run;

NOTE: Copying WORK.ICD9_INFECTION to DT.ICD9_INFECTION (memtype=DATA).
NOTE: There were 1725 observations read from the data set WORK.ICD9_INFECTION.
NOTE: The data set DT.ICD9_INFECTION has 1725 observations and 19 variables.
NOTE: Copying WORK.OUTCOME_INFECTION_DX to DT.OUTCOME_INFECTION_DX (memtype=DATA).
NOTE: There were 75077 observations read from the data set WORK.OUTCOME_INFECTION_DX.
NOTE: The data set DT.OUTCOME_INFECTION_DX has 75077 observations and 36 variables.
NOTE: PROCEDURE COPY used (Total process time):
      real time           0.18 seconds
      cpu time            0.12 seconds
      

496        
497        
498        
499        
500        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           39.63 seconds
      cpu time            37.36 seconds
      
