1                                                          The SAS System                               10:29 Friday, April 27, 2018

NOTE: Unable to open SASUSER.REGSTRY. WORK.REGSTRY will be opened instead.
NOTE: All registry changes will be lost at the end of the session.

WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this 
         session.
NOTE: Unable to open SASUSER.PROFILE. WORK.PROFILE will be opened instead.
NOTE: All profile changes will be lost at the end of the session.
NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           4.43 seconds
      cpu time            0.34 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          
4          Programmer Lang Chen @UAB
5          created: 8/24/2016
6          modiflied :
7          Project:
8          Task: define outcome for Pfizer Tofacitinib 2016 with PECORI common data model data
9          Output: Dataset outcome
10         
11         NOTE RUN queryOutcomeHospitalizedInfection.sas FIRST
12         
13         TODO:
14         **********************************************************************;
15         options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
16         * Programmer    : Benjamin Chan <chanb@ohsu.edu>
17         * Creation date :
18         * Modify date   :
19         ;
20         %let cmt=queryOutcomeOpportunisticInfection; * type the name of your program here (without the filename extension);
21         %let pgm=&cmt..sas;
22         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
2                                                                   The SAS System                                        10:29 Friday, April 27, 2018

NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: W:\onenote\references\drug ndcs\sas data
139        footnote "&pgm.";
140        * footnote2 "%sysfunc(datetime(),datetime14.)";
141        title1 '--- AS project ---';
142        **********************************************************************;
143        options macrogen mlogic mprint symbolgen;
144        options nomacrogen nomlogic nomprint nosymbolgen;
145        
146        
147        ods html
148          body = "output\&cmt..html"
149          style = Statistical;
NOTE: Writing HTML Body file: output\queryOutcomeOpportunisticInfection.html
150        
151        
152        *To edit the following two lines only;
153        
154        %let indxdat = UCB.tempIncDxAll;
155        %let inpxdat = UCB.tempIncPxAll;
156        %let inrxdat = UCB.tempIncRxAll;
157        proc sort data = &indxdat; by database exposure patid exposureStart exposureEnd exposureID begin_date;
NOTE: Data set UCB.TEMPINCDXALL is in a format that is native to another host. Cross Environment Data Access will be used. This will require 
      additional CPU resources and may reduce performance.
158        run;

NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

159        proc sort data = &inpxdat; by database exposure patid exposureStart exposureEnd exposureID px_date;
NOTE: Data set UCB.TEMPINCPXALL is in a format that is native to another host. Cross Environment Data Access will be used. This will require 
      additional CPU resources and may reduce performance.
160        run;

NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

161        proc sort data = &inrxdat; by database exposure patid exposureStart exposureEnd exposureID dispense_date;
NOTE: Data set UCB.TEMPINCRXALL is in a format that is native to another host. Cross Environment Data Access will be used. This will require 
      additional CPU resources and may reduce performance.
162        run;

NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

163        
164        /*
165        proc datasets nolist; delete
166        outcome_OI_dx
167        outcome_OI_dx_mycobacteria
168        outcome_OI_dx_only
169        outcome_OI_dx1
170        outcome_OI_mycobacteria
171        outcome_OI_rx
172        Outcome_oi_dx_rx_1
173        Outcome_oi_dx_rx_2
3                                                                   The SAS System                                        10:29 Friday, April 27, 2018

174        outcome_OI_dx_rx
175        outcome_OI
176        ;
177        quit;
178         */
179        
180        /*
181        Copy data sets from permanent library
182         */
183        proc copy out = Work in = DT;
184          select icd9_infection outcome_infection_dx;
185        run;

NOTE: Copying DT.ICD9_INFECTION to WORK.ICD9_INFECTION (memtype=DATA).
NOTE: There were 1725 observations read from the data set DT.ICD9_INFECTION.
NOTE: The data set WORK.ICD9_INFECTION has 1725 observations and 19 variables.
NOTE: Copying DT.OUTCOME_INFECTION_DX to WORK.OUTCOME_INFECTION_DX (memtype=DATA).
NOTE: There were 165231 observations read from the data set DT.OUTCOME_INFECTION_DX.
NOTE: The data set WORK.OUTCOME_INFECTION_DX has 165231 observations and 34 variables.
NOTE: PROCEDURE COPY used (Total process time):
      real time           0.32 seconds
      cpu time            0.20 seconds
      

186        
187        
188        /*
189        Override OI designation of some of the infection categories
190        Source lookup table is "W:\Users\lchen\lookupdata\AHRQ_CCS.xlsx",
191        which was converted to CSV as "U:\studies\AS\pgms\bchan\data\raw\AHRQ_CCS.csv"
192        See commit ceaac8
193         */
194        proc sql;
195          select "Work.icd9_infection" as table, "BEFORE" as when, upcase(oi) as oi, upcase(infection_category) as infection_category, count(*) as
195      ! records
196            from Work.icd9_infection
197            where upcase(infection_category) = "TUBERCULOSIS" |
198                  upcase(infection_category) = "ACTINOMYCOSIS" |
199                  upcase(infection_category) = "ZOSTER" |
200                  icd_9_cm_code = "48284" |
201                  prxmatch("/^003((1)|(2[1234]))/", icd_9_cm_code)
202            group by calculated oi, calculated infection_category;
                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   1

                                   table                when    oi  infection_category                     records
                                   -------------------------------------------------------------------------------
                                   Work.icd9_infection  BEFORE      ACTINOMYCOSIS                                7
                                   Work.icd9_infection  BEFORE      PNEUMONIA                                    1
                                   Work.icd9_infection  BEFORE      ZOSTER                                      14
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
203          update Work.icd9_infection
204            set oi = case
205                       when upcase(infection_category) = "TUBERCULOSIS" then "OI"
206                       when upcase(infection_category) = "ACTINOMYCOSIS" then "OI"
207                       when upcase(infection_category) = "ZOSTER" then "OI"
208                       when icd_9_cm_code = "48284" then "OI"
209                       when prxmatch("/^003((1)|(2[1234]))/", icd_9_cm_code) then "OI"
210                       else oi
211                       end;
NOTE: 1725 rows were updated in WORK.ICD9_INFECTION.

212          select "Work.icd9_infection" as table, "AFTER" as when, upcase(oi) as oi, upcase(infection_category) as infection_category, count(*) as
212      ! records
213            from Work.icd9_infection
214            where upcase(infection_category) = "TUBERCULOSIS" |
215                  upcase(infection_category) = "ACTINOMYCOSIS" |
216                  upcase(infection_category) = "ZOSTER" |
217                  icd_9_cm_code = "48284" |
218                  prxmatch("/^003((1)|(2[1234]))/", icd_9_cm_code)
219            group by calculated oi, calculated infection_category;
                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   2

                                    table                when   oi  infection_category                     records
                                    ------------------------------------------------------------------------------
                                    Work.icd9_infection  AFTER  OI  ACTINOMYCOSIS                                7
                                    Work.icd9_infection  AFTER  OI  PNEUMONIA                                    1
                                    Work.icd9_infection  AFTER  OI  ZOSTER                                      14
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
220          select "Work.outcome_infection_dx" as table, "BEFORE" as when, upcase(oi) as oi, upcase(infection_category) as infection_category,
220      ! count(*) as records
221            from Work.outcome_infection_dx
222            where upcase(infection_category) = "TUBERCULOSIS" |
223                  upcase(infection_category) = "ACTINOMYCOSIS" |
224                  upcase(infection_category) = "ZOSTER" |
225                  icd_9_cm_code = "48284" |
226                  prxmatch("/^003((1)|(2[1234]))/", icd_9_cm_code)
227            group by calculated oi, calculated infection_category;
                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   3

                                table                      when    oi  infection_category                     records
                                -------------------------------------------------------------------------------------
                                Work.outcome_infection_dx  BEFORE      ACTINOMYCOSIS                               68
                                Work.outcome_infection_dx  BEFORE      PNEUMONIA                                   15
                                Work.outcome_infection_dx  BEFORE      ZOSTER                                    2938
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
228          update Work.outcome_infection_dx
4                                                                   The SAS System                                        10:29 Friday, April 27, 2018

229            set oi = case
230                       when upcase(infection_category) = "TUBERCULOSIS" then "OI"
231                       when upcase(infection_category) = "ACTINOMYCOSIS" then "OI"
232                       when upcase(infection_category) = "ZOSTER" then "OI"
233                       when icd_9_cm_code = "48284" then "OI"
234                       when prxmatch("/^003((1)|(2[1234]))/", icd_9_cm_code) then "OI"
235                       else oi
236                       end;
NOTE: 165231 rows were updated in WORK.OUTCOME_INFECTION_DX.

237          select "Work.outcome_infection_dx" as table, "AFTER" as when, upcase(oi) as oi, upcase(infection_category) as infection_category,
237      ! count(*) as records
238            from Work.outcome_infection_dx
239            where upcase(infection_category) = "TUBERCULOSIS" |
240                  upcase(infection_category) = "ACTINOMYCOSIS" |
241                  upcase(infection_category) = "ZOSTER" |
242                  icd_9_cm_code = "48284" |
243                  prxmatch("/^003((1)|(2[1234]))/", icd_9_cm_code)
244            group by calculated oi, calculated infection_category;
                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   4

                                 table                      when   oi  infection_category                     records
                                 ------------------------------------------------------------------------------------
                                 Work.outcome_infection_dx  AFTER  OI  ACTINOMYCOSIS                               68
                                 Work.outcome_infection_dx  AFTER  OI  PNEUMONIA                                   15
                                 Work.outcome_infection_dx  AFTER  OI  ZOSTER                                    2938
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
245        quit;
NOTE: The PROCEDURE SQL printed pages 1-4.
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.21 seconds
      cpu time            1.07 seconds
      

246        
247        
248        proc freq data=icd9_infection; tables Infection_Category Infection_Location OI ;
249        tables Infection_Category*description/missing list;
250        where OI^=" " and OI^="N" and OI^="NO";
251        run;

                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   5

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              actinomycosis                                  7       31.82             7        31.82  
                              pneumonia                                      1        4.55             8        36.36  
                              zoster                                        14       63.64            22       100.00  


                                           Infection_                             Cumulative    Cumulative
                                           Location      Frequency     Percent     Frequency      Percent
                                           ---------------------------------------------------------------
                                                                                                          

                                                               Frequency Missing = 22


                                                                              Cumulative    Cumulative
                                               OI    Frequency     Percent     Frequency      Percent
                                               -------------------------------------------------------
                                               OI          22      100.00            22       100.00  


 
                                                         Infection_Category
                                                         ------------------------------------
                                                         actinomycosis                       
                                                         actinomycosis                       
                                                         actinomycosis                       
                                                         actinomycosis                       
                                                         actinomycosis                       
                                                         actinomycosis                       
                                                         actinomycosis                       
                                                         pneumonia                           
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              

 
  description
  --------------------------------------------------------------------------------------------------------------------------------------------------
  Abdominal actinomycotic infection                                                                                                                 
  Actinomycotic infection of other specified sites                                                                                                  
  Actinomycotic infection of unspecified site                                                                                                       
  Cervicofacial actinomycotic infection                                                                                                             
  Cutaneous actinomycotic infection                                                                                                                 
  Madura foot                                                                                                                                       
  Pulmonary actinomycotic infection                                                                                                                 
  Pneumonia due to Legionnaires' disease                                                                                                            
  Geniculate herpes zoster                                                                                                                          
  Herpes zoster dermatitis of eyelid                                                                                                                
  Herpes zoster iridocyclitis                                                                                                                       

                                                                           Cumulative    Cumulative
                                                  Frequency     Percent     Frequency      Percent
                                                  -------------------------------------------------
                                                         1        4.55             1         4.55  
                                                         1        4.55             2         9.09  
                                                         1        4.55             3        13.64  
                                                         1        4.55             4        18.18  
                                                         1        4.55             5        22.73  
                                                         1        4.55             6        27.27  
                                                         1        4.55             7        31.82  
                                                         1        4.55             8        36.36  
                                                         1        4.55             9        40.91  
                                                         1        4.55            10        45.45  
                                                         1        4.55            11        50.00  
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   6

                                                                  The FREQ Procedure

 
                                                         Infection_Category
                                                         ------------------------------------
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              
                                                         zoster                              

 
  description
  --------------------------------------------------------------------------------------------------------------------------------------------------
  Herpes zoster keratoconjunctivitis                                                                                                                
  Herpes zoster myelitis                                                                                                                            
  Herpes zoster with other nervous system complications                                                                                             
  Herpes zoster with other ophthalmic complications                                                                                                 
  Herpes zoster with other specified complications                                                                                                  
  Herpes zoster with unspecified complication                                                                                                       
  Herpes zoster with unspecified nervous system complication                                                                                        
  Herpes zoster without mention of complication                                                                                                     
  Otitis externa due to herpes zoster                                                                                                               
  Postherpetic polyneuropathy                                                                                                                       
  Postherpetic trigeminal neuralgia                                                                                                                 

                                                                           Cumulative    Cumulative
                                                  Frequency     Percent     Frequency      Percent
                                                  -------------------------------------------------
                                                         1        4.55            12        54.55  
                                                         1        4.55            13        59.09  
                                                         1        4.55            14        63.64  
                                                         1        4.55            15        68.18  
                                                         1        4.55            16        72.73  
                                                         1        4.55            17        77.27  
                                                         1        4.55            18        81.82  
                                                         1        4.55            19        86.36  
                                                         1        4.55            20        90.91  
                                                         1        4.55            21        95.45  
                                                         1        4.55            22       100.00  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
NOTE: There were 22 observations read from the data set WORK.ICD9_INFECTION.
      WHERE OI not in (' ', 'N', 'NO');
NOTE: The PROCEDURE FREQ printed pages 5-6.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.27 seconds
      cpu time            0.03 seconds
      

252        data outcome_OI_dx(label="DX of Opportunistic infections");
253        set outcome_infection_dx;
254        where OI^=" " and OI^="N" and OI^="NO" and lowcase(Infection_Category) not in ("tuberculosis" "zoster");  /* Deal with TB and zoster in
254      ! subsequent step */
255        run;

NOTE: There were 83 observations read from the data set WORK.OUTCOME_INFECTION_DX.
      WHERE OI not in (' ', 'N', 'NO') and LOWCASE(Infection_Category) not in ('tuberculosis', 'zoster');
NOTE: The data set WORK.OUTCOME_OI_DX has 83 observations and 34 variables.
NOTE: DATA statement used (Total process time):
      real time           0.17 seconds
      cpu time            0.14 seconds
      

256        proc freq data=outcome_OI_dx; tables Infection_Category ENC_TYPE;
257        run;

                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   7

                                                                  The FREQ Procedure

                                                                                               Cumulative    Cumulative
                              Infection_Category                      Frequency     Percent     Frequency      Percent
                              -----------------------------------------------------------------------------------------
                              actinomycosis                                 68       81.93            68        81.93  
                              pneumonia                                     15       18.07            83       100.00  


                                                                   Encounter Type
 
                                                                                 Cumulative    Cumulative
                                            ENC_TYPE    Frequency     Percent     Frequency      Percent
                                            -------------------------------------------------------------
                                            AV                67       80.72            67        80.72  
                                            ED                 1        1.20            68        81.93  
                                            HH                 2        2.41            70        84.34  
                                            IP                13       15.66            83       100.00  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
NOTE: There were 83 observations read from the data set WORK.OUTCOME_OI_DX.
NOTE: The PROCEDURE FREQ printed page 7.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.10 seconds
      cpu time            0.03 seconds
      

258        
259        proc print data=outcome_OI_dx(obs=10);;
260        where  Infection_Category=" ";
261        run;

NOTE: No observations were selected from data set WORK.OUTCOME_OI_DX.
NOTE: There were 0 observations read from the data set WORK.OUTCOME_OI_DX.
5                                                                   The SAS System                                        10:29 Friday, April 27, 2018

      WHERE Infection_Category=' ';
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

262        
263        proc freq data=NDC.Anti_fungal_all_2016; table gnn;run;

                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   8

                                                                  The FREQ Procedure

                                                                                   Cumulative    Cumulative
                                          GNN             Frequency     Percent     Frequency      Percent
                                          -----------------------------------------------------------------
                                          FLUCONAZOLE          360       87.17           360        87.17  
                                          ITRACONAZOLE          18        4.36           378        91.53  
                                          VORICONAZOLE          35        8.47           413       100.00  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
NOTE: There were 413 observations read from the data set NDC.ANTI_FUNGAL_ALL_2016.
NOTE: The PROCEDURE FREQ printed page 8.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
      

264        
265        
266        data outcome_OI_rx(drop=rc:);
267            if _N_=1 then do;
268                declare hash HRX(dataset:"NDC.Anti_fungal_all_2016");
269                rc = HRX.definekey("Code");
270        /*        rc = HRX.definedata(ALL:"YES");*/
271                rc=HRX.definedone();
272            end;
273        if 0 then set NDC.Anti_fungal_all_2016(keep=Code);
274        set &inrxdat. ;
NOTE: Data set UCB.TEMPINCRXALL is in a format that is native to another host. Cross Environment Data Access will be used. This will require 
      additional CPU resources and may reduce performance.
275        by database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE;
276        /*length outcome $20 outcome_date 4;*/
277        /*format outcome_date mmddyy10.;*/
278                rc1 =HRX.find(key:NDC);
279        
280                if rc1=0 then output outcome_OI_rx;
281        run;

NOTE: There were 413 observations read from the data set NDC.ANTI_FUNGAL_ALL_2016.
NOTE: There were 4273219 observations read from the data set UCB.TEMPINCRXALL.
NOTE: The data set WORK.OUTCOME_OI_RX has 11848 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           2.38 seconds
      cpu time            2.37 seconds
      

282        
283        
284        data outcome_OI_dx_mycobacteria outcome_OI_dx_only outcome_OI_dx1;
285        set outcome_OI_dx;
286        if lowcase(Infection_Category) in ("nontuberculosis mycobacteria") then output outcome_OI_dx_mycobacteria;
287            else if lowcase(Infection_Category) in ("aspergillosis"
288        "blastomycosis" "coccidioidomycosis" "cryptococcosis" "endemic mycosis" "histoplasmosis") then output outcome_OI_dx1;
289            else output outcome_OI_dx_only;
290        run;

NOTE: There were 83 observations read from the data set WORK.OUTCOME_OI_DX.
NOTE: The data set WORK.OUTCOME_OI_DX_MYCOBACTERIA has 0 observations and 34 variables.
NOTE: The data set WORK.OUTCOME_OI_DX_ONLY has 83 observations and 34 variables.
NOTE: The data set WORK.OUTCOME_OI_DX1 has 0 observations and 34 variables.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.03 seconds
      

291        /*proc freq data=outcome_OI_dx1; tables Infection_Category;run;*/
292        
293        proc sql;
294        create table outcome_OI_mycobacteria as
295        select a.*,
296            a.begin_date as outcome_start_date length=4 format=mmddyy10.,
297            b.begin_date as outcome_date length=4 format=mmddyy10.
298        from outcome_OI_dx_mycobacteria a
6                                                                   The SAS System                                        10:29 Friday, April 27, 2018

299        join outcome_OI_dx_mycobacteria b
300        on a.exposureID=b.exposureID and 180>=b.begin_date-a.begin_date>=7
301        order by database, exposure, patid, exposureStart, exposureEnd, exposureID, outcome_date ;
NOTE: Table WORK.OUTCOME_OI_MYCOBACTERIA created, with 0 rows and 36 columns.

302        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
      

303        
304        proc sort data=outcome_OI_dx1 nodupkey ;by database exposure patid exposureStart exposureEnd exposureID begin_date;run;

NOTE: Input data set is empty.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_OI_DX1 has 0 observations and 34 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

305        
306        proc sql;
307        create table outcome_OI_dx_rx_1 as
308        select *
309        from outcome_OI_dx1 a
310        join outcome_OI_rx b
311        on a.exposureID=b.exposureID and abs(a.begin_date-b.DISPENSE_DATE)<=30
312        order by database, exposure, patid, exposureStart, exposureEnd, exposureID, begin_date, DISPENSE_DATE ;
WARNING: Column named database is duplicated in a select expression (or a view). Explicit references to it will be to the first one.
WARNING: Column named exposure is duplicated in a select expression (or a view). Explicit references to it will be to the first one.
WARNING: Column named patid is duplicated in a select expression (or a view). Explicit references to it will be to the first one.
WARNING: Column named exposureStart is duplicated in a select expression (or a view). Explicit references to it will be to the first one.
WARNING: Column named exposureEnd is duplicated in a select expression (or a view). Explicit references to it will be to the first one.
WARNING: Column named exposureID is duplicated in a select expression (or a view). Explicit references to it will be to the first one.
WARNING: Variable Code already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable database already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable PATID already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable ENR_END_DATE already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable DEATH_DATE already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable exposureClass already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable exposure already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable exposureDrug already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable exposureStart already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable exposureEnd already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable daysExposed already exists on file WORK.OUTCOME_OI_DX_RX_1.
WARNING: Variable exposureID already exists on file WORK.OUTCOME_OI_DX_RX_1.
NOTE: Table WORK.OUTCOME_OI_DX_RX_1 created, with 0 rows and 38 columns.

313        
314        create table outcome_OI_dx_rx_2(keep=database exposure patid exposureStart exposureEnd exposureID begin_date DISPENSE_DATE outcome:
314      ! total_sup DISPENSE_SUP NDC Infection_Category dx dx_type date1 date2 ) as
315        select *, sum(DISPENSE_SUP) as total_sup,
316            min(begin_date,DISPENSE_DATE) as date1 format=mmddyy10., max(begin_date,DISPENSE_DATE) as date2 format=mmddyy10.,
317            min(calculated date1) as outcome_start_date length=4 format=mmddyy10.,
318            max(calculated date2) as outcome_date length=4 format=mmddyy10.
319        from outcome_OI_dx_rx_1
320        group by database, exposure, patid, exposureStart, exposureEnd, exposureID, begin_date
321        order by database, exposure, patid, exposureStart, exposureEnd, exposureID, begin_date, DISPENSE_DATE;
NOTE: The query requires remerging summary statistics back with the original data.
NOTE: Table WORK.OUTCOME_OI_DX_RX_2 created, with 0 rows and 18 columns.

322        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.20 seconds
      cpu time            0.07 seconds
      

323        
324        proc sort data=outcome_OI_dx_rx_2
325            out=outcome_OI_dx_rx(keep=database exposure patid exposureStart exposureEnd exposureID outcome_date begin_date outcome_start_date
7                                                                   The SAS System                                        10:29 Friday, April 27, 2018

325      ! total_sup Infection_Category dx dx_type)
326            nodupkey;
327        by database exposure patid exposureStart exposureEnd exposureID outcome_date descending outcome_start_date;
328        where total_sup>=30;
329        run;

NOTE: Input data set is empty.
NOTE: 0 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_OI_DX_RX has 0 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

330        
331        data outcome_OI_dx_only(keep=database exposure patid exposureStart exposureEnd exposureID outcome_date begin_date outcome_start_date
331      ! Infection_Category dx dx_type);
332        set outcome_OI_dx_only;
333        length outcome_start_date outcome_date 4;
334        format outcome_start_date outcome_date mmddyy10.;
335        outcome_date=begin_date;
336        outcome_start_date=begin_date;
337        run;

NOTE: There were 83 observations read from the data set WORK.OUTCOME_OI_DX_ONLY.
NOTE: The data set WORK.OUTCOME_OI_DX_ONLY has 83 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

338        
339        data outcome_OI(keep=database exposure patid exposureStart exposureEnd exposureID outcome_date begin_date outcome_start_date
339      ! Infection_Category outcome dx dx_type);
340        set outcome_OI_dx_only
341        outcome_OI_dx_rx
342        outcome_OI_dx_mycobacteria;
343        length outcome $20;
344        outcome="OI";
345        run;

NOTE: There were 83 observations read from the data set WORK.OUTCOME_OI_DX_ONLY.
NOTE: There were 0 observations read from the data set WORK.OUTCOME_OI_DX_RX.
NOTE: There were 0 observations read from the data set WORK.OUTCOME_OI_DX_MYCOBACTERIA.
NOTE: The data set WORK.OUTCOME_OI has 83 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

346        
347        
348        /*
349        Check
350         */
351        proc sql;
352          select "Summary of Work.outcome_oi" as table,
353                 A.database,
354                 A.infection_category,
355                 count(distinct A.patid) as countDistinctPatid,
356                 count(*) as countRows,
357                 count(*) / denom format = percent8.1 as pctWithinDatabase
358            from Work.outcome_oi A inner join
359                 (select database, count(*) as denom from Work.outcome_oi group by database) B  on (A.database = B.database)
360            group by A.database, A.infection_category;
                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018   9

                                                                                                      count
                                                                                                   Distinct                pctWithin
                 table                       database    Infection_Category                           Patid  countRows      Database
                 -------------------------------------------------------------------------------------------------------------------
                 Summary of Work.outcome_oi  Marketscan  actinomycosis                                    5         20        87.0% 
                 Summary of Work.outcome_oi  Marketscan  pneumonia                                        3          3        13.0% 
                 Summary of Work.outcome_oi  Medicare    actinomycosis                                   26         48        80.0% 
                 Summary of Work.outcome_oi  Medicare    pneumonia                                        5         12        20.0% 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
361        quit;
NOTE: The PROCEDURE SQL printed page 9.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.12 seconds
      cpu time            0.07 seconds
      

8                                                                   The SAS System                                        10:29 Friday, April 27, 2018

362        
363        
364        proc datasets nolist; delete
365        outcome_OI_dx
366        outcome_OI_dx_mycobacteria
367        outcome_OI_dx_only
368        outcome_OI_dx1
369        outcome_OI_mycobacteria
370        outcome_OI_rx
371        Outcome_oi_dx_rx_1
372        Outcome_oi_dx_rx_2
373        outcome_OI_dx_rx
374        ;
375        quit;

NOTE: Deleting WORK.OUTCOME_OI_DX (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_DX_MYCOBACTERIA (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_DX_ONLY (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_DX1 (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_MYCOBACTERIA (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_RX (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_DX_RX_1 (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_DX_RX_2 (memtype=DATA).
NOTE: Deleting WORK.OUTCOME_OI_DX_RX (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

376        
377        
378        
379        
380        /*
381        Deal with TB and zoster HERE
382        Copy code from outcome_other.sas
383         */
384        data outcome_dx_ZOSTER
385        outcome_DX_TB
386        ;
387        set &indxdat. ;
NOTE: Data set UCB.TEMPINCDXALL is in a format that is native to another host. Cross Environment Data Access will be used. This will require 
      additional CPU resources and may reduce performance.
388        length outcome $20 outcome_date  outcome_start_date 4;
389        format outcome_date outcome_start_date mmddyy10.;
390        if ENC_TYPE in ('IP') then do;
391            if compress(DX,".","s") in :('0463')  then  outcome="PML";
392        end;
393            if compress(DX,".","s") in :('053')  then  outcome="ZOSTER";
394            if compress(DX,".","s") in :('010', '011', '012', '013', '014', '015', '016', '017', '018', '6473')  then  outcome="TB";
395        outcome_date=min(ADMIT_DATE, BEGIN_DATE);
396        outcome_start_date=outcome_date;
397        if outcome="ZOSTER" then output outcome_dx_ZOSTER;
398            else if outcome="TB" then output outcome_DX_TB;
399        where ENC_TYPE in ('IP' 'ER' 'AV' 'NH' 'HH' 'ED');
The SAS supervisor will process queries for foreign datasets. No parallel where-clause processing will occur.
400        run;

NOTE: There were 5928438 observations read from the data set UCB.TEMPINCDXALL.
      WHERE ENC_TYPE in ('AV', 'ED', 'ER', 'HH', 'IP', 'NH');
NOTE: The data set WORK.OUTCOME_DX_ZOSTER has 5055 observations and 26 variables.
NOTE: The data set WORK.OUTCOME_DX_TB has 636 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           8.29 seconds
      cpu time            8.23 seconds
      

401        proc sort data=outcome_dx_TB nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date outcome;run;

NOTE: There were 636 observations read from the data set WORK.OUTCOME_DX_TB.
NOTE: 229 observations with duplicate key values were deleted.
NOTE: The data set WORK.OUTCOME_DX_TB has 407 observations and 26 variables.
9                                                                   The SAS System                                        10:29 Friday, April 27, 2018

NOTE: PROCEDURE SORT used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

402        proc sort data=outcome_zoster nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date outcome;run;
ERROR: File WORK.OUTCOME_ZOSTER.DATA does not exist.

NOTE: The SAS System stopped processing this step because of errors.
NOTE: SAS set option OBS=0 and will continue to check statements. This might cause NOTE: No observations in data set.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


403        proc sort data=outcome_dx_TB nodupkey; by database exposure patid exposureStart exposureEnd exposureID outcome_date dx ENC_TYPE outcome;run
403      ! ;

NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

404        
405        
406        data _outcome_OP_TB(drop=outcome outcome_date);
407        set outcome_dx_TB;
408        by database exposure patid exposureStart exposureEnd exposureID outcome_date;
409        if first.outcome_date;
410        where outcome="TB" and ENC_TYPE in ( 'ER' 'AV' 'NH' 'HH' 'ED');
411        run;

NOTE: The data set WORK._OUTCOME_OP_TB has 0 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

412        /*
413        TB definition 2
414            2. Any ICD-9 code (010-018, 6473) outpatient physician visit claim
415            AND pharmacy records indicating prescription for Pyrazinamide(PZA) prescribed  on same day within +/- 90 days
416            of first code date
417        
418        */
419        
420        data NDC_PYRAZINAMIDE;
421        set NDC.TB_ALL_2016;
422        /*NDC=code;*/
423        where gnn="PYRAZINAMIDE";
424        run;

NOTE: The data set WORK.NDC_PYRAZINAMIDE has 0 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

425        
426        data Work.ndc_zoster;
427          set NDC.ndc_antiviral;
428          where zoster = 1;
429        run;

NOTE: The data set WORK.NDC_ZOSTER has 0 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

430        proc freq data = Work.ndc_zoster;
10                                                                  The SAS System                                        10:29 Friday, April 27, 2018

431          table zoster * gnn / list;
432        run;

NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

433        
434        data  outcome_rx_TB(drop=rc:) outcome_rx_zoster(drop=rc:);
435            if _N_=1 then do;
436                declare hash HTB(dataset:"NDC_PYRAZINAMIDE");
437                rc = HTB.definekey("code");
438        /*        rc = HTB.definedata(all:"YES");*/
439                rc=HTB.definedone();
440        
441                declare hash Hzos(dataset:"Work.ndc_zoster");
442                rc = Hzos.definekey("code");
443        /*        rc = HTB.definedata(all:"YES");*/
444                rc=Hzos.definedone();
445        
446            end;
447        if 0 then set NDC.Antibiotics_parenteral_ndc(keep=NDC) NDC_PYRAZINAMIDE(keep=code) Work.ndc_zoster (keep = code);
448        set &inrxdat. ;
NOTE: Data set UCB.TEMPINCRXALL is in a format that is native to another host. Cross Environment Data Access will be used. This will require 
      additional CPU resources and may reduce performance.
449        by database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE;
450        /*length outcome $20 outcome_date 4;*/
451        /*format outcome_date mmddyy10.;*/
452                rc2 =HTB.find(key:NDC);
453                rc3 = Hzos.find(key:NDC);
454        
455                if rc2=0 then output outcome_rx_TB;
456                if rc3=0 then output outcome_rx_zoster;
457        run;

NOTE: The data set WORK.OUTCOME_RX_TB has 0 observations and 16 variables.
NOTE: The data set WORK.OUTCOME_RX_ZOSTER has 0 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.12 seconds
      cpu time            0.04 seconds
      

458        proc sort data=outcome_rx_TB nodupkey; by database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE;run;

NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

459        proc sort data=outcome_rx_zoster nodupkey; by database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE;run;

NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

460        
461        data outcome_OP_TB(keep=database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE outcome outcome_date DISPENSE_DATE DX
461      ! ADMIT_DATE ENC_TYPE outcome_start_date infection_category);
462            if _N_=1 then do;
463                declare hash HTB(dataset:"outcome_rx_TB" , multidata:"Y");
464                rc = HTB.definekey("database", "exposure", "PATID", "exposureStart", "exposureEnd", "exposureID");
465                rc = HTB.definedata("database", "exposure", "PATID", "exposureStart", "exposureEnd", "exposureID","DISPENSE_DATE");
466                rc=HTB.definedone();
467            end;
468        if 0 then set outcome_rx_TB(keep=database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE);
469        set _outcome_OP_TB ;
470        by database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE;
471        length outcome $20 outcome_date outcome_start_date 4;
472        format outcome_date outcome_start_date mmddyy10.;
473                rc =HTB.find(key:database, key:exposure, key:patid, key:exposureStart, key:exposureEnd, key:exposureID);
11                                                                  The SAS System                                        10:29 Friday, April 27, 2018

474                 do while (rc = 0);
475                    if abs(begin_date-DISPENSE_DATE)<=90 then do;
476                        infection_category = "TUBERCULOSIS";
477                        outcome="OI";
478                        outcome_date=max(DISPENSE_DATE,begin_date);
479                        outcome_start_date=min(DISPENSE_DATE,begin_date);
480                        output;
481                    end;
482                    else do;
483                        outcome="NULL";
484                        outcome_date=.;
485                    end;
486                    rc = HTB.find_next();
487                 end;
488        run;

NOTE: The data set WORK.OUTCOME_OP_TB has 0 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

489        /* TB definition1
490            1 Any ICD-9 code (010-018, 6473) on an inpatient
491          combind def 1 and 2 to outcome_TB;
492        */
493        proc sort data=outcome_OP_TB; by database exposure patid exposureStart exposureEnd exposureID outcome_date descending outcome_start_date;
493      ! run;

NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

494        data outcome_TB(keep=database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE outcome outcome_date DISPENSE_DATE DX
494      ! ADMIT_DATE ENC_TYPE outcome_start_date infection_category);
495        set outcome_OP_TB outcome_dx_TB(where=(outcome="TUBERCULOSIS" and ENC_TYPE in ( 'IP')));
496        by database exposure patid exposureStart exposureEnd exposureID outcome_date;
497        run;

NOTE: The data set WORK.OUTCOME_TB has 0 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

498        
499        data outcome_zoster(keep=database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE outcome outcome_date DISPENSE_DATE DX
499      ! ADMIT_DATE ENC_TYPE outcome_start_date infection_category);
500            if _N_=1 then do;
501                declare hash Hzos(dataset:"outcome_rx_zoster" , multidata:"Y");
502                rc = Hzos.definekey("database", "exposure", "PATID", "exposureStart", "exposureEnd", "exposureID");
503                rc = Hzos.definedata("database", "exposure", "PATID", "exposureStart", "exposureEnd", "exposureID","DISPENSE_DATE");
504                rc=Hzos.definedone();
505            end;
506        if 0 then set outcome_rx_zoster(keep=database exposure patid exposureStart exposureEnd exposureID DISPENSE_DATE);
507        set outcome_dx_ZOSTER ;
508        by database exposure patid exposureStart exposureEnd exposureID BEGIN_DATE;
509        length outcome $20 outcome_date outcome_start_date 4;
510        format outcome_date outcome_start_date mmddyy10.;
511                rc =Hzos.find(key:database, key:exposure, key:patid, key:exposureStart, key:exposureEnd, key:exposureID);
512                 do while (rc = 0);
513                    if abs(begin_date-DISPENSE_DATE)<=90 then do;
514                        infection_category = "ZOSTER";
515                        outcome="OI";
516                        outcome_date=max(DISPENSE_DATE,begin_date);
517                        outcome_start_date=min(DISPENSE_DATE,begin_date);
518                        output;
519                    end;
520                    else do;
521                        outcome="NULL";
522                        outcome_date=.;
12                                                                  The SAS System                                        10:29 Friday, April 27, 2018

523                    end;
524                    rc = Hzos.find_next();
525                 end;
526        run;

NOTE: The data set WORK.OUTCOME_ZOSTER has 0 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

527        
528        
529        
530        
531        /*
532        Write to permanent SAS library
533         */
534        proc sql;
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
535          create table DT.opportunInfectionEpisodesInc as
536            select * from Work.outcome_OI union corr
537            select * from Work.outcome_TB union corr
538            select * from Work.outcome_zoster ;
NOTE: Statement not executed due to NOEXEC option.
539        quit;
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
540        
541        
542        /*
543        Data checks
544         */


545        proc contents data = DT.opportunInfectionEpisodesInc order = varnum;
546        run;

                                                                  --- AS project ---                                  10:29 Friday, April 27, 2018  10

                                                                The CONTENTS Procedure

                                  Data Set Name        DT.OPPORTUNINFECTIONEPISODESINC    Observations          5993
                                  Member Type          DATA                               Variables             12  
                                  Engine               V9                                 Indexes               0   
                                  Created              04/04/2018 16:09:21                Observation Length    168 
                                  Last Modified        04/04/2018 16:09:21                Deleted Observations  0   
                                  Protection                                              Compressed            NO  
                                  Data Set Type                                           Sorted                YES 
                                  Label                                                                             
                                  Data Representation  WINDOWS_64                                                   
                                  Encoding             wlatin1  Western (Windows)                                   


                                                          Engine/Host Dependent Information

                                 Data Set Page Size          65536                                                   
                                 Number of Data Set Pages    16                                                      
                                 First Data Page             1                                                       
                                 Max Obs per Page            389                                                     
                                 Obs in First Data Page      375                                                     
                                 Number of Data Set Repairs  0                                                       
                                 ExtendObsCounter            YES                                                     
                                 Filename                    V:\studies\AS\data\opportuninfectionepisodesinc.sas7bdat
                                 Release Created             9.0401M5                                                
                                 Host Created                X64_DS08R2                                              
                                 Owner Name                  AD\benjaminchan                                         
                                 File Size                   1MB                                                     
                                 File Size (bytes)           1114112                                                 


                                                              Variables in Creation Order
 
                        #    Variable              Type    Len    Format       Informat    Label

                        1    Infection_Category    Char     36    $36.         $36.                                            
                        2    database              Char     10                                                                 
                        3    PATID                 Char     20                             Unique Patient Identification Number
                        4    exposure              Char     11                                                                 
                        5    exposureStart         Num       8    MMDDYY10.                                                    
                        6    exposureEnd           Num       8    MMDDYY10.                                                    
                        7    exposureID            Num       8                                                                 
                        8    BEGIN_DATE            Num       8    MMDDYY10.                Beginning Date of Service           
                        9    DX                    Char     18                             Diagnosis Code                      
                       10    outcome_start_date    Num       8    MMDDYY10.                                                    
                       11    outcome_date          Num       8    MMDDYY10.                                                    
                       12    outcome               Char     20                                                                 


                                                                   Sort Information

 Sortedby       Infection_Category database PATID exposure exposureStart exposureEnd exposureID BEGIN_DATE DX outcome_start_date outcome_date outcome
 Validated      YES                                                                                                                                  
 Character Set  ANSI                                                                                                                                 
 Sort Option    NODUPKEY                                                                                                                             
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryOutcomeOpportunisticInfection.sas
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 10.

547        proc sql;
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
548          select "Summary of DT.opportunInfectionEpisodesInc" as table,
549                 database,
550                 count(*) as denom
551            from DT.opportunInfectionEpisodesInc
552            group by database;
NOTE: Statement not executed due to NOEXEC option.
553          select "Summary of DT.opportunInfectionEpisodesInc" as table,
554                 A.database,
555                 A.infection_category,
556                 count(distinct A.patid) as countDistinctPatid,
557                 count(*) as countRows,
558                 count(*) / denom format = percent8.1 as pctWithinDatabase
559            from DT.opportunInfectionEpisodesInc A inner join
560                 (select database, count(*) as denom from DT.opportunInfectionEpisodesInc group by database) B  on (A.database = B.database)
561            group by A.database, A.infection_category;
NOTE: Statement not executed due to NOEXEC option.
562        quit;
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      
563        
13                                                                  The SAS System                                        10:29 Friday, April 27, 2018

564        
565        
566        
567        ods html close;

ERROR: Errors printed on page 9.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           30.45 seconds
      cpu time            13.57 seconds
      
