1                                                          The SAS System                               10:18 Thursday, May 24, 2018

NOTE: Unable to open SASUSER.REGSTRY. WORK.REGSTRY will be opened instead.
NOTE: All registry changes will be lost at the end of the session.

WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this 
         session.
NOTE: Unable to open SASUSER.PROFILE. WORK.PROFILE will be opened instead.
NOTE: All profile changes will be lost at the end of the session.
NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M5) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70086550.
NOTE: This session is executing on the X64_DS08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.3
      SAS/ETS 14.3
      SAS/IML 14.3
      SAS/QC 14.3

NOTE: Additional host information:

 X64_DS08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any 
of the shared folders.

 


NOTE: SAS initialization used:
      real time           4.46 seconds
      cpu time            0.31 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=queryPrevalentComorbiditiesControl; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref UCB64 was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB64\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
NOTE: Libref NDC was successfully assigned as follows: 
      Engine:        V9 
2                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

      Physical Name: W:\onenote\references\drug ndcs\sas data
143        footnote "&pgm.";
144        * footnote2 "%sysfunc(datetime(),datetime14.)";
145        title1 '--- AS project ---';
146        **********************************************************************;
147        options macrogen mlogic mprint symbolgen;
148        options nomacrogen nomlogic nomprint nosymbolgen;
149        
150        
151        ods html
152          body = "output\&cmt..html"
153          style = Statistical;
NOTE: Writing HTML Body file: output\queryPrevalentComorbiditiesControl.html
154        
155        
156        /*
157        Calculate the prevalence of each comorbidity over various time intervals, by
158        disease cohort (AS vs. non-AS). We will explore how the prevalence of each
159        condition varies according to the amount of data available. Outcomes will be
160        examined in discrete 12 month increments (i.e. using 12 months of data, 24
161        months, 36 months, etc.) using the 6 months baseline plus an additional 6
162        (1st year), 18 (1st and 2nd year), 30 (1st, 2nd, and 3rd year), etc. months
163        of follow-up.
164         */
165        
166        
167        /*
168        See the *Compact Outcome Definition* worksheet in `AS Project Cohort Outcome Codebook-20170410.xlsx`
169         */
170        
171        
172        /*
173        Call interstitial lung disease macro
174         */
175        %include "lib\IPP_2IPSOPplusPX_ILD.sas" / source2;
NOTE: %INCLUDE (level 1) file lib\IPP_2IPSOPplusPX_ILD.sas is file U:\studies\AS\pgms\bchan\lib\IPP_2IPSOPplusPX_ILD.sas.
176       +/*
177       +Interstitial lung disease;
178       +1)  One or more diagnosis codes for ILD from primary discharge
179       +Or
180       +2)  (Two or more diagnosis codes for ILD from secondary discharge or physician EMM ) plus one or more diagnosis tests within 90 days prior
180      !+to (inclusive) one of the diagnosis code for ILD
181       +*/
182       +%macro IPP_2IPSOPplusPX_ILD(outdata=,ids=,Dxs=, Pxs=);
183       +*DXs=diagnosis code in followup, Pxs=CPT code in follow up;
184       +*do not name outData as IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
185       +
186       +data IPPILD dxIPSILD dxOPILD;
187       +set &dxs();
188       +length dx1_date 4;
189       +format dx1_date mmddyy10.;
190       +dx1_date=min(ADMIT_DATE,  BEGIN_DATE);
191       +
192       +if dx in :('515','51630','51631','51632','51633','51634','51635','51636','51637',
193       +           '5164','5165','5166','5168','5169','71481');
194       +
195       +if enc_type='IP' and pdx='P'
196       +    then output IPPILD;
197       +if enc_type='IP' and pdx ne 'P'
198       +    then output dxIPSILD;
199       +if enc_type not in ('IP','IF', 'OT', " ")
200       +    then output dxOPILD;
201       +run;
202       +
203       +data dxIPSOPILD; *ILD from secondary discharge or physician EMM;
204       +set dxIPSILD dxOPILD;
205       +run;
206       +
207       +data pxILD; *diagnosis tests;
208       +set &pxs();
209       +if (px_type='09' and px in ('8741','8742')) or
210       +   (px_type='C1' and px in ('71250','71260','71270','71275','31625','31628',
3                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

211       +                             '31629','31632','31633','32095','32096','32097',
212       +                             '32098','32400','32405','32604','32606','32607',
213       +                             '32608','32609'));
214       +run;
215       +proc sort data=pxILD nodupkey; by &IDS px_date;run; * drop duplicate PX date and keep only one;
216       +
217       +proc sql;
218       +/*one or more diagnosis tests within 90 days prior to (inclusive) one of the diagnosis code for ILD*/
219       +create table dxpxIPSOPILD as
220       +select a.* , b.px_date
221       +from dxIPSOPILD as a
222       +    ,
223       +     pxILD as b
224       +where a.&IDS=b.&IDS and
225       +      min(b.ADMIT_DATE, b.BEGIN_DATE)-90<=b.px_date<=min(b.ADMIT_DATE, b.BEGIN_DATE);
226       +
227       +/* sencond DX code */
228       +create table IPSOPILD as
229       +select a.*, min(b.ADMIT_DATE, b.BEGIN_DATE) as DX2_date length=4 format mmddyy10.
230       +from dxpxIPSOPILD as a
231       +    ,
232       +     dxIPSOPILD(drop=dx1_date) as b
233       +where a.patid=b.patid and
234       +      (a.ADMIT_DATE ne b.ADMIT_DATE and a.BEGIN_DATE ne b.BEGIN_DATE)
235       +order by &IDS,ADMIT_DATE, BEGIN_DATE;
236       +quit;
237       +
238       +
239       +data &outData;
240       +set IPPILD IPSOPILD;
241       +length outcome $20 outcome_date outcome_start_date 4;
242       +format outcome_date outcome_start_date mmddyy10.;
243       +outcome="ILD";
244       +outcome_date=max(dx1_date, dx2_date, px_date);
245       +outcome_start_date=min(dx1_date, dx2_date, px_date);
246       +drop ADMIT_DATE BEGIN_DATE DISCHARGE_DATE END_DATE;
247       +run;
248       +
249       +proc sort data=&outData;
250       +by &IDS outcome_date descending outcome_start_date descending Enc_type;
251       +run;
252       +
253       +data &outData;
254       +set &outData;
255       +by &IDS outcome_date descending outcome_start_date;
256       +if first.outcome_date;
257       +run;
258       +
259       +proc datasets nolist;
260       +delete IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
261       +quit;run;
262       +%mend IPP_2IPSOPplusPX_ILD;
NOTE: %INCLUDE (level 1) ending.
263        %IPP_2IPSOPplusPX_ILD(outdata = Work.outcome_ILD_All,
264                              IDS = controlID,
265                              Dxs = UCB64.tempPrevDxAllControl,
266                              Pxs = UCB64.tempPrevPxAllControl);

NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      226 at 266:249   
NOTE: There were 530234905 observations read from the data set UCB64.TEMPPREVDXALLCONTROL.
NOTE: The data set WORK.IPPILD has 5844 observations and 20 variables.
NOTE: The data set WORK.DXIPSILD has 54639 observations and 20 variables.
NOTE: The data set WORK.DXOPILD has 263957 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           3:03.23
      cpu time            2:46.84
      


NOTE: There were 54639 observations read from the data set WORK.DXIPSILD.
4                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

NOTE: There were 263957 observations read from the data set WORK.DXOPILD.
NOTE: The data set WORK.DXIPSOPILD has 318596 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.26 seconds
      cpu time            0.21 seconds
      


NOTE: There were 1041729028 observations read from the data set UCB64.TEMPPREVPXALLCONTROL.
NOTE: The data set WORK.PXILD has 294977 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           4:27.57
      cpu time            4:00.17
      


NOTE: There were 294977 observations read from the data set WORK.PXILD.
NOTE: 12211 observations with duplicate key values were deleted.
NOTE: The data set WORK.PXILD has 282766 observations and 18 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.45 seconds
      cpu time            0.56 seconds
      

NOTE: Table WORK.DXPXIPSOPILD created, with 154154 rows and 21 columns.

NOTE: Invalid (or missing) arguments to the MIN function have caused the function to return a missing value.
NOTE: Table WORK.IPSOPILD created, with 209096 rows and 22 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           2.02 seconds
      cpu time            1.87 seconds
      


NOTE: There were 5844 observations read from the data set WORK.IPPILD.
NOTE: There were 209096 observations read from the data set WORK.IPSOPILD.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 214940 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.17 seconds
      


NOTE: There were 214940 observations read from the data set WORK.OUTCOME_ILD_ALL.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 214940 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.32 seconds
      cpu time            0.56 seconds
      


NOTE: There were 214940 observations read from the data set WORK.OUTCOME_ILD_ALL.
NOTE: The data set WORK.OUTCOME_ILD_ALL has 13885 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.17 seconds
      cpu time            0.14 seconds
      


NOTE: Deleting WORK.IPPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSILD (memtype=DATA).
NOTE: Deleting WORK.DXOPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.PXILD (memtype=DATA).
NOTE: Deleting WORK.DXPXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.IPSOPILD (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.14 seconds
      cpu time            0.04 seconds
      

5                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

267        
268        
269        /*
270        Process fracture episodes data set
271         */
272        proc sql;
273          create table Work.fractures as
274            select database,
275                   cohort,
276                   patid,
277                   indexDate,
278                   controlID,
279                   age,
280                   sex,
281                   "Osteoporotic fracture" as outcomeCategory,
282                   fractureType as disease,
283                   fractureEpisodeStart as begin_date
284            from DT.fractureEpisodesPrevControl
285            where ^missing(fractureType);
NOTE: Table WORK.FRACTURES created, with 670834 rows and 10 columns.

286        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           2.05 seconds
      cpu time            1.35 seconds
      

287        
288        
289        
290        
291        proc sql;
292        
293          create table Work.defOutcomes as
294            select *
295            from DT.defOutcomes
296            where disease ^in ("Interstitial lung disease");
NOTE: Table WORK.DEFOUTCOMES created, with 2664 rows and 6 columns.

297        
298          %let select1 = select A.*, B.outcomeCategory, B.disease;
299          %let join1 = inner join Work.defOutcomes B on (A.codeType = B.codeType & A.code = B.code);
300          %let where1a = where B.disease ^in ("Myocardial infarction", "Hospitalized infection");
301          %let where1b = | (B.disease in ("Myocardial infarction", "Hospitalized infection") & A.enc_type = "IP");
302          %let select2 = select database, cohort, patid, indexDate, controlID, enc_type, age, sex, "Lung disease" as outcomeCategory, "Interstitial
302      !  lung disease" as disease, outcome_start_date as begin_date;
303          create table DT.comorbiditiesControl as
304            select C.database, C.cohort, C.patid, C.indexDate, C.controlID, C.age, C.sex,
305                   C.outcomeCategory,
306                   C.disease,
307                   sum(C.begin_date <= C.indexDate) > 0 as indPrevPriorToIndex,
308                   sum(0 <= C.indexDate  - C.begin_date <= 183 |
309                       0 <= C.begin_date - C.indexDate  <= (183 * 1)) > 0 as indPrev12mo,
310                   sum(0 <= C.indexDate  - C.begin_date <= 183 |
311                       0 <= C.begin_date - C.indexDate  <= (183 * 3)) > 0 as indPrev24mo,
312                   sum(0 <= C.indexDate  - C.begin_date <= 183 |
313                       0 <= C.begin_date - C.indexDate  <= (183 * 5)) > 0 as indPrev36mo
314            from (&select1 from UCB64.tempPrevDxAllControl A &join1 &where1a &where1b union corr
315                  &select1 from UCB64.tempPrevPxAllControl A &join1 &where1a union corr
316                  &select2 from Work.outcome_ILD_All union corr
317                  select * from Work.fractures) C
318            group by C.database, C.cohort, C.patid, C.indexDate, C.controlID, C.age, C.sex,
319                     C.outcomeCategory,
320                     C.disease
321            having calculated indPrevPriorToIndex > 0 |
322                   calculated indPrev12mo > 0 |
323                   calculated indPrev24mo > 0 |
324                   calculated indPrev36mo > 0;
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Table DT.COMORBIDITIESCONTROL created, with 1937291 rows and 13 columns.

6                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

325        
326          create table Work.denominator as
327            select database,
328                   cohort,
329                   count(distinct patid) as denomPatid,
330                   count(distinct controlID) as denomControlCohort
331            from DT.controlLookup
332            group by database, cohort;
NOTE: Table WORK.DENOMINATOR created, with 2 rows and 4 columns.

333        
334          create table Work.prev as
335            select A.database, A.cohort, A.outcomeCategory, A.disease,
336                   B.denomPatid,
337                   B.denomControlCohort,
338                   "Prior to index" as timeWindow,
339                   sum(A.indPrevPriorToIndex) as numer,
340                   sum(A.indPrevPriorToIndex) / B.denomControlCohort * 100 as prevPct
341            from DT.comorbiditiesControl A inner join
342                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
343            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort
344            union corr
345            select A.database, A.cohort, A.outcomeCategory, A.disease,
346                   B.denomPatid,
347                   B.denomControlCohort,
348                   "12 months" as timeWindow,
349                   sum(A.indPrev12mo) as numer,
350                   sum(A.indPrev12mo) / B.denomControlCohort * 100 as prevPct
351            from DT.comorbiditiesControl A inner join
352                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
353            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort
354            union corr
355            select A.database, A.cohort, A.outcomeCategory, A.disease,
356                   B.denomPatid,
357                   B.denomControlCohort,
358                   "24 months" as timeWindow,
359                   sum(A.indPrev24mo) as numer,
360                   sum(A.indPrev24mo) / B.denomControlCohort * 100 as prevPct
361            from DT.comorbiditiesControl A inner join
362                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
363            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort
364            union corr
365            select A.database, A.cohort, A.outcomeCategory, A.disease,
366                   B.denomPatid,
367                   B.denomControlCohort,
368                   "36 months" as timeWindow,
369                   sum(A.indPrev36mo) as numer,
370                   sum(A.indPrev36mo) / B.denomControlCohort * 100 as prevPct
371            from DT.comorbiditiesControl A inner join
372                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
373            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort;
NOTE: Table WORK.PREV created, with 184 rows and 9 columns.

374          select * from Work.prev;
                                                                  --- AS project ---                                  10:18 Thursday, May 24, 2018   1

                                                                                                            denom
                                                                                                          Control
database  cohort  Disease Category            Disease                                    denomPatid        Cohort  timeWindow         numer   prevPct
-----------------------------------------------------------------------------------------------------------------------------------------------------
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  12 months           6620  0.581097
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  24 months          10912  0.957844
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  36 months          13963  1.225658
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  Prior to index      4913  0.431258
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  12 months              6  0.000527
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  24 months              7  0.000614
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  36 months              7  0.000614
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  Prior to index         5  0.000439
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  12 months          44098  3.870877
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  24 months          67203   5.89901
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  36 months          82301  7.224297
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  Prior to index     32829  2.881696
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  12 months          10075  0.884373
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  24 months          17063  1.497773
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  36 months          22299  1.957383
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  Prior to index      7464  0.655182
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  12 months           7667  0.673001
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  24 months          14426  1.266299
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  36 months          19684  1.727841
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  Prior to index      5634  0.494547
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  12 months           2527  0.221817
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  24 months           5423  0.476025
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  36 months           7883  0.691962
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  Prior to index      1968  0.172749
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  12 months          25480  2.236608
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  24 months          47120  4.136145
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  36 months          62816  5.513924
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  Prior to index     20319  1.783581
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  12 months           4780  0.419583
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  24 months           9065  0.795716
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  36 months          12486  1.096008
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  Prior to index      3182  0.279313
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  12 months          24525  2.152779
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  24 months          33561   2.94595
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  36 months          38170  3.350523
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  Prior to index     18118  1.590379
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  12 months          22814  2.002589
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  24 months          34036  2.987645
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  36 months          40295  3.537054
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  Prior to index     15790   1.38603
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  12 months            250  0.021945
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  24 months            627  0.055037
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  36 months            943  0.082776
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  Prior to index       140  0.012289
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  12 months            858  0.075314
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  24 months           1404  0.123242
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  36 months           1788  0.156949
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  Prior to index       603  0.052931
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  12 months            490  0.043012
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  24 months            847  0.074349
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  36 months           1067   0.09366
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  Prior to index       375  0.032917
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  12 months             88  0.007725
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  24 months            169  0.014835
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  36 months            250  0.021945
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  Prior to index        54   0.00474
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  12 months            710  0.062323
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  24 months           1193   0.10472
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  36 months           1544  0.135531
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  Prior to index       549  0.048191
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  12 months           7419  0.651232
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  24 months          14118  1.239264
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  36 months          19026  1.670083
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  Prior to index      5075  0.445478
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  12 months             79  0.006935
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  24 months            161  0.014132
 
                                                        queryPrevalentComorbiditiesControl.sas
                                                                  --- AS project ---                                  10:18 Thursday, May 24, 2018   2

                                                                                                            denom
                                                                                                          Control
database  cohort  Disease Category            Disease                                    denomPatid        Cohort  timeWindow         numer   prevPct
-----------------------------------------------------------------------------------------------------------------------------------------------------
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  36 months            213  0.018697
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  Prior to index        67  0.005881
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  12 months            445  0.039062
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  24 months            833   0.07312
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  36 months           1124  0.098664
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  Prior to index       309  0.027124
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  12 months           5164  0.453291
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  24 months          10078  0.884636
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  36 months          13994  1.228379
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  Prior to index      3925  0.344532
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  12 months          13539   1.18844
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  24 months          25869  2.270754
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  36 months          35292  3.097895
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  Prior to index     10581  0.928789
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  12 months          52774  4.632447
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  24 months          78177  6.862297
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  36 months          91697  8.049068
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  Prior to index     36882  3.237464
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  12 months          11753  1.031666
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  24 months          16546  1.452391
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  36 months          19407  1.703527
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  Prior to index      8752  0.768242
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  12 months           2484  0.218043
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  24 months           4332  0.380259
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  36 months           5496  0.482433
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  Prior to index      1660  0.145713
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1854650       1854650  12 months          21966  1.184374
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1854650       1854650  24 months          27302  1.472084
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1854650       1854650  36 months          31189  1.681665
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1854650       1854650  Prior to index     20913  1.127598
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1854650       1854650  12 months          12975  0.699593
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1854650       1854650  24 months          21701  1.170086
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1854650       1854650  36 months          27024  1.457094
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1854650       1854650  Prior to index     14073  0.758795
Medicare  Non-AS  Cancer                      Solid Cancer                                  1854650       1854650  12 months         163321  8.806028
Medicare  Non-AS  Cancer                      Solid Cancer                                  1854650       1854650  24 months         207542  11.19036
Medicare  Non-AS  Cancer                      Solid Cancer                                  1854650       1854650  36 months         237562  12.80899
Medicare  Non-AS  Cancer                      Solid Cancer                                  1854650       1854650  Prior to index    160690  8.664168
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1854650       1854650  12 months          49314  2.658938
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1854650       1854650  24 months          72400  3.903702
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1854650       1854650  36 months          87923  4.740679
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1854650       1854650  Prior to index     51791  2.792495
Medicare  Non-AS  Cardiac disease             Conduction Block                              1854650       1854650  12 months          41495  2.237349
Medicare  Non-AS  Cardiac disease             Conduction Block                              1854650       1854650  24 months          68676  3.702909
Medicare  Non-AS  Cardiac disease             Conduction Block                              1854650       1854650  36 months          88439  4.768501
Medicare  Non-AS  Cardiac disease             Conduction Block                              1854650       1854650  Prior to index     48455  2.612622
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1854650       1854650  12 months          18571  1.001321
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1854650       1854650  24 months          35414  1.909471
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1854650       1854650  36 months          48931  2.638288
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1854650       1854650  Prior to index     22093  1.191222
Medicare  Non-AS  Infection                   Hospitalized infection                        1854650       1854650  12 months         165207  8.907718
Medicare  Non-AS  Infection                   Hospitalized infection                        1854650       1854650  24 months         276098   14.8868
Medicare  Non-AS  Infection                   Hospitalized infection                        1854650       1854650  36 months         354760  19.12814
Medicare  Non-AS  Infection                   Hospitalized infection                        1854650       1854650  Prior to index    166853  8.996468
Medicare  Non-AS  Infection                   Opportunistic infection                       1854650       1854650  12 months          15889  0.856712
Medicare  Non-AS  Infection                   Opportunistic infection                       1854650       1854650  24 months          27614  1.488906
Medicare  Non-AS  Infection                   Opportunistic infection                       1854650       1854650  36 months          37161  2.003666
Medicare  Non-AS  Infection                   Opportunistic infection                       1854650       1854650  Prior to index     17726   0.95576
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1854650       1854650  12 months           6344  0.342059
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1854650       1854650  24 months           8386  0.452161
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1854650       1854650  36 months           9695   0.52274
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1854650       1854650  Prior to index      6628  0.357372
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1854650       1854650  12 months           6924  0.373332
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1854650       1854650  24 months          10006  0.539509
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1854650       1854650  36 months          12143  0.654733
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1854650       1854650  Prior to index      7513   0.40509
 
                                                        queryPrevalentComorbiditiesControl.sas
                                                                  --- AS project ---                                  10:18 Thursday, May 24, 2018   3

                                                                                                            denom
                                                                                                          Control
database  cohort  Disease Category            Disease                                    denomPatid        Cohort  timeWindow         numer   prevPct
-----------------------------------------------------------------------------------------------------------------------------------------------------
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1854650       1854650  12 months            244  0.013156
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1854650       1854650  24 months            404  0.021783
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1854650       1854650  36 months            546   0.02944
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1854650       1854650  Prior to index       245   0.01321
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1854650       1854650  12 months           1908  0.102877
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1854650       1854650  24 months           3101  0.167201
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1854650       1854650  36 months           4020  0.216752
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1854650       1854650  Prior to index      2116  0.114092
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1854650       1854650  12 months           1126  0.060712
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1854650       1854650  24 months           1791  0.096568
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1854650       1854650  36 months           2280  0.122934
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1854650       1854650  Prior to index      1217  0.065619
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1854650       1854650  12 months            152  0.008196
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1854650       1854650  24 months            192  0.010352
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1854650       1854650  36 months            220  0.011862
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1854650       1854650  Prior to index       141  0.007603
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1854650       1854650  12 months            823  0.044375
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1854650       1854650  24 months           1567   0.08449
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1854650       1854650  36 months           2104  0.113445
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1854650       1854650  Prior to index       881  0.047502
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1854650       1854650  12 months          23451  1.264443
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1854650       1854650  24 months          39226  2.115008
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1854650       1854650  36 months          51482  2.775834
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1854650       1854650  Prior to index     28607  1.542447
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1854650       1854650  12 months            333  0.017955
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1854650       1854650  24 months            551  0.029709
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1854650       1854650  36 months            730  0.039361
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1854650       1854650  Prior to index       413  0.022268
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1854650       1854650  12 months           1548  0.083466
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1854650       1854650  24 months           2621   0.14132
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1854650       1854650  36 months           3478  0.187529
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1854650       1854650  Prior to index      1871  0.100882
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1854650       1854650  12 months          20776  1.120211
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1854650       1854650  24 months          35994  1.940744
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1854650       1854650  36 months          47603  2.566684
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1854650       1854650  Prior to index     27772  1.497425
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1854650       1854650  12 months          47429  2.557302
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1854650       1854650  24 months          81873  4.414472
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1854650       1854650  36 months         108231  5.835656
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1854650       1854650  Prior to index     74031  3.991643
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1854650       1854650  12 months          17954  0.968053
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1854650       1854650  24 months          26351  1.420807
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1854650       1854650  36 months          31941  1.722212
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1854650       1854650  Prior to index     20165  1.087267
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1854650       1854650  12 months           2917   0.15728
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1854650       1854650  24 months           3889  0.209689
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1854650       1854650  36 months           4516  0.243496
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1854650       1854650  Prior to index      3076  0.165853
Medicare  Non-AS  Uveitis                     Uveitis                                       1854650       1854650  12 months           4327  0.233305
Medicare  Non-AS  Uveitis                     Uveitis                                       1854650       1854650  24 months           7121  0.383954
Medicare  Non-AS  Uveitis                     Uveitis                                       1854650       1854650  36 months           9237  0.498045
Medicare  Non-AS  Uveitis                     Uveitis                                       1854650       1854650  Prior to index      5653  0.304801
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryPrevalentComorbiditiesControl.sas
375        quit;
NOTE: The PROCEDURE SQL printed pages 1-3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           6:24.40
      cpu time            9:39.12
      

376        
377        
378        proc export
379          data = Work.prev
380          outfile = "data\processed\&cmt..csv"
381          dbms = csv
382          replace;
383          delimiter = ",";
384        run;

385         /**********************************************************************
7                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

386         *   PRODUCT:   SAS
387         *   VERSION:   9.4
388         *   CREATOR:   External File Interface
389         *   DATE:      24MAY18
390         *   DESC:      Generated SAS Datastep Code
391         *   TEMPLATE SOURCE:  (None Specified.)
392         ***********************************************************************/
393            data _null_;
394            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
395            %let _EFIREC_ = 0;     /* clear export record count macro variable */
396            file 'data\processed\queryPrevalentComorbiditiesControl.csv' delimiter=',' DSD DROPOVER lrecl=32767;
397            if _n_ = 1 then        /* write column names or labels */
398             do;
399               put
400                  "database"
401               ','
402                  "cohort"
403               ','
404                  "outcomeCategory"
405               ','
406                  "Disease"
407               ','
408                  "denomPatid"
409               ','
410                  "denomControlCohort"
411               ','
412                  "timeWindow"
413               ','
414                  "numer"
415               ','
416                  "prevPct"
417               ;
418             end;
419           set  WORK.PREV   end=EFIEOD;
420               format database $8. ;
421               format cohort $6. ;
422               format outcomeCategory $26. ;
423               format Disease $41. ;
424               format denomPatid best12. ;
425               format denomControlCohort best12. ;
426               format timeWindow $14. ;
427               format numer best12. ;
428               format prevPct best12. ;
429             do;
430               EFIOUT + 1;
431               put database $ @;
432               put cohort $ @;
433               put outcomeCategory $ @;
434               put Disease $ @;
435               put denomPatid @;
436               put denomControlCohort @;
437               put timeWindow $ @;
438               put numer @;
439               put prevPct ;
440               ;
441             end;
442            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
443            if EFIEOD then call symputx('_EFIREC_',EFIOUT);
444            run;

NOTE: The file 'data\processed\queryPrevalentComorbiditiesControl.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\processed\queryPrevalentComorbiditiesControl.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=24May2018:10:33:12,
      Create Time=24May2018:10:33:12

NOTE: 185 records were written to the file 'data\processed\queryPrevalentComorbiditiesControl.csv'.
      The minimum record length was 71.
      The maximum record length was 123.
NOTE: There were 184 observations read from the data set WORK.PREV.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
8                                                                   The SAS System                                        10:18 Thursday, May 24, 2018

      cpu time            0.01 seconds
      

184 records created in data\processed\queryPrevalentComorbiditiesControl.csv from WORK.PREV.
  
  
NOTE: "data\processed\queryPrevalentComorbiditiesControl.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.26 seconds
      cpu time            0.12 seconds
      

445        
446        
447        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           14:17.37
      cpu time            16:32.05
      
