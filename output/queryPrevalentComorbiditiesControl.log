1                                                          The SAS System                            11:57 Friday, September 8, 2017

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF ALABAMA AT BIRMINGHAM - SFA - T&R, Site 70058223.
NOTE: This session is executing on the W32_ES08R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_ES08R2 WIN 6.1.7601 Service Pack 1 Server

--- PEER News and Updates ---

: SECURITY REMINDER :
Please remember not to copy any data files that contain PHI (protected health identifiers) to any of the shared folders.

 


NOTE: SAS initialization used:
      real time           2.87 seconds
      cpu time            0.18 seconds
      
1          *  University of Alabama at Birmingham                               *
2          *  AS project                                            *
3          **********************************************************************;
4          options pagesize=74 linesize=150 pageno=1 missing=' ' date FORMCHAR="|----|+|---+=|-/\<>*";
5          * Programmer    : Benjamin Chan <chanb@ohsu.edu>
6          * Creation date :
7          * Modify date   :
8          ;
9          %let cmt=queryPrevalentComorbiditiesControl; * type the name of your program here (without the filename extension);
10         %let pgm=&cmt..sas;
11         %include "lib\libname.sas" ;
NOTE: Libref STDC5P was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: H:\studies\osteo\data\STD_files\5pct\
NOTE: Libref STD_SABR was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\data\std_SABER\
NOTE: Libref MPSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: h:\studies\mpcd\data\stddata\
NOTE: Libref UCBSTD was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\stddata\
NOTE: Libref UCB was successfully assigned as follows: 
      Engine:        SPDE 
      Physical Name: q:\studies\AS\data\UCB\
NOTE: Libref DT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: V:\studies\AS\data
92         footnote "&pgm.";
93         * footnote2 "%sysfunc(datetime(),datetime14.)";
94         title1 '--- AS project ---';
95         **********************************************************************;
96         options macrogen mlogic mprint symbolgen;
97         options nomacrogen nomlogic nomprint nosymbolgen;
98         
99         
100        ods html
101          body = "output\&cmt..html"
102          style = Statistical;
NOTE: Writing HTML Body file: output\queryPrevalentComorbiditiesControl.html
2                                                                   The SAS System                                     11:57 Friday, September 8, 2017

103        
104        
105        /*
106        Calculate the prevalence of each comorbidity over various time intervals, by
107        disease cohort (AS vs. non-AS). We will explore how the prevalence of each
108        condition varies according to the amount of data available. Outcomes will be
109        examined in discrete 12 month increments (i.e. using 12 months of data, 24
110        months, 36 months, etc.) using the 6 months baseline plus an additional 6
111        (1st year), 18 (1st and 2nd year), 30 (1st, 2nd, and 3rd year), etc. months
112        of follow-up.
113         */
114        
115        
116        /*
117        See the *Compact Outcome Definition* worksheet in `AS Project Cohort Outcome Codebook-20170410.xlsx`
118         */
119        
120        
121        /*
122        Call interstitial lung disease macro
123         */
124        %include "lib\IPP_2IPSOPplusPX_ILD.sas" / source2;
NOTE: %INCLUDE (level 1) file lib\IPP_2IPSOPplusPX_ILD.sas is file U:\studies\AS\pgms\bchan\lib\IPP_2IPSOPplusPX_ILD.sas.
125       +/*
126       +Interstitial lung disease;
127       +1)  One or more diagnosis codes for ILD from primary discharge
128       +Or
129       +2)  (Two or more diagnosis codes for ILD from secondary discharge or physician EMM ) plus one or more diagnosis tests within 90 days prior
129      !+to (inclusive) one of the diagnosis code for ILD
130       +*/
131       +%macro IPP_2IPSOPplusPX_ILD(outdata=,ids=,Dxs=, Pxs=);
132       +*DXs=diagnosis code in followup, Pxs=CPT code in follow up;
133       +*do not name outData as IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
134       +
135       +data IPPILD dxIPSILD dxOPILD;
136       +set &dxs();
137       +length dx1_date 4;
138       +format dx1_date mmddyy10.;
139       +dx1_date=min(ADMIT_DATE,  BEGIN_DATE);
140       +
141       +if dx in :('515','51630','51631','51632','51633','51634','51635','51636','51637',
142       +           '5164','5165','5166','5168','5169','71481');
143       +
144       +if enc_type='IP' and pdx='P'
145       +    then output IPPILD;
146       +if enc_type='IP' and pdx ne 'P'
147       +    then output dxIPSILD;
148       +if enc_type not in ('IP','IF', 'OT', " ")
149       +    then output dxOPILD;
150       +run;
151       +
152       +data dxIPSOPILD; *ILD from secondary discharge or physician EMM;
153       +set dxIPSILD dxOPILD;
154       +run;
155       +
156       +data pxILD; *diagnosis tests;
157       +set &pxs();
158       +if (px_type='09' and px in ('8741','8742')) or
159       +   (px_type='C1' and px in ('71250','71260','71270','71275','31625','31628',
160       +                             '31629','31632','31633','32095','32096','32097',
161       +                             '32098','32400','32405','32604','32606','32607',
162       +                             '32608','32609'));
163       +run;
164       +proc sort data=pxILD nodupkey; by &IDS px_date;run; * drop duplicate PX date and keep only one;
165       +
166       +proc sql;
167       +/*one or more diagnosis tests within 90 days prior to (inclusive) one of the diagnosis code for ILD*/
168       +create table dxpxIPSOPILD as
169       +select a.* , b.px_date
170       +from dxIPSOPILD as a
171       +    ,
172       +     pxILD as b
3                                                                   The SAS System                                     11:57 Friday, September 8, 2017

173       +where a.&IDS=b.&IDS and
174       +      min(b.ADMIT_DATE, b.BEGIN_DATE)-90<=b.px_date<=min(b.ADMIT_DATE, b.BEGIN_DATE);
175       +
176       +/* sencond DX code */
177       +create table IPSOPILD as
178       +select a.*, min(b.ADMIT_DATE, b.BEGIN_DATE) as DX2_date length=4 format mmddyy10.
179       +from dxpxIPSOPILD as a
180       +    ,
181       +     dxIPSOPILD(drop=dx1_date) as b
182       +where a.patid=b.patid and
183       +      (a.ADMIT_DATE ne b.ADMIT_DATE and a.BEGIN_DATE ne b.BEGIN_DATE)
184       +order by &IDS,ADMIT_DATE, BEGIN_DATE;
185       +quit;
186       +
187       +
188       +data &outData;
189       +set IPPILD IPSOPILD;
190       +length outcome $20 outcome_date outcome_start_date 4;
191       +format outcome_date outcome_start_date mmddyy10.;
192       +outcome="ILD";
193       +outcome_date=max(dx1_date, dx2_date, px_date);
194       +outcome_start_date=min(dx1_date, dx2_date, px_date);
195       +drop ADMIT_DATE BEGIN_DATE DISCHARGE_DATE END_DATE;
196       +run;
197       +
198       +proc sort data=&outData;
199       +by &IDS outcome_date descending outcome_start_date descending Enc_type;
200       +run;
201       +
202       +data &outData;
203       +set &outData;
204       +by &IDS outcome_date descending outcome_start_date;
205       +if first.outcome_date;
206       +run;
207       +
208       +proc datasets nolist;
209       +delete IPPILD dxIPSILD dxOPILD dxIPSOPILD pxILD dxpxIPSOPILD IPSOPILD;
210       +quit;run;
211       +%mend IPP_2IPSOPplusPX_ILD;
NOTE: %INCLUDE (level 1) ending.
212        %IPP_2IPSOPplusPX_ILD(outdata = Work.outcome_ILD_MPCD,
213                              IDS = controlID,
214                              Dxs = UCB.tempPrevDxMPCDControl,
215                              Pxs = UCB.tempPrevPxMPCDControl);

NOTE: There were 72355341 observations read from the data set UCB.TEMPPREVDXMPCDCONTROL.
NOTE: The data set WORK.IPPILD has 65 observations and 21 variables.
NOTE: The data set WORK.DXIPSILD has 380 observations and 21 variables.
NOTE: The data set WORK.DXOPILD has 49677 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           3:45.56
      cpu time            31.13 seconds
      


NOTE: There were 380 observations read from the data set WORK.DXIPSILD.
NOTE: There were 49677 observations read from the data set WORK.DXOPILD.
NOTE: The data set WORK.DXIPSOPILD has 50057 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      


NOTE: There were 168458870 observations read from the data set UCB.TEMPPREVPXMPCDCONTROL.
NOTE: The data set WORK.PXILD has 328143 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           6:01.61
      cpu time            24.47 seconds
      


4                                                                   The SAS System                                     11:57 Friday, September 8, 2017

NOTE: There were 328143 observations read from the data set WORK.PXILD.
NOTE: 65698 observations with duplicate key values were deleted.
NOTE: The data set WORK.PXILD has 262445 observations and 18 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.29 seconds
      cpu time            0.35 seconds
      

NOTE: Table WORK.DXPXIPSOPILD created, with 132602 rows and 22 columns.

NOTE: Table WORK.IPSOPILD created, with 12278 rows and 23 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.88 seconds
      cpu time            0.78 seconds
      


NOTE: There were 65 observations read from the data set WORK.IPPILD.
NOTE: There were 12278 observations read from the data set WORK.IPSOPILD.
NOTE: The data set WORK.OUTCOME_ILD_MPCD has 12343 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      


NOTE: There were 12343 observations read from the data set WORK.OUTCOME_ILD_MPCD.
NOTE: The data set WORK.OUTCOME_ILD_MPCD has 12343 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 12343 observations read from the data set WORK.OUTCOME_ILD_MPCD.
NOTE: The data set WORK.OUTCOME_ILD_MPCD has 301 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      


NOTE: Deleting WORK.IPPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSILD (memtype=DATA).
NOTE: Deleting WORK.DXOPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.PXILD (memtype=DATA).
NOTE: Deleting WORK.DXPXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.IPSOPILD (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.07 seconds
      cpu time            0.03 seconds
      

216        %IPP_2IPSOPplusPX_ILD(outdata = Work.outcome_ILD_SABR,
217                              IDS = controlID,
218                              Dxs = UCB.tempPrevDxSABRControl,
219                              Pxs = UCB.tempPrevPxSABRControl);

NOTE: There were 645527317 observations read from the data set UCB.TEMPPREVDXSABRCONTROL.
NOTE: The data set WORK.IPPILD has 3284 observations and 21 variables.
NOTE: The data set WORK.DXIPSILD has 34938 observations and 21 variables.
NOTE: The data set WORK.DXOPILD has 143661 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           25:06.74
      cpu time            3:40.18
      


NOTE: There were 34938 observations read from the data set WORK.DXIPSILD.
NOTE: There were 143661 observations read from the data set WORK.DXOPILD.
5                                                                   The SAS System                                     11:57 Friday, September 8, 2017

NOTE: The data set WORK.DXIPSOPILD has 178599 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.10 seconds
      


NOTE: There were 896909634 observations read from the data set UCB.TEMPPREVPXSABRCONTROL.
NOTE: The data set WORK.PXILD has 20249 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           29:34.85
      cpu time            2:45.36
      


NOTE: There were 20249 observations read from the data set WORK.PXILD.
NOTE: 44 observations with duplicate key values were deleted.
NOTE: The data set WORK.PXILD has 20205 observations and 18 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

NOTE: Table WORK.DXPXIPSOPILD created, with 4379 rows and 22 columns.

NOTE: Table WORK.IPSOPILD created, with 27814 rows and 23 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.54 seconds
      cpu time            0.40 seconds
      


NOTE: There were 3284 observations read from the data set WORK.IPPILD.
NOTE: There were 27814 observations read from the data set WORK.IPSOPILD.
NOTE: The data set WORK.OUTCOME_ILD_SABR has 31098 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      


NOTE: There were 31098 observations read from the data set WORK.OUTCOME_ILD_SABR.
NOTE: The data set WORK.OUTCOME_ILD_SABR has 31098 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      


NOTE: There were 31098 observations read from the data set WORK.OUTCOME_ILD_SABR.
NOTE: The data set WORK.OUTCOME_ILD_SABR has 4516 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: Deleting WORK.IPPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSILD (memtype=DATA).
NOTE: Deleting WORK.DXOPILD (memtype=DATA).
NOTE: Deleting WORK.DXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.PXILD (memtype=DATA).
NOTE: Deleting WORK.DXPXIPSOPILD (memtype=DATA).
NOTE: Deleting WORK.IPSOPILD (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

220        
221        /*
6                                                                   The SAS System                                     11:57 Friday, September 8, 2017

222        Process fracture episodes data set
223         */
224        proc sql;
225          create table Work.fractures as
226            select database,
227                   cohort,
228                   patid,
229                   indexDate,
230                   controlID,
231                   age,
232                   sex,
233                   "Osteoporotic fracture" as outcomeCategory,
234                   fractureType as disease,
235                   fractureEpisodeStart as begin_date
236            from DT.fractureEpisodesPrevControl
237            where ^missing(fractureType);
NOTE: Table WORK.FRACTURES created, with 722804 rows and 10 columns.

238        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           1.90 seconds
      cpu time            1.21 seconds
      

239        
240        
241        
242        
243        proc sql;
244        
245          create table Work.defOutcomes as
246            select *
247            from DT.defOutcomes
248            where disease ^in ("Interstitial lung disease");
NOTE: Table WORK.DEFOUTCOMES created, with 2664 rows and 6 columns.

249        
250          %let select1 = select A.*, B.outcomeCategory, B.disease;
251          %let join1 = inner join Work.defOutcomes B on (A.codeType = B.codeType & A.code = B.code);
252          %let where1a = where B.disease ^in ("Myocardial infarction", "Hospitalized infection");
253          %let where1b = | (B.disease in ("Myocardial infarction", "Hospitalized infection") & A.enc_type = "IP");
254          %let select2 = select database, cohort, patid, indexDate, controlID, enc_type, age, sex, "Lung disease" as outcomeCategory, "Interstitial
254      !  lung disease" as disease, outcome_start_date as begin_date;
255          create table DT.comorbiditiesControl as
256            select C.database, C.cohort, C.patid, C.indexDate, C.controlID, C.age, C.sex,
257                   C.outcomeCategory,
258                   C.disease,
259                   sum(C.begin_date <= C.indexDate) > 0 as indPrevPriorToIndex,
260                   sum(0 <= C.indexDate  - C.begin_date <= 183 |
261                       0 <= C.begin_date - C.indexDate  <= (183 * 1)) > 0 as indPrev12mo,
262                   sum(0 <= C.indexDate  - C.begin_date <= 183 |
263                       0 <= C.begin_date - C.indexDate  <= (183 * 3)) > 0 as indPrev24mo,
264                   sum(0 <= C.indexDate  - C.begin_date <= 183 |
265                       0 <= C.begin_date - C.indexDate  <= (183 * 5)) > 0 as indPrev36mo
266            from (&select1 from UCB.tempPrevDxMPCDControl A &join1 &where1a &where1b union corr
267                  &select1 from UCB.tempPrevDxSABRControl A &join1 &where1a &where1b union corr
268                  &select1 from UCB.tempPrevPxMPCDControl A &join1 &where1a union corr
269                  &select1 from UCB.tempPrevPxSABRControl A &join1 &where1a union corr
270                  &select2 from Work.outcome_ILD_MPCD union corr
271                  &select2 from Work.outcome_ILD_SABR union corr
272                  select * from Work.fractures) C
273            group by C.database, C.cohort, C.patid, C.indexDate, C.controlID, C.age, C.sex,
274                     C.outcomeCategory,
275                     C.disease
276            having calculated indPrevPriorToIndex > 0 |
277                   calculated indPrev12mo > 0 |
278                   calculated indPrev24mo > 0 |
279                   calculated indPrev36mo > 0;
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Parallel WHERE evaluation suppressed due to sort order on table.
NOTE: Table DT.COMORBIDITIESCONTROL created, with 1901642 rows and 13 columns.

7                                                                   The SAS System                                     11:57 Friday, September 8, 2017

280        
281          create table Work.denominator as
282            select database,
283                   cohort,
284                   count(distinct patid) as denomPatid,
285                   count(distinct controlID) as denomControlCohort
286            from DT.controlLookup
287            group by database, cohort;
NOTE: Table WORK.DENOMINATOR created, with 2 rows and 4 columns.

288        
289          create table Work.prev as
290            select A.database, A.cohort, A.outcomeCategory, A.disease,
291                   B.denomPatid,
292                   B.denomControlCohort,
293                   "Prior to index" as timeWindow,
294                   sum(A.indPrevPriorToIndex) as numer,
295                   sum(A.indPrevPriorToIndex) / B.denomControlCohort * 100 as prevPct
296            from DT.comorbiditiesControl A inner join
297                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
298            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort
299            union corr
300            select A.database, A.cohort, A.outcomeCategory, A.disease,
301                   B.denomPatid,
302                   B.denomControlCohort,
303                   "12 months" as timeWindow,
304                   sum(A.indPrev12mo) as numer,
305                   sum(A.indPrev12mo) / B.denomControlCohort * 100 as prevPct
306            from DT.comorbiditiesControl A inner join
307                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
308            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort
309            union corr
310            select A.database, A.cohort, A.outcomeCategory, A.disease,
311                   B.denomPatid,
312                   B.denomControlCohort,
313                   "24 months" as timeWindow,
314                   sum(A.indPrev24mo) as numer,
315                   sum(A.indPrev24mo) / B.denomControlCohort * 100 as prevPct
316            from DT.comorbiditiesControl A inner join
317                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
318            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort
319            union corr
320            select A.database, A.cohort, A.outcomeCategory, A.disease,
321                   B.denomPatid,
322                   B.denomControlCohort,
323                   "36 months" as timeWindow,
324                   sum(A.indPrev36mo) as numer,
325                   sum(A.indPrev36mo) / B.denomControlCohort * 100 as prevPct
326            from DT.comorbiditiesControl A inner join
327                 Work.denominator B on (A.database = B.database & A.cohort = B.cohort)
328            group by A.database, A.cohort, A.outcomeCategory, A.disease, B.denomPatid, B.denomControlCohort;
NOTE: Table WORK.PREV created, with 184 rows and 9 columns.

329          select * from Work.prev;
                                                                  --- AS project ---                               11:57 Friday, September 8, 2017   1

                                                                                                            denom
                                                                                                          Control
database  cohort  Disease Category            Disease                                    denomPatid        Cohort  timeWindow         numer   prevPct
-----------------------------------------------------------------------------------------------------------------------------------------------------
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  12 months           4681  0.410893
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  24 months           8048  0.706445
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  36 months          10496  0.921328
MPCD      Non-AS  Cancer                      Hematologic Cancer                            1139225       1139225  Prior to index      3369  0.295727
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  12 months              6  0.000527
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  24 months              7  0.000614
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  36 months              7  0.000614
MPCD      Non-AS  Cancer                      Non Melanoma Skin Cancer                      1139225       1139225  Prior to index         4  0.000351
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  12 months          31774  2.789089
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  24 months          51175  4.492089
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  36 months          64326   5.64647
MPCD      Non-AS  Cancer                      Solid Cancer                                  1139225       1139225  Prior to index     23524  2.064913
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  12 months           8908  0.781935
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  24 months          15381  1.350128
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  36 months          20239  1.776559
MPCD      Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1139225       1139225  Prior to index      6642  0.583028
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  12 months           5886  0.516667
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  24 months          11257  0.988128
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  36 months          15451  1.356273
MPCD      Non-AS  Cardiac disease             Conduction Block                              1139225       1139225  Prior to index      4195  0.368233
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  12 months            120  0.010533
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  24 months            227  0.019926
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  36 months            290  0.025456
MPCD      Non-AS  Cardiac disease             Myocardial infarction                         1139225       1139225  Prior to index        88  0.007725
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  12 months           1221  0.107178
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  24 months           1968  0.172749
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  36 months           2473  0.217077
MPCD      Non-AS  Infection                   Hospitalized infection                        1139225       1139225  Prior to index      1054  0.092519
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  12 months           3845   0.33751
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  24 months           7258    0.6371
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  36 months          10048  0.882003
MPCD      Non-AS  Infection                   Opportunistic infection                       1139225       1139225  Prior to index      2564  0.225065
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  12 months          21713  1.905945
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  24 months          30056  2.638285
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  36 months          34518  3.029955
MPCD      Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1139225       1139225  Prior to index     15903  1.395949
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  12 months          21123  1.854155
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  24 months          31795  2.790932
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  36 months          37981  3.333933
MPCD      Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1139225       1139225  Prior to index     14537  1.276043
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  12 months            193  0.016941
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  24 months            462  0.040554
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  36 months            697  0.061182
MPCD      Non-AS  Kidney disease              Amyloidosis                                   1139225       1139225  Prior to index       108   0.00948
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  12 months            552  0.048454
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  24 months            938  0.082337
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  36 months           1222  0.107266
MPCD      Non-AS  Kidney disease              IgA nephropathy                               1139225       1139225  Prior to index       413  0.036253
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  12 months            255  0.022384
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  24 months            470  0.041256
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  36 months            601  0.052755
MPCD      Non-AS  Kidney disease              Nephrotic syndrome                            1139225       1139225  Prior to index       216   0.01896
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  12 months             79  0.006935
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  24 months            145  0.012728
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  36 months            206  0.018082
MPCD      Non-AS  Lung disease                Apical Pulmonary fibrosis                     1139225       1139225  Prior to index        46  0.004038
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  12 months             31  0.002721
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  24 months             56  0.004916
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  36 months             62  0.005442
MPCD      Non-AS  Lung disease                Interstitial lung disease                     1139225       1139225  Prior to index        29  0.002546
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  12 months           6119   0.53712
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  24 months          11634  1.021221
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  36 months          15781   1.38524
MPCD      Non-AS  Lung disease                Restrictive lung disease                      1139225       1139225  Prior to index      4220  0.370427
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  12 months             54   0.00474
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  24 months            113  0.009919
 
                                                        queryPrevalentComorbiditiesControl.sas
                                                                  --- AS project ---                               11:57 Friday, September 8, 2017   2

                                                                                                            denom
                                                                                                          Control
database  cohort  Disease Category            Disease                                    denomPatid        Cohort  timeWindow         numer   prevPct
-----------------------------------------------------------------------------------------------------------------------------------------------------
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  36 months            154  0.013518
MPCD      Non-AS  Neurological Disease        Cauda Equina syndrome                         1139225       1139225  Prior to index        42  0.003687
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  12 months            423  0.037131
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  24 months            793  0.069609
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  36 months           1079  0.094714
MPCD      Non-AS  Neurological Disease        Spinal Cord compression                       1139225       1139225  Prior to index       296  0.025983
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  12 months           3989   0.35015
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  24 months           7873  0.691084
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  36 months          11040   0.96908
MPCD      Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1139225       1139225  Prior to index      3045  0.267287
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  12 months          11336  0.995062
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  24 months          22261  1.954048
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  36 months          30838  2.706928
MPCD      Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1139225       1139225  Prior to index      8449  0.741645
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  12 months          47825  4.198029
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  24 months          71429  6.269964
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  36 months          84205  7.391428
MPCD      Non-AS  PsO/PsA                     Psoriasis                                     1139225       1139225  Prior to index     33212  2.915315
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  12 months          10408  0.913604
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  24 months          14643  1.285347
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  36 months          17232  1.512607
MPCD      Non-AS  PsO/PsA                     Psoriatic arthritis                           1139225       1139225  Prior to index      7755  0.680726
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  12 months           1849  0.162303
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  24 months           3151  0.276592
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  36 months           3991  0.350326
MPCD      Non-AS  Uveitis                     Uveitis                                       1139225       1139225  Prior to index      1262  0.110777
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1844703       1844703  12 months          24291  1.316797
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1844703       1844703  24 months          31372  1.700653
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1844703       1844703  36 months          36524  1.979939
Medicare  Non-AS  Cancer                      Hematologic Cancer                            1844703       1844703  Prior to index     24282  1.316309
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1844703       1844703  12 months          10908  0.591315
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1844703       1844703  24 months          18739  1.015827
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1844703       1844703  36 months          22906  1.241718
Medicare  Non-AS  Cancer                      Non Melanoma Skin Cancer                      1844703       1844703  Prior to index     11064  0.599771
Medicare  Non-AS  Cancer                      Solid Cancer                                  1844703       1844703  12 months         177994  9.648925
Medicare  Non-AS  Cancer                      Solid Cancer                                  1844703       1844703  24 months         227798  12.34876
Medicare  Non-AS  Cancer                      Solid Cancer                                  1844703       1844703  36 months         261318  14.16586
Medicare  Non-AS  Cancer                      Solid Cancer                                  1844703       1844703  Prior to index    178878  9.696846
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1844703       1844703  12 months          43157  2.339509
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1844703       1844703  24 months          69969  3.792968
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1844703       1844703  36 months          89011  4.825221
Medicare  Non-AS  Cardiac disease             Aortic Insufficiency/Aortic Regurgitation     1844703       1844703  Prior to index     50061   2.71377
Medicare  Non-AS  Cardiac disease             Conduction Block                              1844703       1844703  12 months          41328  2.240361
Medicare  Non-AS  Cardiac disease             Conduction Block                              1844703       1844703  24 months          70461  3.819639
Medicare  Non-AS  Cardiac disease             Conduction Block                              1844703       1844703  36 months          92312  5.004166
Medicare  Non-AS  Cardiac disease             Conduction Block                              1844703       1844703  Prior to index     49634  2.690623
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1844703       1844703  12 months           9398  0.509459
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1844703       1844703  24 months          18737  1.015719
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1844703       1844703  36 months          26599  1.441912
Medicare  Non-AS  Cardiac disease             Myocardial infarction                         1844703       1844703  Prior to index     10538  0.571257
Medicare  Non-AS  Infection                   Hospitalized infection                        1844703       1844703  12 months         119447  6.475134
Medicare  Non-AS  Infection                   Hospitalized infection                        1844703       1844703  24 months         205565  11.14353
Medicare  Non-AS  Infection                   Hospitalized infection                        1844703       1844703  36 months         269725  14.62159
Medicare  Non-AS  Infection                   Hospitalized infection                        1844703       1844703  Prior to index    125639  6.810798
Medicare  Non-AS  Infection                   Opportunistic infection                       1844703       1844703  12 months          13176  0.714261
Medicare  Non-AS  Infection                   Opportunistic infection                       1844703       1844703  24 months          22678  1.229358
Medicare  Non-AS  Infection                   Opportunistic infection                       1844703       1844703  36 months          30409   1.64845
Medicare  Non-AS  Infection                   Opportunistic infection                       1844703       1844703  Prior to index     14797  0.802135
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1844703       1844703  12 months           6958  0.377188
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1844703       1844703  24 months           9568  0.518674
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1844703       1844703  36 months          11263  0.610559
Medicare  Non-AS  Inflammatory bowel disease  Crohn’s Disease                               1844703       1844703  Prior to index      7710  0.417953
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1844703       1844703  12 months           8199  0.444462
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1844703       1844703  24 months          12375   0.67084
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1844703       1844703  36 months          15410  0.835365
Medicare  Non-AS  Inflammatory bowel disease  Ulcerative Colitis                            1844703       1844703  Prior to index      9656  0.523445
 
                                                        queryPrevalentComorbiditiesControl.sas
                                                                  --- AS project ---                               11:57 Friday, September 8, 2017   3

                                                                                                            denom
                                                                                                          Control
database  cohort  Disease Category            Disease                                    denomPatid        Cohort  timeWindow         numer   prevPct
-----------------------------------------------------------------------------------------------------------------------------------------------------
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1844703       1844703  12 months            295  0.015992
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1844703       1844703  24 months            484  0.026237
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1844703       1844703  36 months            659  0.035724
Medicare  Non-AS  Kidney disease              Amyloidosis                                   1844703       1844703  Prior to index       292  0.015829
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1844703       1844703  12 months           2326  0.126091
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1844703       1844703  24 months           3776  0.204694
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1844703       1844703  36 months           4933  0.267414
Medicare  Non-AS  Kidney disease              IgA nephropathy                               1844703       1844703  Prior to index      2595  0.140673
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1844703       1844703  12 months           1346  0.072966
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1844703       1844703  24 months           2171  0.117688
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1844703       1844703  36 months           2760  0.149618
Medicare  Non-AS  Kidney disease              Nephrotic syndrome                            1844703       1844703  Prior to index      1493  0.080934
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1844703       1844703  12 months            184  0.009975
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1844703       1844703  24 months            245  0.013281
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1844703       1844703  36 months            289  0.015666
Medicare  Non-AS  Lung disease                Apical Pulmonary fibrosis                     1844703       1844703  Prior to index       180  0.009758
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1844703       1844703  12 months            528  0.028622
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1844703       1844703  24 months           1019  0.055239
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1844703       1844703  36 months           1364  0.073941
Medicare  Non-AS  Lung disease                Interstitial lung disease                     1844703       1844703  Prior to index       534  0.028948
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1844703       1844703  12 months          87591  4.748244
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1844703       1844703  24 months         147356  7.988061
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1844703       1844703  36 months         192829  10.45312
Medicare  Non-AS  Lung disease                Restrictive lung disease                      1844703       1844703  Prior to index    101644  5.510047
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1844703       1844703  12 months            359  0.019461
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1844703       1844703  24 months            612  0.033176
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1844703       1844703  36 months            825  0.044723
Medicare  Non-AS  Neurological Disease        Cauda Equina syndrome                         1844703       1844703  Prior to index       482  0.026129
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1844703       1844703  12 months           2613  0.141649
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1844703       1844703  24 months           4550  0.246652
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1844703       1844703  36 months           6068  0.328942
Medicare  Non-AS  Neurological Disease        Spinal Cord compression                       1844703       1844703  Prior to index      3331  0.180571
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1844703       1844703  12 months          25317  1.372416
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1844703       1844703  24 months          43982  2.384232
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1844703       1844703  36 months          57945  3.141156
Medicare  Non-AS  Osteoporotic fracture       Clinical vertebral fracture                   1844703       1844703  Prior to index     33774  1.830864
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1844703       1844703  12 months          51458  2.789501
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1844703       1844703  24 months          87865  4.763097
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1844703       1844703  36 months         115587  6.265887
Medicare  Non-AS  Osteoporotic fracture       Non-vertebral osteoporotic fracture           1844703       1844703  Prior to index     83164   4.50826
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1844703       1844703  12 months           6987   0.37876
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1844703       1844703  24 months          10764  0.583509
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1844703       1844703  36 months          13369  0.724724
Medicare  Non-AS  PsO/PsA                     Psoriasis                                     1844703       1844703  Prior to index      7873   0.42679
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1844703       1844703  12 months           2606  0.141269
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1844703       1844703  24 months           3398  0.184203
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1844703       1844703  36 months           3958   0.21456
Medicare  Non-AS  PsO/PsA                     Psoriatic arthritis                           1844703       1844703  Prior to index      2855  0.154767
Medicare  Non-AS  Uveitis                     Uveitis                                       1844703       1844703  12 months           5883  0.318913
Medicare  Non-AS  Uveitis                     Uveitis                                       1844703       1844703  24 months           9342  0.506423
Medicare  Non-AS  Uveitis                     Uveitis                                       1844703       1844703  36 months          11979  0.649373
Medicare  Non-AS  Uveitis                     Uveitis                                       1844703       1844703  Prior to index      7844  0.425218
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                                                        queryPrevalentComorbiditiesControl.sas
330        quit;
NOTE: The PROCEDURE SQL printed pages 1-3.
NOTE: PROCEDURE SQL used (Total process time):
      real time           48:05.70
      cpu time            11:10.11
      

331        
332        
333        proc export
334          data = Work.prev
335          outfile = "data\processed\&cmt..csv"
336          dbms = csv
337          replace;
338          delimiter = ",";
339        run;

340         /**********************************************************************
8                                                                   The SAS System                                     11:57 Friday, September 8, 2017

341         *   PRODUCT:   SAS
342         *   VERSION:   9.4
343         *   CREATOR:   External File Interface
344         *   DATE:      08SEP17
345         *   DESC:      Generated SAS Datastep Code
346         *   TEMPLATE SOURCE:  (None Specified.)
347         ***********************************************************************/
348            data _null_;
349            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
350            %let _EFIREC_ = 0;     /* clear export record count macro variable */
351            file 'data\processed\queryPrevalentComorbiditiesControl.csv' delimiter=',' DSD DROPOVER lrecl=32767;
352            if _n_ = 1 then        /* write column names or labels */
353             do;
354               put
355                  "database"
356               ','
357                  "cohort"
358               ','
359                  "outcomeCategory"
360               ','
361                  "Disease"
362               ','
363                  "denomPatid"
364               ','
365                  "denomControlCohort"
366               ','
367                  "timeWindow"
368               ','
369                  "numer"
370               ','
371                  "prevPct"
372               ;
373             end;
374           set  WORK.PREV   end=EFIEOD;
375               format database $8. ;
376               format cohort $6. ;
377               format outcomeCategory $26. ;
378               format Disease $41. ;
379               format denomPatid best12. ;
380               format denomControlCohort best12. ;
381               format timeWindow $14. ;
382               format numer best12. ;
383               format prevPct best12. ;
384             do;
385               EFIOUT + 1;
386               put database $ @;
387               put cohort $ @;
388               put outcomeCategory $ @;
389               put Disease $ @;
390               put denomPatid @;
391               put denomControlCohort @;
392               put timeWindow $ @;
393               put numer @;
394               put prevPct ;
395               ;
396             end;
397            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
398            if EFIEOD then call symputx('_EFIREC_',EFIOUT);
399            run;

NOTE: The file 'data\processed\queryPrevalentComorbiditiesControl.csv' is:
      Filename=U:\studies\AS\pgms\bchan\data\processed\queryPrevalentComorbiditiesControl.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=08Sep2017:13:50:34,
      Create Time=08Sep2017:05:18:34

NOTE: 185 records were written to the file 'data\processed\queryPrevalentComorbiditiesControl.csv'.
      The minimum record length was 71.
      The maximum record length was 123.
NOTE: There were 184 observations read from the data set WORK.PREV.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
9                                                                   The SAS System                                     11:57 Friday, September 8, 2017

      cpu time            0.01 seconds
      

184 records created in data\processed\queryPrevalentComorbiditiesControl.csv from WORK.PREV.
  
  
NOTE: "data\processed\queryPrevalentComorbiditiesControl.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.60 seconds
      cpu time            0.03 seconds
      

400        
401        
402        ods html close;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           1:52:45.38
      cpu time            18:34.78
      
